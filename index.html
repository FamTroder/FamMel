<!--suppress XmlHighlighting -->
<html lang="en">
<head>
    <style type="text/css">
        body {
            font-family: sans-serif;
        }

        a:hover {
            color: #888800;
        }

        a {
            text-decoration: none;
            color: #000088;
        }
    </style>
    <meta charset="UTF-8">
    <script src="scripts/main.js"></script>
    <script src="scripts/quotes.js"></script>
    <script src="scripts/animation.js"></script>
    <script src="scripts/settings.js"></script>
    <script src="scripts/images.js"></script>
    <script src="scripts/yourhome.js"></script>
    <script src="scripts/objects.js"></script>
    <script src="scripts/actions.js"></script>
    <script src="scripts/bladder.js"></script>
    <script src="scripts/clothes.js"></script>
    <title>Melissa Explains it All</title>
</head>
<body>
<script>
    /*

   Since last release ( 3.0 )

    RECENT REQUESTS ( actual requests ):
1)  Different clothing for different girls
2)  More than 1 girl at the same time
3)  When she wets herself, starts losing slowly, a squirt, a wet patch, a bigger patch, then loses entirely.
4)  Player also has bladder & pee need.

    RECENT CHANGES:

1)  Ability to make a custom girl
2)  Elevator hijinx - she can wet herself, and sometimes
    somebody comes out of the elevator.
3)  New outfit: jeans and black tee - both tight.
4)  Records empty champagne bottle
5)  Bladder size reduces when she holds it too long.
6)  Enhanced debug mode
7)  Flirting with the lady bartender in the club -> jelousy
8)  Began modification for solo activities and started solo bargirl scene.
8A)  Somewhat Enhanced solo bargirl scene.
9)  Made wetting the bed a non-losing option.
10) Added possibility to take her keys or cellphone when you let her go pee.
11) Added lost keys functionality to apartment
12)  Massively Enhanced solo bargirl scene.

    STUFF TO FIX:

    STUFF TO ADD:

1) Bladder Buster night randomly available in the bar.  Bathroom
   continuously locked rather than just randomly locked.
2) She tries to pee in a glass under the table in the bar if she has to go bad.
3) You ask her to take a camera into the bathroom with her.
4) You can abandon the date:
    - You excuse yourself to go to the restroom?
    After which:
        - hole in the wall to see inside the ladies room with a line
        - pick up an escort
        - should there be a lady bartender?
5) You "find" objects of power:
    - magic bladder gun?
    - diuretic pills?
    - remote control?
6) More games - truth or dare?
7) She left her keys in your car...
8) Flesh out the stuff you see while you're driving
9) Solo Hotel:
   - Front office girl is stuck and has to pee
   - Room service girl brings & shares champagne
   - Escort in-call


=========================
FIXES BY OLRAST

3.2.1

* Setting custom girl bladder capacity works now
* When using a custom girl with JPG pictures, pictures of the girl she's based on are displayed

3.2.2

* Fixed image flicker

3.2.3

* Removed tracking code (injected by a hosting site?)

============================
CHANGES BY Forget_About_Me

4.0

*fixed some game-breaking bugs with rarer scenes
*General bug fixes
*changed the html so now the game is in the full browser screen instead of only part of it.
*You can now kiss and feel her up in the dark bar
*Added a make-out option to the hot tub
*Clothes now get reset when leaving a make-out session(beach and hot-tub)
*fixed some typos
*Added the option to be able to repeat actions during a make-out/sex session
*Added the option to have actions reset between make-out/sex sessions
*In the theatre you can now ask her which movie she wants to watch
*Tweaked the success of actions during the movie a bit.
*Implemented PlayerBladder - needs better scenes

=====================

4.1

*Added possibilities for you to pee when the bathroom is unavailable
*Tweaked how the bladders fill a tiny bit. Not noticeable for players.
*fixed a bug where you didn't lose control during the drinking game
*Slight code cleanup
*She no longer takes the vase/shot glass to the bathroom with her when you are in the car/outside
*At the end of the drinking game you no longer automatically go to the bathroom
*She no longer asks for the bar if you have already been there
*When you're alone she will no longer ask you to hold her purse
*You can now set a custom capacity for your bladder
*increased the amount of money you have, since you now also need to buy for yourself
*You can now only go to the bathroom if you actually need to go
*You can now pee in the tub
*You now can't have sex with her if she is still wearing bottoms
*You no longer can change the options mid-game
*Fixed a bug that caused a line to be said twice
*You no longer automatically lose attraction if you ask her to hold it and she's not desperate
*Started organizing the clutter that happens when you have a lot of items
*You can now drink with her
*You can ask her how she is doing when she's holding it for you
*Added an option to change how much money you have

==================

4.2

*Tweaked the chance of spurting instead of fully wetting
*Fixed a game breaking bug in the drinking game
*Changed the chance she'll hold it if you ask when she's desperate
*Code cleanup
*Fixed the bug were bladder-limits weren't updated when choosing a preset girl
*Fixed that you still drink soda even if you're tummy is full
*Fixed the bug where she only asks for the bar, all the time
*First start on splitting the code into multiple files
*Changed the way stats are handled to be a bit more elegant
*Replaced all deprecated code
*Changed lost attraction if you make her drink while desperate
*Fixed that the wrong dialogue appears when you lose control during the drinking game
*Changed end scenes for the drinking game
*You can now keep buying drinks in a row.

4.3

*Moving quotes to JSON
*Settings are now saved between sessions
*Fixed the loop with a certain end-scene of the drinking game
*Changed the way pictures are added
*Changed with how much cocktails increase max-tummy
*Tweaked chance of finding key to hopefully be a bit more favourable
*/

    //TODO potentially clean up if statements with multiple locations
    //TODO fix replacing whole arrays if not needed

    // Debug Parameters
    let enableimages = 0; // 0 = Disable image loading
    let enableascii = 1; // 0 = Disable ascii art display
    let enablehide = 0; // 1 = Hide screen

    const enabledebug = 1; // 1 = Allow selection of debug mode
    let debugmode = 0; // 1 = we are in debug mode
    let showstats = 1; // 1 = Show her bladder state, etc.
    // Girl Selection Parameters
    let withgirl = 1; // 0 = you have escaped your date
    let photolevel = 0; // 0 = clothed, 1 = costumed, 2 = to be naked, 3 = naked.

    let girlname = "Laura";
    let customgirlname = "Amanda";
    let basegirl = "Laura";
    let girltalk = "<b>" + girlname + ":&nbsp;</b>";
    let girlgasp = "<b>" + girlname + " gasps:&nbsp;</b>";
    let favoritemovie = "theurge";
    let suggestedloc = "thebar";

    let heroutfit = "jeans";  //  Her clothing choice for the date
                              //  Possible values: skirt, jeans

    const clubclosingtime = 7 * 60; // 2:00AM
    const theaterclosingtime = 3 * 60; // 10:00PM last showing
    const barclosingtime = 6 * 60; // 1:00AM

    let money = 200;
    let attraction = 10;
    let tummy = 100;
    let bladder = 300;
    let shyness = 90;


    let tumavg = tummy; // Average blood water level
    const tumdecay = 6; // Number of calculation cycles to average bladder filling
    //Your stats Parameters
    let yourbladder = 500;
    let yourtummy = 200;
    let yourtumavg = yourtummy;
    let holdself = 0;
    const holdpeethresh = 3; //Chance you'll still pee yourself even though you're holding your dick.


    let yourbladurge = 500; // Level where you feel the first urge
    let yourbladneed = yourbladurge * 2; // Level where you continuously needs to go
    let yourblademer = yourbladurge * 3; // Level where it becomes an emergency
    let yourbladlose = yourbladurge * 3 + 150; // Level where you lose control
    let yourbladcumlose = yourbladurge * 4; // Level where you lose it as you cum
    let yourbladsexlose = yourbladurge * 5; // Level where you can't control it during sex

    let ymaxtummy = 500; // Drink capacity of stomach
    const ymaxbeer = 1000; // Beer capacity of stomach

    let lastmoney = money;
    let lastattraction = attraction;
    let lastshyness = shyness;

    let hour = 7;
    let minute = 0;
    let meridian = "PM";
    const timespeed = 2;
    let thetime = 0;

    // Fucking Parameters, mostly to figure out what she still has on.
    let arousal = 0;
    let kisscounter = 0;
    let feelcounter = 0;
    let xskirt = 0;
    let xtop = 0;
    let xbra = 0;
    let xpanties = 0;
    let kneck = 0;
    let kthigh = 0;
    let kpussy = 0;
    let kbreast = 0;
    let tthigh = 0;
    let tpussy = 0;
    let tbreast = 0;
    let tass = 0;
    let fuckingnow = 0; // You are in the middle of fucking.
    let multiplemoves = 1;
    let rstmoves = 0; //Whether the sex moves reset after a make-out session
    //Formatting Parameters
    let ulopen = 0; // Formatting : flags if <ul> has been made.
    let slopen = 0; // Formatting : flags if string has been placed.
    let imageprev = "imgs/Laura/pixnorm.gif";  // Previous image
    const imagedesc = '"Picture of girl"';
    let imagename = imageprev;  // Actual picture.  Goes to default after 1 turn.
    let comma = 0; // used in formatting posessions.
    //The bladders
    let customurge = 250;
    let yourcustomurge = 500;

    let bladurge = 250; // Level where she feels the first urge
    let bladneed = bladurge * 2; // Level where she continuously needs to go
    let blademer = bladurge * 3; // Level where it becomes an emergency
    let bladlose = bladurge * 3 + 150; // Level where she loses control
    let bladcumlose = bladurge * 4; // Level where she spurts as she cums
    let bladsexlose = bladurge * 5; // Level where she can't control it during sex


    let maxtummy = 250; // Drink capacity of stomach
    const maxbeer = 500; // Beer capacity of stomach


    function updateurge(newurge) {
        bladurge = newurge;
        bladneed = newurge * 2; // Level where she continuously needs to go
        blademer = newurge * 3; // Level where it becomes an emergency
        bladlose = newurge * 3 + 150; // Level where she loses control
        bladcumlose = newurge * 4; // Level where she spurts as she cums
        bladsexlose = newurge * 5; // Level where she can't control it during sex
    }


    function updateyoururge(newurge) {
        yourbladurge = newurge;
        yourbladneed = newurge * 2;
        yourblademer = newurge * 3;
        yourbladlose = newurge * 3 + 150;
        yourbladcumlose = newurge * 4;
        yourbladsexlose = newurge * 5
    }

    //Counter Parameters
    const maxkiss = 7; // maximum number of kisses that have effect.
    const maxfeel = 7; // maximum number of feel-ups that have effect

    const randmax = 5; // Maximum value of random counter
    const maxpstory = 8; // Maximum value of story counter
    let pstorycounter = 0;
    let oldpstorycounter = pstorycounter;

    let posectr = 0; // keep track of which pose is next/last.
    const posemax = 5; // Maximum value of pose counter

    let outfitctr = 0; // keep track of the outfit being worn.
    const outfitmax = 5; // maximum count of outfits


    //  Randomness thresholds 1-10.
    //  1 corresponds to 10% likelihood.
    //  10 corresponds to 100% likelihood.
    const rrlockedthresh = 7; // Likelihood of bar restroom locked ( occupied )
    const rrlinethresh = 7; // Likelihood of line for restroom in club
    const phoneholdthresh = 7; // Likelihood of her holding it for you on the phone
    let spurtthresh = 5; // Likelihood of her spurting rather than wetting
    let yspurtthresh = 3; // Likelihood of you spurting rather than wetting
    let bribeaskthresh = 8; //Likelihood she'll hold it if you ask her when desperate
    let lookaroundthresh = 5; //Likelihood you'll find a key when looking around.

    //  Attraction thresholds
    const ptogetherthreshold = 100; // She'll take you with her to the bathroom.
    const pnorestroomthreshold = 110; // She'll pee outside of the restroom.
    const pwatchthreshold = 90; // You can watch her pee in a closed place.
    const drinkinggamethreshold = 90; // She'll play your silly drinking game.
    const photogamethreshold = 90; // She'll play your silly photo game
    const photogamecthreshold = 100; // She'll play your silly photo game in costume
    const photogamenthreshold = 110; // She'll play your silly photo game nude
    const hottubthresh = 90; //  She'll strip and go into the hot tub
    const holditneedthresh = 30; // She'll hold it for need
    const holditemerthresh = 60; // She'll hold it for emergency
    const holditlosethresh = 90; // She'll try to hold it for lose
    const gomakeoutthresh = 40; // She'll go to the makeout spot


    //  Location handling stack
    //  initialized at the start.
    const locstack = Array(); //The first element in the Array is the current location

    //  flags
    // Indicates new venue change
    let didintro = 0; // Flag for having done introduction
    let onphone = 0; // Flag for being on the phone with her
    let seenmovie = 0; // Flag for having seen a movie already
    let beenbar = 0;  //  Been to the bar already
    let beenclub = 0; // Been to the club already
    let beenmakeout = 0; // Seen a movie already
    let flirtedflag = 0; // Actually a counter.  Keeps track of flirting.
    const maxflirts = 2; // Maximum flirt points per venue
    let rrlockedflag = 0; // Restroom was locked last time she went
    let yrrlockedflag = 0;
    let askedswim = 0; // She's asked about a swim
    let wetthecar = 0; // Seat of the car is wet
    let shespurted = 0; // She only spurted
    let brokeice = 0; // She's previously brought up that she needs to pee
    let sawherpee = 0; // You've seen her pee
    let haveherpurse = 0; // You're holding her purse
    let late = 0; //You are late to pick her up

    let bartopic = 0; // Topics of discussion at the bar.
    let noflirtflag = 0; // Suppress flirty options

    let externalflirt = 0; // You flirted with somebody else

    let roses = 0; // flowers object counter
    let water = 0; // water bottle object counter
    //TODO limit what vase can hold
    let vase = 0; // vase object counter
    let ptowels = 0; // paper towel object counter
    let panties = 0; // panties object counter
    let champagne = 0; // champagne object counter
    let shotglass = 0; // shot glass object
    let earrings = 0; // earrings object counter
    let hercellphone = 0; // cellphone object counter
    let herkeys = 0; // her keys object counter

    let wetpanties = 0; // wet panties object
    let beer = 0; // beer bottle object ( increased bladder cap on beer only )
    let cocktail = 0; // cocktail object ( each increases maxtummy by 100 )
    let soda = 0; // soda object ( This is a 500ml soda. )

    // Keys to the buildings
    let barkey = 0; // key to the bar
    let clubkey = 0; // key to the club
    let theaterkey = 0; // key to the theater

    // Girl stats(Counter and Flags)
    let owedfavor = 0; // she owes you a favor
    let pantycolor = "black";
    let flirtcounter = 0; // time since last flirt ( counts by 2 )
    let wetlegs = 0; // her legs are wet
    let wetherpanties = 0; // did she ever wet herself?
    let prepeed = 0; // did she pee before you picked her up
    let champagnecounter = 0; // Number of glasses of champagne served.
    //TODO figure out where gottagoflag is actually used
    let gottagoflag = 0; // has she just asked to use the restroom
    let showedneed = 0; // has she just visually displayed her need
    let changevenueflag = 0; // you are changing venue - makes her easily ask to pee.
    let moviecounter = 0; // Keep track of location in movie
    let moviechoice = 0; //  Which movie are we showing
    let askedfavourite = 0; //asked her which movie to watch

    let askholditcounter = 0; // How many times have you asked her to hold it.
    let waitcounter = 0; // how long ago did she ask to pee?
                         //Reset positive when you ask her.

    let nowpeeing = 0; // She is currently peeing
    let checkedherout = 0; // Flags that you just checked her out.

    let walkcounter = 0; // How far have you walked
    let elevatorwaitcounter = 0;

    //  The following are used by her to complain about how long she's
    // been waiting and how much she's drunk.
    let lastpeetime = 0;  // When did she last go?
    let timeheld = 0; // for stats
    let drankbeers = 0;
    let drankcocktails = 0;
    let dranksodas = 0;
    let drankwaters = 0;

    //same but for you
    let ylastpeetime = 0;  // When did you last go?
    const ytimeheld = 0; // for stats
    let ydrankbeer = 0;
    let ydrankcocktails = 0;
    let ydranksodas = 0;
    let ydrankwaters = 0;
    let ydrankbeers;

    //  So she doesn't seem unfamiliar with the concept after the first time.
    let peedtowels = 0; // has she peed in your paper towels
    let peedvase = 0; // has she peed in your vase
    let peedshot = 0; // has she peed in the shot glass
    let peedoutside = 0; // has she peed outside

    let drankbeer = 0; // has she drunk beer?  Changes capacities and rates.

    // General game flags
    let notdesperate = 0; //neither you or her are desperate after drinking game.
    let notydesperate = 0; //You aren't desperate but she is after drinking game.
    let nothdesperate = 0; //She isn't desperate but you are after drinking game

    /*
  -----------------------------------------------------------------
  GAME TEXT

   Most, but not all of the text in the game is stored in arrays.
   Note that all text with the girl's name in it has to be redefined
   later ( options dialog ) if the name of the girl is changed.
  -----------------------------------------------------------------
*/

    //
    //
    //  First set all the clothing related variables we're going to
    //  have as globals...  This is so she can have different outfits
    //  in normal life.  It's a lot of work, isn't it?
    //
    //

    let thighresp;
    let feelher;
    let feelres;
    let feelpee;
    let feelyou;
    let feelbad;
    let posenorm;
    let poseoutfit;
    let donoutfit;
    let donemer;
    let fillchampok;
    let stareather_laura;
    let stareather_karen;
    let stareather_jennifer;
    let stareather_melissa;
    let stareather;
    let peeprivate;
    let peeprivate2;
    let dryquote;
    let youpeeprivate;
    let youpeeprivate2;
    let peeshotquote;
    let peeshotquotebare;
    let peeskirtquote;
    let peeskirtquotebare;
    let peetowelquote;
    let peetowelquotebare;
    let peeoutsidequote;
    let peeoutsidequotebare;
    let peeoutsidebquote;
    let peeoutsidebquotebare;
    let wetherselfquote;
    let firstmtgquote;
    let firstmtgtightquote;
    let firstmtgtightquotebare;
    let soakedseatquote;
    let peeprepquote;
    let peeprepquotebare;
    let undressquote;
    let undressquoteemer;
    let ptogetherquote;
    let ptogetherquotebare;
    let ptogetheroutquote;
    let ptogetheroutquotebare;
    let finishtogethroutquote;
    let finishtogetheroutquotebare;
    let ptogetherdumpquote;
    let ptogetherdumpquotebare;
    let finishtogetherdumpquote;
    let finishtogetherdumpquotebare;

    let sextakeoffskirt;
    let sextakeoffblouse;

    let sextouchthighquote;
    let sextouchassquote;
    let sextouchpussyquote;
    let sexkissthighquote;
    let sexkisspussyquote;

    let sextoskirtquoteemer;
    let sextoskirtquote;
    let sextoskirtquotebare;
    let sextopantiesquote;
    let swimstripquote;
    let swimstripquotebare;
    let swimstripquotepanties;

    //TODO figure out dependencies
    //
    // Bartender quotes
    //
    let barquotes = ["Nice girl you've got there.  Bet she'll pee herself if she holds a drop over " + bladlose + "ml, though.",
        "She's cute, isn't she?  I bet if you found her a cocktail, she'd be a lot less inhibited about drinking.",
        "Did you know that beer is a diuretic?",
        "Say, you don't happen to know where a man could buy a set of wet panties around here, do you?",
        "How about them Dodgers?",
        "I've been thinking about starting a bladder buster night here on Mondays."];


    //
    //  She loses control
    //
    let wetquote = ["Suddenly, " + girlname + " squeals and then gasps!",
        "Suddenly, " + girlname + " freezes in place and her face turns bright red.",
        girlname + " gasps and grabs at her pussy.",
        girlname + " squeals and doubles over.",
        girlname + " suddenly gasps and her face turns red.",
        girlname + " suddenly shudders and her face turns red."];

    //
    //  How the girl responds to what you say indicates good or bad answer
    //
    let bargoodresp = [girlname + " looks you in the eyes and smiles as she talks.",
        girlname + " leans towards you and smiles.",
        girlname + " seems pleased with the conversation.",
        "You feel " + girlname + "'s foot playfully brush your leg, and she smiles as she talks",
        girlname + " touches your shoulder gently.",
        girlname + " seems to be playing with the top button of her blouse as she talks."];

    let barmedresp = [girlname + " seems uninterested in the conversation.",
        girlname + " twirls her hair around her finger as she talks.",
        girlname + " leans back in her chair.",
        girlname + " glances around the room.",
        girlname + " fiddles with her napkin.",
        girlname + " glances quickly at her watch."];

    let barbadresp = [girlname + " leans back in her chair and sighs.",
        girlname + " frowns.",
        girlname + " looks pointedly at her watch.",
        girlname + " seems more interested in shredding her napkin into little strips that what you have to say.",
        girlname + " appears engrossed in the program on the bar television ... which is an infomercial for Arizona real estate.",
        girlname + " looks exasperated."];

    /*

  -----------------------------------------------------------------

  DISPLAY MECHANICS

  Stuff that writes to the screen.

  -----------------------------------------------------------------

//TODO curtext can probably be a global variable
*/

    // Cache a choice
    // choice - array of length 2 with tag on index 0 and desc on index 1
    //   tag - function to activate using choice
    //   desc - description of choice to display.
    // curtext - a list of all current lines that will be printed during the scene
    function c(choice, curtext) {
        const html = "<li><a href=\"javascript:go('" + choice[0] + "')\">" + choice[1] + "</a>"
        curtext.push(html);
        //TODO decide if this is needed?
        if (didintro) {
            displaystats();
        }
        return curtext;
    }

    // Cache a statement
    //    t - the text to display.
    function s(t) {
        document.getElementById('textsp').innerHTML += t + "<p>";
    }


    //TODO this probably can be done more efficient
    function goback() {
        if (locstack[0] === "beachsex") {
            s("You both slowly get up from the sand and dust yourselves off.");
            s("You put yourself back together and help " + girlname + " make herself presentable.");
            showneed();
            resetclothes();
            if (rstmoves === 1) {
                resetmoves();
            }
            poploc();
            c(locstack[0], "Continue... ");
        } else if (locstack[0] === "thebeach") {
            s("You and " + girlname + " dust yourselves off and hike back up to the road.");
            showneed();
            poploc();
            c(locstack[0], "Continue... ");
        } else if (locstack[0] === "photogame") {
            if (photolevel === 3) {
                if (bladder > blademer)
                    s("Desperate to get to a restroom, but also somewhat shy,");
                s(girlname + " quickly puts her clothes back on and hops off the stage.");
            } else if (photolevel === 3) {
                if (bladder > blademer)
                    s("Desperate to get to a restroom, but also running somewhat on autopilot,");
                s(girlname + " quickly changes back into her clothes and hops off the stage.");
            } else {
                s(girlname + " hops down off the stage.");
            }
            showneed();
            poploc();
            c("indepee", "Continue... ");
        } else if (locstack[0] === "dodance") {
            s("You pull " + girlname + " off the dancefloor.");
            showneed();
            poploc();
            c(locstack[0], "Continue... ");
        } else if (locstack[0] === "thewalk") {
            s("You take " + girlname + "'s hand and hoof it quickly back to your parked car.");
            showneed();
            poploc();
            c(locstack[0], "Continue... ");
        } else if (locstack[0] === "theyard") {
            s("You stealthily creep back out of the gate, with " + girlname + " in tow.");
            showneed();
            poploc();
            c(locstack[0], "Continue... ");
        } else if (locstack[0] === "ptogether") {
            s("You quickly compose yourselves and head back out to the club, but first...");
            poploc();
            kissher();
        } else if (locstack[0] === "pgirlsroom") {
            s("You quickly compose yourselves guiltily sneak back out of the ladies room, but first...");
            poploc();
            kissher();
        } else if (locstack[0] === "pnorestroom") {
            s(girlname + " sighs in relief, and seems very aroused.");
            s(girltalk + "I feel <i>so</i> naughty!");
            poploc();
            kissher();
        } else if (locstack[0] === "postgame" || locstack[0] === "postgamelose") {
            if (notdesperate) {
            s("She smiles at you as she moves back to her own chair.");
            poploc();
            c(locstack[0], "Continue...");
            } else if(notydesperate){
                //TODO move back to her own chair
                s("When she finally emerges from the bathroom she sits down in your lap.");
                s("She kissed you soundly, before whispering in your ear: <strong>I feel <i>so</i> naughty!</strong>");
                poploc();
                attraction += 5;
                shyness -= 7;
                c(locstack[0], "Continue...");
            } else if(nothdesperate){
                //TODO probably have a shyness/attraction check
                s("You dash towards the urinal, already pulling your dick out of your boxers.");
                s("You don't bother holding back a moan as your bladder finally empties.");
                if(locstack[0]==="postgame") s("<em>Yes, you won the game. But it had been a close one.</em>");
                s("Suddenly the door to the men's room opens.");
                s("Surprised you turn your head to see " + girlname + " entering the room with a sultry smile");
                s("She moves over towards you and you can't help but jump a little as she grasps your still peeing dick");
                s("She captures your lips before whispering: <strong>That was really hot!</strong>");
                poploc();
                attraction += 10;
                shyness -= 10;
                c(locstack[0], "Continue...");
            }
            else{
                s("You emerge from the restroom first, then " + girlname + " comes back, looking a little damp and very aroused.");
                s(girltalk + "I feel <i>so</i> naughty!");
                poploc();
                kissher();
            }
        } else if (locstack[0] === "thehottub") {
            s("You take " + girlname + "'s hand and help her out of the hot tub, admiring the view in the dim starlight.");
            s("You can't help staring as she dries off as best she can and dresses beside you in the warm evening air.");
            showneed();
            poploc();
            c(locstack[0], "Continue... ");
        } else if (locstack[0] === "tubsex") {
            s("You both sit there for a few seconds, trying to catch your breath.");
            resetclothes();
            if (rstmoves === 1) resetmoves();
            poploc();
            c(locstack[0], "Continue...");
        } else {
            poploc();
            eval(locstack[0] + "()");
        }

    }



    //Slightly randomizes the calculated tuminc
    // so the bladder doesn't fill with a completely fixed amount each time
    function randtuminc(tempinc) {
        if (tempinc === 2)
            return tempinc;
        let choicearray = [];
        for (let i = 0; i < 10; i++) {
            if (i === 0)
                choicearray.push(tempinc - 2);
            else if (i < 3)
                choicearray.push(tempinc - 1);
            else if (i < 7)
                choicearray.push(tempinc);
            else if (i < 9)
                choicearray.push(tempinc + 1);
            else
                choicearray.push(tempinc + 2);
        }
        return pickrandom(choicearray);
    }

    //TODO this is called way too often
    //  Updates the information on the stats
    function displaystats() {
        let textminutes = minute;

        if (minute < 10) textminutes = "0" + minute;

        document.getElementById("mon").innerText = "$" + money;
        document.getElementById("att").innerText = attraction;
        document.getElementById("shy").innerText = shyness;
        document.getElementById("tum").innerText = tummy;
        document.getElementById("blad").innerText = bladder;
        document.getElementById("time").innerText = hour + ":" + textminutes + " " + meridian;
        document.getElementById("ytum").innerText = yourtummy;
        document.getElementById("yblad").innerText = yourbladder;
        if (debugmode) {
            document.getElementById("bladu").innerText = bladurge;
            document.getElementById("bladn").innerText = bladneed;
            document.getElementById("blade").innerText = blademer;
            document.getElementById("bladl").innerText = bladlose;
            document.getElementById("maxt").innerText = maxtummy;
            document.getElementById("randc").innerText = randcounter;
        } else if (!showstats) {
            document.getElementById("tum").innerText = "?";
            document.getElementById("blad").innerText = "?";
        }
        if (attraction !== lastattraction) {
            document.getElementById("att").setAttribute("style", "background-color: #E0FF80");
        } else {
            document.getElementById("att").setAttribute("style", "background-color: #FFFFE0");
        }
        if (shyness !== lastshyness) {
            document.getElementById("shy").setAttribute("style", "background-color: #E0FF80");
        } else {
            document.getElementById("shy").setAttribute("style", "background-color: #FFFF90");
        }
        if (money !== lastmoney) {
            document.getElementById("mon").setAttribute("style", "background-color: #E0FF80");
        } else {
            document.getElementById("mon").setAttribute("style", "background-color: #FFFF90");
        }
    }




    /*

  -----------------------------------------------------------------

  Common Tasks

  Commonly used functions for common situations.

  -----------------------------------------------------------------

*/


    /*
//TODO update comments
  Location handling.
    curloc is ALWAYS the current location, but...
       curloc is ONLY set under certain circumstances:
         1)  Leaving car to go to a destination _and_ the
	     destination is not a repeat and still open.
	 2)  Special locations such as the dancefloor.

    nextloc is the INTENDED destination.  Meaning you set it
       when you choose to head somewhere.

*/
    //TODO probably delete these functions
    function pushloc(newloc) {
        if (newloc !== locstack[0]) {
            locstack.unshift(newloc);
        }
    }

    function poploc() {
        if (locstack[0] !== locstack[1]) {
            locstack.shift();
        }
    }


    //
    //  Take a look around the location.
    //
    //TODO maybe change chance differently
    function lookaround() {
        const findkey = randomchoice(lookaroundthresh);
        s("You take a moment to glance around.");
        if (locstack[0] === "thebar") s(barview[randcounter]);
        if (locstack[0] === "theclub") s(clubview[randcounter]);
        if (locstack[0] === "themakeout") s(makeview[randcounter]);
        if (findkey) c("lookkey", "Investigate...");
        //Each time you look around the chance of success increases by 10%
        //if it's 90% it will be reset to 10%
        lookaroundthresh = (lookaroundthresh + 1) % 9;
        if (lookaroundthresh === 0){
            lookaroundthresh = 1;
        }
        c(locstack[0], "Continue...");
    }

    function lookkey() {
        s("It looks like some sort of key.");
        c("getkey", "Pick it up.");
        c(locstack[0], "Ignore it.");
    }

    function getkey() {
        s("You reach down and pocket the key.");
        if (locstack[0] === "thebar") barkey++;
        if (locstack[0] === "theclub") clubkey++;
        if (locstack[0] === "themakeout") theaterkey++;
        c(locstack[0], "Continue...");
    }

    //
    //  Reset All Pee Counters ( means she peed )
    //
    function flushdrank() {

        //  Derate bladder capacity if she loses it...
        if (bladder >= bladlose) updateurge(bladurge * 9 / 10);

        bladder = 0;
        askholditcounter = 0;
        waitcounter = 0;
        gottagoflag = 0;
        drankwaters = 0;
        drankcocktails = 0;
        drankbeers = 0;
        dranksodas = 0;
        lastpeetime = thetime;
        rrlockedflag = 0;
        shespurted = 0;
        nowpeeing = 1;
        bribeaskthresh = 8;
    }

    function flushyourdrank() {

        //  Derate bladder capacity if you loses it...
        if (yourbladder >= yourbladlose) updateyoururge(yourbladurge * 9 / 10);

        yourbladder = 0;
        ydrankwaters = 0;
        ydrankcocktails = 0;
        ydrankbeers = 0;
        ydranksodas = 0;
        ylastpeetime = thetime;
        yrrlockedflag = 0;
        ynowpeeing = 1;
    }


    //
    //  She says how long she's been waiting to pee.
    //
    function displaywaited() {
        let timewaited = " ";
        let halftimewaited;
        halftimewaited = Math.floor((thetime - lastpeetime) / 30);
        if (halftimewaited > 1) {
            timewaited += Math.floor(halftimewaited / 2);
            if (halftimewaited % 2 === 1) {
                timewaited += " and a half hours";
            } else if (halftimewaited === 2) {
                timewaited += " whole hour";
            } else {
                timewaited += " hours"
            }
        } else if (halftimewaited === 1) {
            timewaited = " half an hour";
        }

        if (halftimewaited > 1)
            s(girltalk + holdingtime[randcounter] + timewaited + "!");
    }

    //
    //  She says how much she's drank since she last peed.
    //
    function displaydrank() {

        let sentence = " ";
        comma = 0;

        if (drankwaters > 0) {
            comma = 1;
            sentence += drankwaters + " water";
            if (drankwaters > 1) sentence += "s";
        }

        if (drankbeers > 0) {
            if (comma > 0) {
                if (dranksodas + drankcocktails === 0)
                    sentence += " and ";
                else
                    sentence += ", ";
            }
            comma = 1;

            sentence += drankbeers + " beer";
            if (drankbeers > 1) sentence += "s";
        }

        if (dranksodas > 0) {
            if (comma > 0) {
                if (drankcocktails === 0)
                    sentence += " and ";
                else
                    sentence += ", ";
            }
            comma = 1;
            sentence += dranksodas + " soda";
            if (dranksodas > 1) sentence += "s";
        }

        if (drankcocktails > 0) {
            if (comma > 0) sentence += " and ";
            comma = 1;
            sentence += drankcocktails + " cocktail";
            if (drankcocktails > 1) sentence += "s";
        }

        if ((drankwaters + drankbeers + drankcocktails + dranksodas) > 0) {
            s(girltalk + "I drank " + sentence + " " + drankburst[randcounter]);
            incrandom();
        }
    }

    //
    //  You try to convince her to hold it.
    //
    function convinceher() {
        if (roses > 0) {
            c("briberoses", "Try to bribe her with roses.")
        }
        if (earrings > 0) {
            c("bribeearrings", "Try to bribe her with earrings.")
        }
        if (owedfavor > 0) {
            c("bribefavor", "Call in a favor");
        }
        c("bribeask", "Ask her nicely");
        c("indepee", "Just let her go...");
    }

    function briberoses() {
        s("<b>YOU:</b> Pretty please!  I'll give you roses");
        s(girltalk + "Okay.  For roses.");
        askholditcounter++;
        displayholdquip();
        c(locstack[0], "Continue...");
        roses -= 1;
    }

    function bribeearrings() {
        s("<b>YOU:</b>  Pretty please!  I'll give you a set of diamond earrings if you can hold it!");
        s(girltalk + "For diamonds, I'd do much more than hold it.  But okay.");
        askholditcounter++;
        displayholdquip();
        c(locstack[0], "Continue...");
        earrings -= 1;
    }

    function bribeask() {
        s("<b>YOU:</b> Pretty please!");
        bribeaskthresh -= askholditcounter * 0.1;
        if (randomchoice(bribeaskthresh) && (
            (bladder >= bladlose && attraction > holditlosethresh) ||
            (bladder >= blademer && attraction > holditemerthresh) ||
            (bladder >= bladneed && attraction > holditneedthresh))) {
            s(girltalk + okayforyou[randcounter]);
            askholditcounter++;
            displayholdquip();
            c(locstack[0], "Continue...");
        } else {
            s(girltalk + "You've already asked me to hold it " + askholditcounter + " times.");
            displaygottavoc();
            c("indepee", "Continue...");
        }
    }

    function bribefavor() {
        s("<b>YOU:</b> Pretty please!  Remember you promised to do me a favor!");
        s(girltalk + "Well... Okay.  But just a little bit.  I did promise you a favor.");
        displayholdquip();
        interpbladder();
        owedfavor -= 1;
        askholditcounter++;
        c(locstack[0], "Continue...");
    }

    //
    //  Pay her to hold it in.
    //
    function payholdit() {
        s("<b>YOU:</b> I'll pay you if you can hold it for a while.");
        displayneed();
        s(girltalk + "I don't know... how much?");
        c("payfails", "$10.00");
        c("payfails", "$20.00");
        c("payokay", "$50.00");
        c(locstack[0], "Continue...");
    }

    function payfails() {
        s(girltalk + "That's not going to be enough.");
        indepee();
    }

    function payokay() {
        s(girltalk + okayforyou[randcounter]);
        askholditcounter++;
        displayholdquip();
        c(locstack[0], "Continue...");
    }


    function remindpayholdit() {
        displayholdquip();
        c(locstack[0], "Continue...");
    }

    //
    //  Ask her to hold it in.
    //
    //TODO fix it that if you are at her place after you asked her and she doesn't have to go you always fail
    function holdit() {
        s("<b>YOU:</b> " + askhold[randcounter]);
        incrandom();
        gottagoflag = 0;
        waitcounter = 6;
        if ((bladder >= bladlose && attraction > holditlosethresh) ||
            (bladder >= blademer && attraction > holditemerthresh) ||
            (bladder >= bladneed && attraction > holditneedthresh)) {
            if (bladder >= blademer) {
                s(girltalk + surpriseexcl[randcounter]);
                if (randomchoice(5))
                    displaydrank(); else displaywaited();
                s(girltalk + "I don't know...");
                if (locstack[0] !== "gostore") displayneed();
                else displaygottavoc();
                convinceher();
            } else {
                displayholdquip();
                askholditcounter++;
                if (bladder >= bladlose) {
                    if (locstack[0] === "gostore") {
                        s(girltalk + "Ummm...  Oh.   Oh.  Uh. ohmygod.  ohmygod. ohmygod.");
                        s(girlgasp + "I can't hold it - it's - it's coming out!");
                        bladder = 0;
                        askholditcounter = 0;
                        waitcounter = 0;
                        attraction = 0;
                        s(girltalk + "I'm so embarassed - I'll go clean up.");
                    } else {
                        displayneed();
                    }
                }
                c(locstack[0], "Continue...");
            }
        } else {
            if (locstack[0] === "gostore") {
                s(girlname + "Sorry.");
                s("She's hung up on you.");
                attraction -= 5;
                bladder = 0;
            } else {
                s(girltalk + "Not gonna happen, bub.");
                attraction -= 5;
                indepee();
            }
        }
    }

    function allowpee() {
        gottagoflag = 0;
        askholditcounter = 0;
        s("<b>YOU:</b> Well, if you have to pee that bad, I guess you can go.");
        s(girltalk + "Thanks!  I do really have to go.  You're so sweet.");
        if (locstack[0] === "solobar" || locstack[0] === "fuckher6" || locstack[0] === "thehome" || locstack[0] === "thebedroom" || locstack[0] === "darkbar"
            || locstack[0] === "pickup" || locstack[0] === "darkclub" || locstack[0] === "darkbar") {
            c("indepee", "Continue...");
        } else {
            s(girltalk + "Can you hold my purse for me?");
            attraction += 7;
            c("holdpurse", "Sure, I'll take care of it!");
            c("indepee", "I think you'd better take it with you.");
        }
    }

    function holdpurse() {
        haveherpurse = 1;
        s(girltalk + "Great!");
        s("She hands you her small, stylish purse and runs off to relieve herself.");
        c("lookinsidepurse", "Look inside her purse.");
        c("indepee", "Be a gentleman");
    }

    function lookinsidepurse() {
        s("You open the top and see:");
        let tempstring = "A ";
        if (!herkeys)
            tempstring += "set of keys, a ";
        if (!hercellphone)
            tempstring += "small cellphone, a ";
        tempstring += "compact makeup kit and a comb.";
        s(tempstring);
        if (!herkeys)
            c("takeherkeys", "Take her keys");
        if (!hercellphone)
            c("takeherphone", "Take her cellphone");
        c("indepee", "Close the purse");
    }

    function takeherkeys() {
        herkeys++;
        s("Thinking they might come in handy later, you pocket her keys.");
        c("lookinsidepurse", "Examine her purse again");
        c("indepee", "Continue...");
    }

    function takeherphone() {
        hercellphone++;
        s("Thinking it might come in handy later, you pocket her cellphone.");
        c("lookinsidepurse", "Examine her purse again");
        c("indepee", "Continue...");
    }


    //TODO combine the if statements from dink/beer/coktail/soda
    function drinknow() {
        if (tummy > maxtummy) {
            s(girltalk + "I just don't feel thirsty right now.");
        } else if (attraction < 10 && bladder > bladneed) {
            s(girltalk + "I just don't feel thirsty right now.");
        } else if (attraction < 20 && bladder > blademer) {
            s(girltalk + "I just don't feel thirsty right now.");
        } else if (bladder > blademer && shyness < 90 && brokeice) {
            s(girltalk + "I've <b>really</b> got to go to the bathroom, but I'll drink it if that's what you want me to do.");
            s("She drinks the bottle of water.");
            tummy += 100;
            water -= 1;
            drankwaters += 1;
        } else {
            s(girltalk + "Well, I guess it's good to stay hydrated.");
            s("She drinks the bottle of water.");
            tummy += 100;
            water -= 1;
            drankwaters += 1;
        }
        c(locstack[0], "Continue...");
    }

    function ydrinknow() {
        if (yourtummy > maxtummy)
            s("You consider drinking the bottle of water, but your stomach is so full.");
        else {
            s("You drink the bottle of water.");
            yourtummy += 100;
            water -= 1;
            ydrankwaters += 1;
        }
        c(locstack[0], "Continue...");
    }

    function drinkchosen() {
        s("What do you do with the water?");
        c("drinknow", "Give her a drink of water");
        c("ydrinknow", "Drink some water.");
        c(locstack[0], "Nevermind...");
    }

    //TODO multiple quotes for blademer
    function beernow() {
        if (tummy > maxbeer && tummy > maxtummy) {
            s(girltalk + "I just don't feel thirsty right now.");
        } else if (attraction < 10 && bladder > bladneed) {
            s(girltalk + "I just don't feel thirsty right now.");
        } else if (attraction < 20 && bladder > blademer) {
            s(girltalk + "I just don't feel thirsty right now.");
        } else if (bladder > blademer && shyness < 90 && brokeice) {
            s(girltalk + "I've <b>really</b> got to pee, but I'll drink it if that's what you want me to do.");
            s("She drinks the bottle of beer.");
            tummy += 100;
            beer -= 1;
            drankbeer = 30;
            drankbeers += 1;
            if (shyness > 50) shyness -= 5;
        } else {
            s(girltalk + "Bottoms up!");
            s("She drinks the bottle of beer.");
            tummy += 100;
            beer -= 1;
            drankbeer = 30;
            attraction += 1;
            drankbeers += 1;
            if (shyness > 50) shyness -= 5;
        }
        c(locstack[0], "Continue...");
    }

    //TODO make it sound better, also add option to drink beer together
    //TODO extra description for in the car(ask her to open it)
    function ybeernow() {
        if (yourtummy > ymaxbeer && yourtummy > ymaxtummy)
            s("You consider drinking a beer, but you have drunk way too much already.");
        else {
            s("YOU: Bottoms up!");
            s("You drink the bottle of beer.");
            yourtummy += 100;
            beer -= 1;
            ydrankbeer = 30;
            ydrankbeers += 1;
        }
        c(locstack[0], "Continue...");
    }

    function beertogether() {
        if (yourtummy > ymaxbeer && yourtummy > ymaxtummy)
            s("You consider drinking a beer with " + girlname + ", but you have drunk way too much already.");
        else if (tummy > maxbeer && tummy > maxtummy) {
            s(girltalk + "I just don't feel thirsty right now.");
        } else if (attraction < 10 && bladder > bladneed) {
            s(girltalk + "I just don't feel thirsty right now.");
        } else if (attraction < 20 && bladder > blademer) {
            s(girltalk + "I just don't feel thirsty right now.");
        } else if (bladder > blademer && shyness < 90 && brokeice) {
            s(girltalk + "I've <b>really</b> got to pee, but I'll drink with you if that's what you want me to do.");
            s("After a quick toast, you both drink your bottle of beer.");
            tummy += 100;
            drankbeer = 30;
            yourtummy += 100;
            ydrankbeer = 30;
            drankbeers += 1;
            beer -= 2;
            if (shyness > 50) shyness -= 5;
        } else {
            s(girltalk + "Bottoms up!");
            s("After a quick toast, you both drink your bottle of beer.");
            tummy += 100;
            drankbeer = 30;
            yourtummy += 100;
            ydrankbeer = 30;
            drankbeers += 1;
            beer -= 2;
            if (shyness > 50) shyness -= 5;
        }
        c(locstack[0], "Continue...");
    }

    function beerchosen() {
        s("What do you want to do with the beer?");
        c("beernow", "Offer her a beer.");
        c("ybeernow", "Drink a beer.");
        if (beer > 1)
            c("beertogether", "Offer to drink beer together.");
        c(locstack[0], "Nevermind...");
    }

    function ysodanow() {
        if (yourtummy > ymaxtummy) {
            s("You consider drinking the cup of soda, but you don't think you can manage");
        } else {
            s("You chug the cup of soda.  All 500ml.");
            s("YOU: That was refreshing!");
            yourtummy += 500;
            soda -= 1;
            ydranksodas += 1;
        }
        c(locstack[0], "Continue...");
    }

    //TODO multiple quotes for blademer
    function sodanow() {
        if (tummy > maxtummy) {
            s(girltalk + "I just don't feel thirsty right now.");
        } else if (attraction < 10 && bladder > bladneed) {
            s(girltalk + "I just don't feel thirsty right now.");
        } else if (attraction < 20 && bladder > blademer) {
            s(girltalk + "I just don't feel thirsty right now.");
        } else if (bladder > blademer && shyness < 90 && brokeice) {
            s(girltalk + "I've <b>really</b> got to go powder my nose, but I'll drink it if that's what you want me to do.");
            s("She drinks the cup of soda. All 500ml.");
            tummy += 500;
            soda -= 1;
            dranksodas += 1;
        } else {
            s("She chugs the cup of soda.  All 500ml.");
            s(girltalk + "That was refreshing!");
            tummy += 500;
            soda -= 1;
            dranksodas += 1;
        }
        c(locstack[0], "Continue...");
    }

    function sodatogether() {
        if (yourtummy > ymaxtummy)
            s("You consider drinking a cup of soda with " + girlname + ", but you don't think you can manage");
        else if (tummy > maxtummy) {
            s(girltalk + "I just don't feel thirsty right now.");
        } else if (attraction < 10 && bladder > bladneed) {
            s(girltalk + "I just don't feel thirsty right now.");
        } else if (attraction < 20 && bladder > blademer) {
            s(girltalk + "I just don't feel thirsty right now.");
        } else if (bladder > blademer && shyness < 90 && brokeice) {
            s(girltalk + "I've <b>really</b> got to go powder my nose, but I'll drink it if that's what you want me to do.");
            s("You both drink your cup of soda. All 500ml.");
            tummy += 500;
            soda -= 2;
            dranksodas += 1;
            yourtummy += 500;
            ydranksodas += 1;
        } else {
            s("You both chug your cup of soda.  All 500ml.");
            s(girltalk + "That was refreshing!");
            tummy += 500;
            soda -= 2;
            dranksodas += 1;
            yourtummy += 500;
            ydranksodas += 1;
        }
        c(locstack[0], "Continue...");
    }

    function sodachosen() {
        s("What do you do with the soda?");
        c("sodanow", "Give her a soda");
        c("ysodanow", "Drink a soda.");
        if (soda > 1)
            c("sodatogether", "Drink a soda with her");
        c(locstack[0], "Nevermind...");
    }

    function champagnenow() {
        if (champagnecounter > 5) {
            s("Sadly, the bottle of champagne is empty.");
        } else {
            s("You suggest having some champagne.");
            if (champagnecounter === 0) {
                s("She smiles and goes into the kitchen to get some glasses.");
            }
            displayneed();
            if (bladder < blademer) {
                s(fillchampok[randcounter]);
                champagnecounter++;
                s("You toast and enjoy the champagne together.");
            } else if (bladder < bladlose) {
                s(girltalk + wonderwhy[randcounter]);
                incrandom();
                displaygottavoc();
                s(fillchamp[randcounter]);
                incrandom();
                champagnecounter++;
                s("She drinks the champagne with you after a hurried toast.");
            } else {
                s(girltalk + cantdo[randcounter]);
                incrandom();
                s(girltalk + "I can't even <i>think</i> about champagne");
                displaygottavoc();
                s(fillchampbad[randcounter]);
                incrandom();
                champagnecounter = 6;
                s("She tosses back the champagne quickly, dropping the glass onto the floor.");
            }
            tummy += 50;
            yourtummy += 50;
        }
        c(locstack[0], "Continue...");
    }

    //TODO Tweak tuminc
    function cocktailnow() {
        if (attraction < 10 && bladder > bladneed) {
            s(girltalk + "I just don't feel like drinking right now.");
        } else if (attraction < 20 && bladder > blademer) {
            s(girltalk + "I just don't feel like drinking right now.");
        } else if (bladder > blademer && brokeice) {
            s(girltalk + "I've <b>really</b> got to go to the bathroom, but I'll drink it if that's what you want me to do.");
            s("She drinks the cocktail.");
            tummy += 10;
            cocktail -= 1;
            drankcocktails += 1;
            if (maxtummy < 1000) maxtummy += 100;
            if (shyness > 50) shyness -= 10;
        } else {
            s(girltalk + "Cheers!");
            s("She drinks the cocktail.");
            tummy += 10;
            cocktail -= 1;
            if (maxtummy < 1000) maxtummy += 100;
            drankcocktails += 1;
            if (shyness > 50) shyness -= 10;
        }
        c(locstack[0], "Continue...");
    }

    function ycocktailnow() {
        s("You smile at her as you hold up your cocktail.");
        s("You drink the cocktail.");
        yourtummy += 10;
        cocktail -= 1;
        if (ymaxtummy < 1000) ymaxtummy += 100;
        ydrankcocktails += 1;
        c(locstack[0], "Continue...");
    }

    function cocktailtogether() {
        if (attraction < 10 && bladder > bladneed) {
            s(girltalk + "I just don't feel like drinking right now.");
        } else if (attraction < 20 && bladder > blademer) {
            s(girltalk + "I just don't feel like drinking right now.");
        } else if (bladder > blademer && brokeice) {
            s(girltalk + "I've <b>really</b> got to go to the bathroom, but I'll drink it if that's what you want me to do.");
            s("After a toast you both drink your the cocktail.");
            tummy += 10;
            cocktail -= 2;
            drankcocktails += 1;
            yourtummy += 10;
            if (maxtummy < 1000) maxtummy += 100;
            if (ymaxtummy < 1000) ymaxtummy += 100;
            ydrankcocktails += 1;
            if (shyness > 50) shyness -= 10;
        } else {
            s(girltalk + "Cheers!");
            s("After a toast you both drink your the cocktail.");
            tummy += 10;
            cocktail -= 2;
            yourtummy += 10;
            if (maxtummy < 1000) maxtummy += 100;
            drankcocktails += 1;
            if (ymaxtummy < 1000) ymaxtummy += 100;
            ydrankcocktails += 1;
            if (shyness > 50) shyness -= 10;
        }
        c(locstack[0], "Continue...");
    }

    function cocktailchosen() {
        s("What do you do with the cocktail?");
        c("cocktailnow", "Give her a cocktail.");
        c("ycocktailnow", "Drink a cocktail.");
        if (cocktail > 1)
            c("cocktailtogether", "Drink a cocktail with her");
        c(locstack[0], "Nevermind...");
    }


    //TODO maybe option to smash it outside/ throw it out of the window in the car?
    //TODO figureout duplicate continue
    function peeshot() {
        if (attraction > 30) {
            if ((bladder > blademer && shyness < 60) ||
                (bladder >= bladlose - 25)) {
                gottagoflag = 0;
                if (peedshot < 1) {
                    s(girltalk + "You're a naughty boy, aren't you?");
                    s(girltalk + "But I'm going to wet my panties if I don't go.....");
                }
                peedshot = 1;
                displayneed();
                s(girltalk + "God! I can't wait any longer!");
                c("peeshot2", "Continue...");


            } else {
                //TODO this part of code is unreachable? you only get her if your bladder >= bladlose-25
                gottagoflag = 0;
                s(girltalk + "I think maybe not.  At least not yet.");
                c(locstack[0], "Continue...");
            }
        } else if (locstack[0] !== "themakeout" && locstack[0] !== "driveout") {
            //TODO how come is she suddenly able to use the locked/occupied bathroom because she is refusing to use the shotglass?
            s(girltalk + "Somehow, I don't think that's happening.");
            s("She runs to the bathroom with your shot glass in hand.");
            s("You are left to ponder your situation.");
            flushdrank();
            attraction -= 3;
            shotglass -= 1;
            c(locstack[0], "Continue...");

        } else {
            s(girltalk + "Somehow I don't see that happening.");
            c(locstack[0], "Continue...");
        }
    }

    function peeshot2() {
        if (pantycolor !== "none") s(peeshotquote);
        else s(peeshotquotebare);
        itscomingout();
        c("peeshot3", "Continue...");
    }

    function peeshot3() {
        s("The pee hisses out and the glass is filled in no time.  " + girlname + " bends over and jams her hand between her legs, gasping in the effort to stop the flow.");
        s(girltalk + "Damn.  That's not much better.");
        attraction += 3;
        bladder -= 100;
        waitcounter = 4;
        sawherpee = 1;
        c(locstack[0], "Continue...");
    }

    //TODO more variety? and implement for different locations
    function ypeeshot() {
        s("YOU: I got a shot glass. Here hold this for a minute.");
        if (locstack[0] === "driveout")
            s("You give her the shot glass so you can open your fly with the hand that is not holding the steering wheel.");
        else
            s("You give her the shot glass so that you can use both hands to open your fly.");
        s("You quickly whip your dick out, not really caring that she can see it.");
        c("ypeeshot2", "Continue...");
    }

    function ypeeshot2() {
        s("You urgently reach your hand to her.");
        s("YOU: Give me the glass, it's coming out!");
        s(girlname + "quickly hands you the glass.");
        s("You push it in place before allowing your muscles to relax.");
        c("ypeeshot3", "Continue...");
    }

    function ypeeshot3() {
        if (locstack[0] === "driveout")
            s("The pee hisses out and the glass is filled in no time. You groan at the effort it takes to stop the flow, you can't grasp yourself as both your hand are occupied.");
        else
            s("The pee hisses out and the glass is filled in no time. You grab your dick as you force to flow to stop. It is hard but you manage with a groan.");
        s("YOU: Damn. That's not much better.");
        attraction += 10;
        yourbladder -= 100;
        c(locstack[0], "Continue...");
    }

    //TODO search privacy in club/bar?
    //TODO don't take it to the bathroom with her in the car
    function peevase() {
        if (attraction > 30) {
            if (bladder > blademer) {
                gottagoflag = 0;
                if (peedvase < 0) {
                    s(girltalk + "That's pretty kinky!");
                    s(girltalk + "But I'm about to wet my panties!");
                }
                displayneed();
                peedvase = 1;
                s(girltalk + "I just can't hold it anymore.  Give it here.");
                s("She grabs the vase, wrenching it from your hands and nearly dropping it.");
                c("peevase2", "Continue...");
            } else {
                displaygottavoc();
                gottagoflag = 0;
                s(girltalk + "But a vase?  I can't! At least not yet.");
                displayholdquip();
                c(locstack[0], "Continue...");
            }
        } else {
            s(girltalk + "Somehow, I don't think that's happening.");
            s("She runs to the bathroom with your vase in hand.");
            s("You are left to ponder your situation.");
            flushdrank();
            attraction -= 3;
            vase -= 1;
            c(locstack[0], "Continue...");
        }
    }

    function peevase2() {
        if (pantycolor !== "none") s(peeskirtquote);
        else s(peeskirtquotebare);
        itscomingout();
        c("peevase3", "Continue...");
    }

    function peevase3() {
        s("The pee hisses out for nearly a minute vase is filled almost to the top.");
        s(girlname + " puts herself back together, looking embarrassed.");
        s(girltalk + embarquote[randcounter]);
        incrandom();
        attraction += 3;
        flushdrank();
        sawherpee = 1;
        c(locstack[0], "Continue...");
    }

    //TODO locations that are not the car
    function ypeevase() {
        s("YOU: I got a vase. Here hold this for a minute.");
        s("You give her the vase so you can open your fly with the hand that is not holding the steering wheel.");
        s("You quickly whip your dick out, not really caring that she can see it.");
        c("ypeevase2", "Continue...");
    }

    function ypeevase2() {
        s("You urgently reach your hand to her.");
        s("YOU: Give me the vase, it's coming out!");
        s(girlname + " quickly hands you the vase.");
        s("You push it in place before allowing your muscles to relax.");
        c("ypeevase3", "Continue...");
    }

    function ypeevase3() {
        s("The pee hisses out for nearly a minute and the vase is almost filled to the to the top");
        s("YOU: Oh! That's much better.");
        attraction += 10;
        flushyourdrank();
        c(locstack[0], "Continue...");
    }

    //TODO she can't run away with the towels while in the car
    //TODO check for having peed towels/vase or shot
    function peetowels() {
        if (attraction > 30) {
            if (bladder > blademer) {
                gottagoflag = 0;
                if (peedvase < 0) {
                    s(girltalk + "That's kind of gross!");
                    s(girltalk + "But I'm about to wet my panties!");
                }
                displayneed();
                peedtowels = 1;
                wetherpanties = 1;
                s(girltalk + "I just can't hold it anymore.  Give it here.");
                s("She takes the roll of paper towels in both hands and freezes for a moment, thinking.");
                c("peetowels2", "Continue...");
            } else {
                //TODO unrreachable because you onl get here when your bladder is beyond emer
                displaygottavoc();
                gottagoflag = 0;
                s(girltalk + "But in just a roll of towels?  No way! At least not yet.");
                displayholdquip();
                c(locstack[0], "Continue...");
            }
        } else {
            s(girltalk + "Somehow, I don't think that's happening.");
            s("She runs off with your roll of paper towels in hand.");
            s("You are left to ponder your situation.");
            flushdrank();
            attraction -= 3;
            if (attraction < 0) attraction = 0;
            ptowels -= 1;
            c(locstack[0], "Continue...");
        }

    }

    function peetowels2() {
        if (pantycolor !== "none") s(girlname + peetowelquote);
        else s(girlname + peetowelquotebare);
        itscomingout();
        c("peetowels3", "Continue...");
    }

    function peetowels3() {
        s("The pee hisses out and is mostly absorbed by the paper towels, just a small trickle running down her left leg.");
        s("She carefully sets to sopping wet roll of towels in a corner.");
        s(girltalk + embarquote[randcounter]);
        incrandom();
        attraction += 3;
        flushdrank();
        ptowels -= 1;
        sawherpee = 1;
        c(locstack[0], "Continue...");
    }

    function peeintub() {
        if (bladder > blademer) {
            displaygottavoc();
            s(girltalk + "Sure you're okay with it?");
            displayneed();
            c("peeintub2", "Continue...");
        } else {
            s(girltalk + "I'll just wait, thank you very much.");
            c(locstack[0], "Continue...");
        }
    }

    function peeintub2() {
        s(girlgasp + "Ungh!  I can't hold it.");
        s("You nonchalantly move closer and slip your hand under her butt.  The strong stream of pee flows out between your fingers for nearly a minute, and you can detect the barest scent of urine rising from the hot water.  It feels strangely cool in the warm water of the tub.");
        flushdrank();
        s("The stream slows and finishes, and " + girlname + " lets out a sigh of relief.");
        s(girltalk + "That feels <i>so</i> much better.");
        c(locstack[0], "Continue...");
    }

    //TODO better scene
    function ypeeintub() {
        s("You relax your muscles while acting as if nothing happens.");
        s("She doesn't notice that you're peeing right next to her.");
        s("You can't help but get a bit aroused.");
        flushyourdrank();
        c(locstack[0], "Continue");
    }

    //TODO do something if you peed outside already(mention to follow your lead)
    //TODO she pees outside if she's not bursting
    //TODO fix the duplicate code
    function peeoutside() {
        if (attraction > 30) {
            if (bladder > blademer) {
                if (peedoutside)
                    s(girltalk + "I'm so embarrassed to have to pee outside again.");
                else
                    s(girltalk + "That's pretty daring.  I've never gone outside before.");
                s(girltalk + "But I'm about to wet my panties if I don't go somewhere!");
                s(girltalk + "I can't hold it!  What am I gonna do???");
                displayneed();
                if (locstack[0] === "themakeout") c("peeoutside2", "Continue...");
                else c("peeoutside2b", "Continue...");

            } else {
                displaygottavoc();
                s(girltalk + "But I can't just go outside!");
                s(girltalk + "At least not yet.");
                displayholdquip();
                gottagoflag = 0;
                c(locstack[0], "Continue...");
            }
        } else {
            //TODO this code is almost impossible to reach? since you need at least 40 attraction to get outside
            s(girltalk + "Pee outside?  No way am I exposing my privates to the whole world!");
            attraction -= 3;
            if (attraction < 0) attraction = 0;
            c(locstack[0], "Continue...");
        }

    }

    // In the car
    function peeoutside2() {
        if (pantycolor !== "none") s(peeoutsidequote);
        else s(peeoutsidequotebare);
        s(girltalk + "Are you sure it's safe?");
        c("peeoutside3", "Continue...");
    }

    // Not in the car
    function peeoutside2b() {
        if (pantycolor !== "none") s(peeoutsidebquote);
        else s(peeoutsidebquotebare);
        s(girltalk + "Are you sure it's safe?");
        if (locstack[0] === "thebeach") c("peeoutside3c", "Continue...");
        else c("peeoutside3b", "Continue...");
    }

    // She was in the car
    function peeoutside3() {
        itscomingout();
        s("You try to be nonchalant as you stare, and she doesn't seem to notice.  The pee hisses out from between her smooth thighs for nearly a minute, and runs in a stream under the car.  You can smell her scent as steam rises from the hot river.");
        //TODO attraction goes down?
        attraction -= 3;
        flushdrank();
        peedoutside = 1;
        sawherpee = 1;
        c(locstack[0], "Continue...");
    }

    //  Again, she's not in the car
    function peeoutside3b() {
        s(girltalk + "Oh!  Don't look!  It's coming!");
        s("You nonchalantly move closer and watch as the pee hisses out from between her delicate pussy lips for nearly a minute, and runs in a stream along the ground.  You can smell her scent as steam rises from the hot river and she sighs in relief.");
        s(girltalk + "That's so much better.");
        s("She seems aroused as she gets back up.");
        //TODO attraction goes down?
        attraction -= 3;
        flushdrank();
        peedoutside = 1;
        sawherpee = 1;
        c(locstack[0], "Continue...");
    }

    //  Pee on the beach
    function peeoutside3c() {
        itscomingout();
        s("You nonchalantly move closer and watch as the pee hisses out from between her delicate pussy lips for nearly a minute, soaking quickly into the sand and turning it dark.  You can smell her scent and hear the hiss of the urine hitting the sand and she sighs orgasimcally.");
        s(girltalk + "That's <b>so</b> much better.  I was dying!");
        s("She seems aroused as she gets back up.");
        //TODO attraction goes down?
        attraction -= 3;
        flushdrank();
        peedoutside = 1;
        sawherpee = 1;
        c(locstack[0], "Continue...");
    }

    //TODO a Can I watch option
    function ypeeoutside() {
        if (yourbladder < yourblademer)
            s("<b>YOU:</b> Hang on I need a pee.");
        else {
            s("<b>YOU;</b> Hold up I really need to pee!");
            s("You are messaging your crotch to help you hold it.");
        }
        if (locstack[0] === "themakeout") c("ypeeoutside2", "Continue...");
        else c("ypeeoutside2b", "Continue...");
    }

    //In the car
    function ypeeoutside2() {
        s("You step out of the car and lower your zipper. You check if no one is around before you pull your penis out.");
        c("ypeeoutside3", "Continue...");
    }

    function ypeeoutside2b() {
        s("You lower your zipper and check if no one is around before you pull your penis out");
        if (locstack[0] === "thebeach") c("ypeeoutside3c", "Continue...");
        else c("ypeeoutside3b", "Continue...");
    }

    //TODO determine if she would watch and arousal
    function ypeeoutside3() {
        s("You subtly turn towards the car so she could watch if she wanted to. The pee hisses out of your tip and runs in a stream under the car.");
        flushyourdrank();
        c(locstack[0], "Continue...");
    }

    function ypeeoutside3b() {
        s("You only turn away from her slightly, allowing her to watch if she wants to. The pee hisses out from of your tip and runs in a stream along the ground.");
        s("As you zip back up you can't help but feel aroused.");
        flushyourdrank();
        c(locstack[0], "Continue...");
    }

    function ypeeoutside3c() {
        s("You only turn away from her slightly, allowing her to watch if she wants to. The pee hisses out from of your tip, it soaks quickly into the sand turning it dark.");
        s("As you zip back up you can't help but feel aroused.");
        flushyourdrank();
        c(locstack[0], "Continue...");
    }





    function voccurse() {
        s(girltalk + " " + curseword[randcounter]);
        incrandom();
    }

    // Showneed
    // Showneed calculates how she's going to indicate
    // her current level of need ( if at all ) based on her situation
    function showneed() {
        // Clear the gottagoflag.  It will be set by displaygottavoc().
        gottagoflag = 0;

        //  How this should work:
        //  Outer IFs determine LOCATION/SCENARIO.
        //  Inner IFs determine pee request parameters
        //  Upper IFs are emergencies

        // If she's within 2 turns of wetting and not too shy, she will vocalize
        // no matter what.

        if (bladder >= (bladlose - 25) && shyness < 90) {
            if (externalflirt) voccurse();
            displaygottavoc();
        } else if (changevenueflag) {
            // She's almost always going to ask to go if you're off somewhere
            if ((bladder >= blademer) ||
                (bladder >= bladneed && shyness < 70)) {
                if (waitcounter === 0) {  // did you just ask her to wait?
                    s(girltalk + "Hey! Before we go...");
                    waitcounter = 4;
                    displaygottavoc();
                } else {
                    s(girlname + " looks like she really has to pee, but she doesn't say anything.");
                    if (askholditcounter)
                        s("After all, you did ask her to hold it.");
                }
            }
        } else if (waitcounter === 0 && !externalflirt) {
            // Then there are generic instances where she might ask
            // She'll try to hold it if you flirted with somebody at that location
            // Shyness < 80 is enough to ask if she's having a bladder emergency
            if (shyness < 80 && bladder > blademer) {
                waitcounter = 6;
                displaygottavoc();
                // Shyness < 60 is enough to ask if she's merely needing to pee bad
            } else if (shyness < 60 && bladder > bladneed) {
                waitcounter = 10;
                displaygottavoc();
                // Shyness < 40 and she's letting you know at 1st urge.
            } else if (shyness < 40 && bladder > bladurge) {
                waitcounter = 12;
                displaygottavoc();
                // Otherwise, she may or may not show symptoms of having to go
            } else if ((Math.random() * bladlose) < bladder) {
                displayneed();
            }
            // Otherwise, she may or may not show symptoms of having to go
        } else if ((Math.random() * bladlose) < bladder) {
            displayneed();
        }
        changevenueflag = 0;
    }


    //  increment the random number counter.
    function incrandom() {
        const now = new Date();
        const seed = now.getSeconds();
        //TODO figure out random + seed
        randcounter += Math.floor(Math.random(seed) * 2) + 1;
        if (randcounter > randmax) randcounter -= (randmax + 1);
    }

    //  DisplayHoldQuip function prints a quasi-random quip from "+girlname+"
    //  saying she's going to try to hold it for you.
    function displayholdquip() {
        if (bladder >= bladlose) {
            s(girltalk + quiplose[randcounter]);
        } else if (bladder >= blademer) {
            s(girltalk + quipemer[randcounter]);
        } else if (bladder >= bladneed) {
            s(girltalk + quipneed[randcounter]);
        } else if (bladder >= bladurge) {
            s(girltalk + quipurge[randcounter]);
        } else {
            s(girltalk + "I'm a big girl now - I can handle it.");
        }
        incrandom();
    }





    // If she begs you, you end up not leaving the venue.
    function begtoilet() {
        s(girlname + " looks intently into your eyes:");
        if (peedvase)
            s("I've absolutely got to go.  I <i>need</i> your vase again. <b>NOW!</b>");
        else if (peedshot)
            s("I'm gonna pee myself!  I <i>need</i> that shot glass again. <b>NOW!</b>");
        else if (peedtowels)
            s("I just <b>can't</b> hold it - you don't have any more paper towels, do you?");
        else
            s("I'm <i>begging</i> you - find me somewhere to pee.  <b>NOW!</b>");
        if (shotglass > 0) c("peeshot", "Offer her the shot glass.");
        if (ptowels > 0) c("peetowels", "Offer her the roll of paper towels.");
        if (vase > 0) c("peevase", "Offer her the vase.");
        if (locstack[0] === "themakeout")
            c("peeoutside", "Suggest she pee outside.");
        c(locstack[0], "Stand by helplessly.");
    }


    //TODO add extra options like pee outside
    //TODO make responses more realisitc
    //TODO don't take her purse in certian situations
    function askpee() {
        s("<b>YOU:</b> Do you need to pee?");

        if (shyness > 60) s(girlname + " blushes.");
        else s(girltalk + "...");

        if (bladder > bladneed && bladder < blademer)
            s("She seems to be considering the matter...");

        if (((shyness < 50 && bladder > bladneed) ||
            bladder > blademer) &&
            (locstack[0] !== "drinkinggame" && !externalflirt)) {
            displaygottavoc();
            interpbladder();
            showneed();
            c("pstory", "Ask her if she's ever wet herself.");
            preventpee();
        } else {
            s(girltalk + denyquotes[randcounter]);
            displayneed();
            interpbladder();
            c(locstack[0], "Continue...");
        }
    }

    function askcanhold() {
        s("<b>YOU:</b> How are you doing?  Can you still hold it?");
        if (bladder >= bladlose) s(girltalk + holdlosequotes[randcounter]);
        else if (bladder >= blademer) s(girltalk + holdemerquotes[randcounter]);
        else if (bladder >= bladneed) s(girltalk + holdneedquotes[randcounter]);
        else if (bladder >= bladurge) s(girltalk + holdurgequotes[randcounter]);
        else s(girltalk + holdokayquotes[randcounter]);
        incrandom();
        interpbladder();
        c(locstack[0], "Continue...");
    }

    function pstory() {
        s("<b>You ask her:</b> have you ever waited too long?");
        displayneed();
        s(girltalk + peestory[pstorycounter]);
        oldpstorycounter = pstorycounter;
        pstorycounter++;
        if (pstorycounter > maxpstory) pstorycounter = 0;
        c("pstory2", "Ask her what happened.");
        c(locstack[0], "Continue...");
    }

    function pstory2() {
        s("<b>You ask her:</b> so... did you make it?");
        s(girlname + " blushes and looks down at her feet.");
        s(girltalk + peestory2[oldpstorycounter]);
        displayneed();
        c(locstack[0], "Continue...");
    }

    //TODO make her less demanding
    function preventpee() {

        // If she's not in obviously dire straits, your
        // admonitions, whatever they are, will effectly
        // have answered her request to pee.  So the flag
        // will be cleared.

        if (bladder < bladlose - 50)
            gottagoflag = 0;

        if (locstack[0] === "solobar") {
            c("nopeesolodrink", "Suggest that she have another drink instead.");
            if (askholditcounter)
                c("remindpayholdit", "Remind " + girlname + " you're paying her to hold it.");
            else
                c("payholdit", "Tell " + girlname + " you'll pay her to hold it.");
        } else {
            c("holdit", "Ask her to hold it in.");
        }

        if (locstack[0] === "dodance") c("ptogether", "Ask her not to leave you alone.");
        if (locstack[0] === "darkbar" || locstack[0] === "darkmovie" || locstack[0] === "darkclub")
            c("pgirlsroom", "Tell her it would be sexy if you could watch.");
        if (locstack[0] === "darkmovie")
            c("pnorestroom", "Tell her she can go, but not in the restrooms.");
        if (locstack[0] === "darkbar")
            c("pdrinkinggame", "Tell her she can go, but afterwards you should play a drinking game.");
        if (locstack[0] === "darkclub")
            c("pphotogame", "Tell her she can go, but you want to take a couple pictures first.");
        if (locstack[0] === "driveout") {
            c("nextstop", "Tell her you'll stop the next place you see.");
        } else if (locstack[0] !== "solobar") {
            c("allowpee", "Tell her she's better go, then.");
        }
        if (locstack[0] !== "solobar")
            c("indepee", "Ignore her request to use the toilet.");
    }


    //TODO chance with triggering each other into wetting when desperate
    //  Here's actually where we decide if she wet or just spurted
    function wetherself() {
        s(wetquote[randcounter]);
        incrandom();
        if (randomchoice(spurtthresh) && locstack[0] !== "thehottub" && !shespurted) {
            spurtedherself();
        } else {
            spurtthresh = 5;
            if (locstack[0] === "driveout")
                c("wetherself2c", "Continue ...");
            else if (locstack[0] === "themakeout")
                c("wetherself2m", "Continue ...");
            else if (locstack[0] === "thehottub")
                c("wetherself2t", "Continue ...");
            else
                c("wetherself2", "Continue ...");
        }
    }

    function wetherself2() {

        s("You hear the loud hissing as her bladder uncontrollably empties itself.");
        flushdrank();
        wetlegs = 1;
        wetherpanties = 1;
        s(girltalk + embarquote[randcounter]);
        incrandom();
        if (locstack[0] === "solobar")
            c("wetherself3bg", "Continue ...");
        else
            c("wetherself3", "Continue ...");

    }

    // She's in the makeout spot
    function wetherself2m() {
        s(girlname + " suddenly and frantically looks around.  She fumbles with her seat belt, then the wrenches open the door and jumps out of the car.");
        wetherself2();
    }

    // She's in the hottub
    function wetherself2t() {
        s(girlname + " suddenly stiffens and whispers: Oh no!");
        flushdrank();
        s("She sighs and slumps back in the tub, lost in her own little world for a minute or so.");
        s("There's complete silence aside from her heavy breathing and some crickets in the distance.");
        c("wetherself3t", "Continue ...");
    }

    // She's in the car
    function wetherself2c() {
        s(girlname + " suddenly and frantically looks around, pulling open the glove box and feeling under her chair.");
        s(girltalk + " Oh No!  Your seat!");
        s("She arches her back, lifting her ass off the chair and straining against her seatbelt.");
        s("You hear the loud hissing as her bladder uncontrollably empties itself.");
        flushdrank();
        wetlegs = 1;
        wetherpanties = 1;
        wetthecar = 1;
        c("wetherself3c", "Continue ...");
    }

    function wetherself3c() {
        s(girltalk + "I'm <u>so</u> sorry about your car...");
        s("She settles unhappily into the squishy wet seat.");
        shyness += 20;
        if (shyness > 100) shyness = 100;
        attraction -= 20;
        c(locstack[0], "Continue ...");
    }

    function wetherself3() {
        if (pantycolor !== "none" && shyness < 70) {
            s(wetherselfquote);
            if (attraction > 40) {
                s(girlname + " hands you the wet panties, soaked with her fragrant urine.");
                s(girltalk + "Is there someplace you can put these?");
                wetpanties += 1;
            }
            pantycolor = "none";
            setupquotes(); // she now is wearing NO PANTIES
        } else if (pantycolor === "none")
            s(girltalk + "Good thing I wasn't wearing panties, I guess.");
        s(dryquote[randcounter]);
        incrandom();
        if (ptowels > 0)
            c("giveptowels", "Offer her paper towels");
        if (panties > 0)
            c("givedrypanties", "Offer her a clean pair of panties");
        shyness += 15;
        if (shyness > 100) shyness = 100;
        //TODO maybe not during hold contest
        c("scoldher", "Scold her for wetting herself");
        c(locstack[0], "Continue ...");
    }

    // In the tub
    function wetherself3t() {
        s(girltalk + "I'm <u>so</u> sorry ... I just couldn't hold it.");
        s("The faint scent of her urine rises from the water.");
        s(girltalk + "I peed in the tub.");
        shyness += 20;
        if (shyness > 100) shyness = 100;
        attraction -= 20;
        c(locstack[0], "Continue ...");
    }

    //TODO this should probably be changed
    // Bar Girl wets herself
    function wetherself3bg() {
        s(girltalk + "I'm <u>so</u> sorry ... I just couldn't hold it.");
        c(locstack[0], "Continue ...");
    }


    function spurtedherself() {
        bladder -= 50;
        spurtthresh -= 0.1 * spurtthresh;
        shespurted = 1;
        s(spurtquote[randcounter]);
        incrandom();
        displayneed();
        c("askspurted", "Ask her if she peed herself.");
        c(locstack[0], "Continue ...");
    }

    function askspurted() {
        s("<b>YOU:</b> Did you just pee yourself?");
        s(spurtquote[randcounter]);
        incrandom();
        s(girltalk + spurtdenyquote[randcounter]);
        incrandom();
        displayneed();
        if (locstack[0] !== "thehottub")
            c("checkspurted", "Check if she's wet.");
        c(locstack[0], "Continue ...");
    }

    function checkspurted() {
        s("<b>YOU:</b> I'm not sure I believe you.");

        if (attraction < 75) {
            s("You run your hand up her leg, but she pushes you away:");
            s(girltalk + "Hey! Keep your hands to yourself!");
            displayneed();
            attraction -= 10;
            shyness += 10;
        } else {
            if (pantycolor === "none") {
                s("You run your hand up her thigh until you feel the lips of her bare pussy.");
                s("There are drops of some liquid up there.");
            } else {
                s("You run your hand up her thigh until you feel the thin fabric of her panties.");
                s("They aren't sopping wet, but the gusset has a definite wet spot.");
            }
            if (bladder > blademer)
                s(feelthigh[randcounter]);
            incrandom();
            c("smellspurted", "Smell your fingers.");
        }
        c(locstack[0], "Continue ...");
    }

    function smellspurted() {
        s("You sniff your damp fingers.");
        s(smellpee[randcounter]);
        incrandom();
        c(locstack[0], "Continue ...");
    }

    function givedrypanties() {
        s(girltalk + "Where did you get those?");
        s("She slips into the clean panties with a smile.");
        panties -= 1;
        pantycolor = "sexy";
        setupquotes();
        if (wetlegs < 1) attraction += 5;
        if (wetlegs > 0) {
            s("Her still dripping pussy dampens the crotch of the new panties.");
        }
        wetlegs = 0;
        c(locstack[0], "Continue ... ");
    }

    function giveptowels() {
        s(girltalk + "Thanks!");
        s("She wipes the pee from her legs and pussy.");
        attraction += 5;
        ptowels -= 1;
        wetlegs = 0;
        if (panties > 0)
            c("givedrypanties", "Offer her a clean pair of panties");
        c(locstack[0], "Continue ... ");
    }

    function scoldher() {
        s("<b>YOU:</b> You're such a baby, wetting yourself like that!");
        s("She pouts and turns away from you.");
        s("Her face turns bright red and she begins to cry.");
        attraction -= 20;
        c("comforther", "Apologize and comfort her");
        c("callherataxi", "Call her a cab");
    }

    function comforther() {
        s("You walk to her and hold her as she cries.");
        s("<b>YOU:</b> I'm so sorry.  You're really a beautiful, sexy girl.");
        s("She stops crying and seems a little happier.");
        c(locstack[0], "Continue ... ");
    }

    function callherataxi() {
        s("You phone for a taxi, which quickly arrives.");
        s("She gets in and they drive away, leaving you alone....");
        withgirl = 0; // 0 = you have escaped your date
        flushdrank(); // Zero out anybody you meet's bladder.
        while (locstack[0] !== "driveout") poploc();
        s("So you make your way back to the car.");
        c(locstack[0], "Continue ... ");
    }

    function giveroses() {
        if (bladder < blademer) {
            s(girltalk + "Thanks! They're beautiful.");
            attraction += 7;
        } else {
            s(girltalk + "Thanks for the flowers, but I've really got to go.");
            s("She takes the roses and holds them against her belly.");
            attraction += 2;
            waitcounter += 2;
        }
        roses -= 1;
        c(locstack[0], "Continue...");
    }

    //
    //  It's coming out and she can't stop it
    //  used to help describe various pees.
    //
    function itscomingout() {
        if (!sawherpee)
            s(girltalk + outpeelook[randcounter]);
        else
            s(girltalk + outpeehide[randcounter]);
        s(girlgasp + outpeectrl[randcounter]);
        s(girltalk + outpeecome[randcounter]);
    }

    //Here's where we decide if you wet yourself or if you just spurted.
    //TODO more original quotes (most are now stolen from her)
    //TODO fix timings
    function wetyourself() {
        s(ywetquote[randcounter]);
        incrandom();
        if (randomchoice(yspurtthresh) && locstack[0] !== "thehottub") {
            spurtedyourself();
        } else {
            yspurtthresh = 3;
            if (locstack[0] === "driveout")
                c("wetyourself2c", "Continue ...");
            else if (locstack[0] === "themakeout")
                c("wetyourself2m", "Continue ...");
            else if (locstack[0] === "thehottub")
                c("wetyourself2t", "Continue ...");
            else
                c("wetyourself2", "Continue ...");
        }
    }

    //TODO register you wet your pants
    function wetyourself2() {
        s("You are helpless as your bladder uncontrollably empties itself.");
        s("Surely she can hear the hissing.");
        flushyourdrank();
        if (locstack[0] === "solobar")
            c("wetyourself3bg", "Continue ...");
        else {
            c(locstack[0], "Continue ...");
        }
    }

    //You're in the make out spot
    function wetyourself2m() {
        s("You frantically look around, wanting to safe your car seat. You fumble with the seat belt, then wrench the door open and jump out of the car.");
        wetyourself2();
    }

    //You're in the hottub
    function wetyourself2t() {
        s("You stiffen and let out a shaky breath.");
        flushyourdrank();
        s("You sigh and slump back in the tub, letting the relieve course through you.");
        s("When you are finally empty you open your eyes to meet hers");
        c("wetyourself3t", "Continue ...");
    }

    //You're in the car
    //TODO register you wet the car
    function wetyourself2c() {
        s("There is nothing you can do, your hands tighten on the steering wheel.");
        s("YOU: Dammit!");
        s("You are helpless as your bladder uncontrollably empties itself.");
        s("Surely she can hear the hissing.");
        flushyourdrank();
        c("wetyourself3c", "Continue ...");
    }

    function wetyourself3c() {
        s("YOU: I'm sorry about that. I really couldn't wait.");
        s("You uncomfortably shift in the squishy wet seat.");
        c(locstack[0], "Continue ...");
    }

    //TODO fill later and connect with the right function (wetyourself2)
    function wetyourself3() {

    }

    //In the tub
    function wetyourself3t() {
        s("YOU: I'm <u>so</u> sorry... I just couldn't hold it.");
        s("The faint scent of your urine rises from the water.");
        s("YOU: I peed in the tub.");
        c(locstack[0], "Continue ...");
    }

    //TODO determine if this is neccesarry for you
    function wetyourself3bg() {
        s("YOU: I'm <u>so</u> sorry... I just couldn't hold it.");
        c(locstack[0], "Continue ...");
    }

    //TODO more text options and her reponse
    function spurtedyourself() {
        yourbladder -= 50;
        yspurtthresh -= 0.1 * yspurtthresh;
        s("You manage to get your control back but you still let out a little bit.");
        c(locstack[0], "Continue ...");
    }


    /*

  -----------------------------------------------------------------

  STORY PARTS

  Separate parts of the story, in more or less order.

  -----------------------------------------------------------------

*/

    // For debugging
    function magic() {
        money = 150;
        attraction = 110;
        tummy = 700;
        bladder = bladneed;
        shyness = 20;
        seenmovie = 1; // Flag for having seen a movie already
        beenbar = 1;  //  Been to the bar already
        beenclub = 1; // Been to the club already
        beenmakeout = 1; // Seen a movie already

        roses = 1; // flowers object counter
        water = 1; // water bottle object counter
        vase = 1; // vase object counter
        ptowels = 1; // paper towel object counter
        panties = 1; // panties object counter
        champagne = 1; // champagne object counter
        shotglass = 1; // shot glass object
        earrings = 1; // earrings object counter
        wetpanties = 1; // wet panties object
        hercellphone = 1; // her cellphone object
        herkeys = 1; // her keys object
        beer = 10; // beer bottle object ( increased bladder cap on beer only )
        cocktail = 10; // cocktail object ( each increases maxtummy by 100 )
        soda = 10; // soda object ( This is a 500ml soda. )
        barkey = 1; // key to the bar
        clubkey = 1; // key to the club
        theaterkey = 1; // key to the theater
        owedfavor = 1; // she owes you a favor

        document.getElementById('stats-bar').innerHTML +=
            "<tr><td>&nbsp;" +
            "<td class='stats-cells-yellow'><small>BladUrge</small>" +
            "<td class='stats-cells-yellow'><small>BladNeed</small>" +
            "<td class='stats-cells-yellow'><small>BladEmer</small>" +
            "<td class='stats-cells-yellow'><small>BladLose</small>" +
            "<td class='stats-cells-yellow'><small>MaxTummy</small>" +
            "<td class='stats-cells-yellow'><small>RandCounter</small>" +
            "<tr><td>&nbsp;" +
            "<td id='bladu' class='stats-cells-white'>" + bladurge + "</td>" +
            "<td id='bladn' class='stats-cells-yellow'>" + bladneed + "</td>" +
            "<td id='blade' class='stats-cells-white'>" + blademer + "</td>" +
            "<td id='bladl' class='stats-cells-white'>" + bladlose + "</td>" +
            "<td id='maxt' class='stats-cells-yellow'>" + maxtummy + "</td>" +
            "<td id='randc' class='stats-cells-white'>" + randcounter + "</td>" +
            "</tr></table>";

    }

    function timewarp() {
        thetime = 60 * 7;
        hour = 2;
        meridian = "AM";
        s("The time mystertiously advances to 2AM.");
        c(locstack[0], "Continue...");
    }

    function ditchgirl() {
        withgirl = 0;
        s("Your companion mysteriously vanishes.");
        c(locstack[0], "Continue...");
    }


    //TODO no pay and move on if you have no money
    function buydrink() {
        if (money >= 9) {
            s(bargirldesc[randcounter]);
            incrandom();
            s("You buy a cocktail for $9.00.");
            cocktail += 1;
            money -= 9;
            s("<b>BARTENDER:</b> " + bargirlquotes[randcounter]);
            incrandom();
        } else s("You don't have enough money!");
        c("flirtbargirl", "Flirt with the bar girl.");
        c("buydrink", "Buy another one.");
        if (money >= 9) c(locstack[0], "Pay and move on...");
        else c(locstack[0], "Continue...");
    }

    function flirtbargirl() {
        s("<b>YOU:</b>" + bargirlflirt[randcounter]);
        s(bargirldesc[randcounter]);
        s("<b>BARTENDER:</b> " + bargirlresp[randcounter]);
        incrandom();
        s(girlname + " seems to be glaring at you.");
        externalflirt++;
        c(locstack[0], "Continue...");
    }

    function buysoda() {
        if (money >= 5) {
            s("You buy a soda for $5.00.");
            soda += 1;
            money -= 5;
        } else s("You don't have enough money!");
        c("buysoda", "Buy another soda" )
        c(locstack[0], "Continue...");
    }

    function stealsoda() {
        s("You climb behind the snack counter, grab a big paper cup.  You scoop a bit of ice and fill it to the top, capping it with a lid and a straw.");
        soda += 1;
        c("stealsoda2", "Steal another soda.")
        c(locstack[0], "Continue...");
    }

    //TODO put a limit on this/ Game update
    //TODO randomize quotes
    function stealsoda2(){
        s("You grab another paper cup, and fill it up in a similar way as the previous one.");
        soda += 1;
        c("stealsoda2", "Steal another soda.");
        c(locstack[0], "Continue...");
    }

    function buybeer() {
        if (money >= 3) {
            s("You buy a beer for $3.00.");
            beer += 1;
            money -= 3;
            s("<b>BARTENDER:</b> " + barquotes[randcounter]);
            if (wetpanties > 0 && randcounter === 3) c("sellpanties", "Sell wet panties to the bartender.");
            incrandom();
        } else s("You don't have enough money!");
        c("buybeer", "Buy another beer");
        c(locstack[0], "Continue...");
    }

    function stealbeer() {
        s("You climb behind the bar and find a clean glass.  Holding it under the tap, you carefully pull the lever and watch as the frothy amber liquid fills the glass.");
        beer += 1;
        c("stealbeer2", "Steal another beer");
        c(locstack[0], "Continue...");
    }

    //TODO put a limit on this/ Game update
    //TODO Randomize quotes
    function stealbeer2(){
        s("You find another clean glass, and fill it up in a similar way as the previous one.");
        beer += 1;
        c("stealbeer2", "Steal another beer");
        c(locstack[0], "Continue...");
    }

    //TODO fix this scene
    function pickup() {
        if (locstack[0] !== "pickup") { // happens first time only.
            pushloc("pickup");
            s("You get in your car and drive over to " + girlname + "'s place.");
            s(girlname + firstmtgquote);
            if (pantycolor !== "none")
                s(firstmtgtightquote);
            else s(firstmtgtightquotebare);
            if (thetime < 55) {
                s(girltalk + "Oh! You're early!  I wasn't expecting you to show up on time!");
            } else if (!askholditcounter && bladder >= bladneed) {
                bladder = 0; // You did not ask her to wait.
            }
            if (bladder > blademer)
                s("You also see the bulge of her overfull bladder.");

            if (thetime > 75 || (bladder > bladneed && thetime > 60)) {
                s(girltalk + "Where have you been?");
                s(girltalk + "You're late.");
                showneed();
                s("She seems pretty upset.");
                attraction -= 5;
                shyness -= 10;
            }
            showneed();
            if (prepeed) {
                s(girltalk + "I know you asked me to wait, but I couldn't hold it - I <b>had</b> to pee.");
            } else if (bladder > bladneed && askholditcounter) {
                if (thetime > 60)
                    s(girlname + " whispers shyly: I've been bursting my bladder waiting for you.");
                else
                    s(girlname + " whispers shyly: I'm so glad you're finally here - I've <i>really</i> got to pee!");
                displayneed();
                askholditcounter = 0;
                waitcounter = 0;
                gottagoflag = 1;
            } else if (askholditcounter) {
                s(girltalk + "I waited to pee just like you asked.");
                askholditcounter = 0;
                gottagoflag = 1;
                waitcounter = 0;
            }
        } else {
            s("You're at " + girlname + "'s place to pick her up.");
        }
        displayyourneed();
        if (bladder > bladlose) wetherself();
        else if (yourbladder > yourbladlose) wetyourself();
        else {
            if (gottagoflag > 0) {
                preventpee();
            } else {
                standobjs();
                if (yourbladder > yourbladurge)
                    c("youpee", "Ask if you can use her toilet.");
            }
            c("leavehm", "Say let's get going.");
        }
    }


    //
    //  This function is used to leave ANY location and drive off.
    //
    //TODO flirt flags get reset even if you stay because she asks to go pee
    function leavehm() {
        changevenueflag = 1;
        flirtedflag = 0;
        checkedherout = 0;
        kisscounter = 0;
        feelcounter = 0;
        rrlockedflag = 0;
        externalflirt = 0;

        showneed();

        if (gottagoflag > 0) {
            c("holdit", "Ask her to hold it.");
            c("allowpee", "Let her go.");
        } else {
            s("<b>YOU:</b> " + outtahere[randcounter]);
            incrandom();
            s(girltalk + "Yeah! " + outtahere[randcounter]);
            displayneed();
            displayyourneed();
            c("driveout", "Continue...");
        }

    }

    //TODO fix the go to the bar like she asked
    function driveout() {
        if (locstack[0] !== "driveout") {
            pushloc("driveout");
            if (withgirl) {
                s("You and " + girlname + " go out to your car.");
                suggestedloc = "none";
                if (wetthecar)
                    s(soakedseatquote);
                else
                    s("She settles into the passenger seat and buckles in.");
                s("You start up the car and drive off together.");
            } else {
                s("You go out to your car, hop in and drive off.");
            }
        } else {
            if (withgirl)
                s("You're in the car with " + girlname + ".");
            else
                s("You're driving around in your car.");
        }
        if (withgirl) {
            displayneed();
            if (suggestedloc === "none") {
                if (randomchoice(8)) {
                    if (shyness < 30 && attraction > 50 && !beenmakeout) {
                        s(girltalk + "Maybe we could find someplace nice and private?");
                        suggestedloc = "themakeout";
                    } else if (shyness < 50 && attraction > 100 && beenmakeout &&
                        beenbar && beenclub && seenmovie) {
                        s(girltalk + "Hey!  Wanta stop by my place?");
                        suggestedloc = "thehome";
                    } else if (shyness > 80 && attraction < 30 && !seenmovie) {
                        s(girltalk + "Want to see a movie?");
                        suggestedloc = "themovie";
                    } else if (shyness < 60 && attraction > 30 && !beenclub) {
                        s(girltalk + "Want to go out dancing?");
                        suggestedloc = "theclub";
                    } else if (bladder > bladneed && shyness < 50 && !beenbar) {
                        s(girltalk + "Can we stop somewhere for a drink?");
                        suggestedloc = "thebar";
                    }
                }
            }
        }
        displayyourneed();
        s("Do you want to:");
        c("drivearound", "Just drive around");
        if (withgirl) {
            if (suggestedloc !== "thebar")
                c("thebar", "Go to the bar");
            else
                c("thebar", "Go to the bar like she asked.");
            if (suggestedloc !== "theclub")
                c("theclub", "Go to the nightclub");
            else
                c("theclub", "Stop by the nightclub for her");
            if (suggestedloc !== "themovie")
                c("themovie", "Go to the theater");
            else
                c("themovie", "Go to see a movie as she suggested.");
            if (suggestedloc !== "themakeout")
                c("themakeout", "Go to the make-out spot");
            else
                c("themakeout", "Take her up to the make-out spot");
            if (suggestedloc !== "thehome")
                c("thehome", "Go to the " + girlname + "'s place");
            else
                c("thehome", "Accept her invitation to go home with her.");
        } else {
            c("solobar", "Go to the bar");
        }

        if (debugmode) c("timewarp", "Advance to 2AM");
        if (debugmode && withgirl) c("ditchgirl", "Ditch the girl");
    }

    function nextstop() {
        s("<b>YOU:</b> I'll definitely stop at the next place I see.");
        s(girltalk + "Thanks!");
        displayneed();
        c(locstack[0], "Continue...");
    }

    function drivearound() {
        if (!withgirl) {
            s(soloview[randcounter]);
            incrandom();
            c(locstack[0], "Continue...");
        } else {
            s("You are driving around with " + girlname + " in the passenger seat.");
            showneed();
            displayyourneed();
            if (bladder > bladlose) wetherself();
            else if (yourbladder > yourbladlose) wetyourself();
            else {
                if (yourbladder > yourblademer)
                    c("drivetell", "Tell her you need to go.");
                if (gottagoflag > 0) {
                    preventpee();
                } else standobjs();
                c(locstack[0], "Continue...");
            }
        }
    }

    function drivetell() {
        s("You shift uncomfortably in your seat, trying to focus on the road.");
        s("YOU: I'm bursting for a pee.");
        s(girltalk + "Then you better stop somewhere so you can go.");
        c("drivepee", "I can't wait.");
        c(locstack[0], "I'll stop at the next place I see.");
    }

    function drivepee() {
        s(girltalk + "Do you have anything you can pee in? A cup or something?");
        if (shotglass > 0) c("ypeeshot", "Pee in the shot glass.");
        //TODO figure out how towels would work for you
        // if ( ptowels > 0 ) c("peetowels" , "Pee in the roll of paper towels.");
        if (vase > 0) c("ypeevase", "Pee in the vase.");
        c(locstack[0], "No, I got nothing!")
    }

    //TODO fix the double desperate
    function itsclosed(locname) {
        let theloc;
        if (locname === "thebar") theloc = "bar";
        if (locname === "theclub") theloc = "night club";
        if (locname === "themovie") theloc = "movie theater";

        s("You and " + girlname + " arrive at the " + theloc + ".");
        s("It seems a bit deserted.");
        if (bladder > blademer) {
            s(girltalk + "<i>It had better not be closed.</i>");
            displaygottavoc();
        }
        s("The " + theloc + " is definitely closed.");
        showneed();
        displayyourneed();
        if (locname === "thebar" && barkey > 0)
            c("breakbar", "Try to break in with your key.");
        if (locname === "theclub" && clubkey > 0)
            c("breakclub", "Try to break in with your key.");
        if (locname === "themovie" && theaterkey > 0)
            c("breakmovie", "Try to break in with your key.");
        c(locstack[0], "Continue...");
    }


    function breakclub() {
        s("You try the door with your key...");
        if (bladder > blademer) {
            s(girltalk + sayhero[randcounter]);
            attraction += 3;
        }
        displayneed();
        displayyourneed();
        c("darkclub", "Continue...");
    }

    function reclub() {
        clubkey = 0;
        pushloc("theclub");
        theclub();
    }

    function darkclub() {
        if (locstack[0] !== "darkclub") {
            s("You and " + girlname + " enter the nightclub.  It's dark, silent and deserted.");
            pushloc("darkclub");
        } else {
            s("You are with " + girlname + " in the closed nightclub.");
        }

        showneed();
        displayyourneed();
        if (bladder > bladlose) wetherself();
        else if (yourbladder > yourbladlose) wetyourself();
        else if (gottagoflag > 0) preventpee();
        else {
            standobjs();
            if (!checkedherout) c("checkherout", "Check her out.");
            c("youpee", "Go to the bathroom.");
            c("leavehm", "Leave the club.");
        }
    }


    function theclub() {
        if (beenclub && locstack[0] === "driveout" && thetime < clubclosingtime) {
            s(girlname + " giggles: But we've already been to the club, silly!");
            if (clubkey > 0)
                c("reclub", "But I found this key I have to return!");
            c(locstack[0], "Continue...");
        } else {
            if ((thetime < clubclosingtime) || locstack[0] === "theclub") {
                if (locstack[0] !== "theclub" && locstack[0] !== "dodance") {
                    s("You and " + girlname + " enter the Night Club.");
                    pushloc("theclub");
                } else {
                    s("You are with " + girlname + " in the Night Club.");
                    if (randomchoice(3)) noteholding();
                    else if (randomchoice(5)) interpbladder();
                }

                beenclub = 1;
                showneed();
                displayyourneed();
                if (bladder > bladlose) wetherself();
                else if (yourbladder > yourbladlose) wetyourself();
                else {
                    if (gottagoflag > 0) {
                        preventpee();
                    } else {
                        c("buydrink", "Buy a drink.");
                        c("godance", "Ask her to dance.");
                        if (clubkey < 1) c("lookaround", "Look around.");
                        standobjs();
                        if (yourbladder > yourbladurge)
                            c("youpee", "Go to the bathroom");
                    }
                    c("leavehm", "Leave the club.");
                }
            } else itsclosed("theclub");
        }
    }

    function godance() {
        pushloc("dodance");
        changevenueflag = 1;
        showneed();
        displayyourneed();
        if (gottagoflag > 0) {
            c("holdit", "Ask her to hold it.");
            c("allowpee", "Let her go.");
        } else {
            s(girltalk + "Okay.  Let's dance.");
            s("You head out to the dancefloor to cut up the rug.");
            c(locstack[0], "Continue...");
        }
    }

    function dodance() {
        pushloc("dodance");
        s("You are dancing with " + girlname + " in your arms.");
        showneed();
        displayyourneed();
        if (randomchoice(3)) noteholding();
        else if (randomchoice(5)) interpbladder();

        if (bladder > bladlose) wetherself();
        else if (yourbladder > yourbladlose) wetyourself();
        else {
            if (gottagoflag > 0) {
                preventpee();
            } else {
                c(locstack[0], "Keep Dancing.");
                c("kissher", "Kiss her.");
                c("feelup", "Feel her up.");
                standobjs();
                if (yourbladder > yourbladurge)
                    c("youpee", "Go to the bathroom.");
            }
            c("goback", "Leave the dancefloor.");
        }
    }


    function pgirlsroom() {
        if (locstack[0] === "pgirlsroom") {
            poploc();
            eval(locstack[0] + "()");
        } else {
            pushloc("pgirlsroom");
            s("<b>YOU:</b> Can I watch?  It would be <u>so</u> sexy!");
            if (attraction >= pwatchthreshold) {
                displayneed();
                s(girltalk + "Really?  Well.... okay.  I guess there's nobody around.");
                s("She grabs you by the hand and heads for the ladies room.");
                displayneed();
                c("pgirlsroom2", "Follow her...");
                c("indepee", "Change your mind...");
            } else {
                s(girltalk + "I don't think so, buddy.");
                indepee();
            }
        }
    }

    function pgirlsroom2() {
        s("She looks right, looks left, and peeks in the door before quickly pulling you into a very cramped stall.");
        if (bladder < bladlose - 10) bladder = bladlose - 10;
        displayneed();
        s("The sight of the toilet seems to have increased her urgency.");
        c("ptogether3", "Continue...");
    }

    //TODO let her choose.
    function pnorestroom() {
        if (locstack[0] === "pnorestroom") {
            poploc();
            eval(locstack[0] + "()");
        } else {
            pushloc("pnorestroom");
            s("<b>YOU:</b> Why don't you go ahead and go.  But not in the restrooms.");
            if (attraction >= pnorestroomthreshold) {
                displayneed();
                s(girltalk + "What?  Then where am I supposed to go?");
                displayneed();
                c("ptrashcan", "Tell her to pee in the trash can.");
                c("psink", "Tell her to pee in the snack counter sink.");
                c("psodacup", "Tell her to pee in a soda cup.");
                c("pfloor", "Tell her to go on the floor.");
                c("indepee", "Change your mind...");
            } else {
                s(girltalk + "No way, dude.  I'm outta here.");
                indepee();
            }
        }
    }

    function ptrashcan() {
        s("<b>YOU:</b> How about that trashcan?");
        displayneed();
        s(girlname + " looks around apprehensively before heading over to it.");
        s(girltalk + "Am I gonna regret this?");
        if (pantycolor === "none")
            s(peeprepquotebare);
        else
            s(peeprepquote);
        s("Quickly, " + girlname + " lowers herself over the trashcan and lets go.  Her pee hisses out and hits the trashcan liner with a loud clatter.");
        flushdrank();
        sawherpee = 1;
        s("The bottom of the trashcan is a sea of fragrant pee.  You offer her a tissue, but she simply gets back up and gives you a hug.");
        s(girltalk + "That's <u>so</u> much better.");
        c("goback", "Continue...");
    }

    function psink() {
        s("<b>YOU:</b> How about the sink over there?");
        displayneed();
        s(girlname + " looks around apprehensively before climbing over the snack counter.");
        s(girltalk + "How am I gonna do this?");
        if (pantycolor === "none")
            s(peeprepquotebare);
        else
            s(peeprepquote);
        s("Carefully, " + girlname + " lifts herself up onto the counter and positions her butt over the sink.  Even before she's settled into place, she lets go.  Her pee hisses out and hits the metal sink with a loud clatter.");
        flushdrank();
        sawherpee = 1;
        c("goback", "Continue...");
    }

    function psodacup() {
        s("<b>YOU:</b> How about a soda cup?");
        displayneed();
        s(girlname + " looks around apprehensively as you get a big plastic soda cup from behind the snack counter.");
        s(girltalk + "Am I gonna regret this?");
        if (pantycolor === "none")
            s(peeprepquotebare);
        else
            s(peeprepquote);
        s("Carefully, " + girlname + " brings the cup between her beautiful trembling thighs and lets go.  Her pee hisses out and foams into the cup.");
        flushdrank();
        sawherpee = 1;
        s(girltalk + "That's better!");
        s("She puts a lid on the cup and hands it to you.  The cup is warm with the heat of her urine, and her scent wafts from the straw hole.");
        c("goback", "Continue...");
    }

    function pfloor() {
        s("<b>YOU:</b> Why don't you pee right there on the carpet?");
        displayneed();
        s(girlname + " looks around apprehensively before squatting down.");
        s(girltalk + "Are you sure we're not gonna get in trouble?");
        if (pantycolor === "none")
            s(peeprepquotebare);
        else
            s(peeprepquote);
        s(girlname + " starts to pee immediately.  Her stream hisses out and spatters on the carpet, which soaks it up quickly, making a gurgling spattering noise.  The scent of her pee fills the air.");
        flushdrank();
        sawherpee = 1;
        c("goback", "Continue...");
    }

    function pphotogame() {
        s("<b>YOU:</b> I know you really need to go, but can I take just a couple snapshots first?");
        displayneed();
        s(girltalk + "What <u>kind</u> of pictures?");
        c("photogame2", "Just a couple snapshots of you up on the stage there.");
        c("photogame2c", "How about a few costume pics?");
        c("photogame2n", "Well - nobody's around, so I'd really love it if you would do a few nudes.");
    }

    function photogame2() {
        if (attraction >= photogamethreshold) {
            displayneed();
            s(girltalk + "Okay.  But can I please go pee first?");
            displayneed();
            photolevel = 0;
            c("photogame", "I'd really like it if you'd wait...");
            c("indepee", "Alright - go ahead and pee.");
        } else {
            s(girltalk + "No way, dude.  I'm outta here.");
            indepee();
        }
    }

    function photogame2c() {
        if (attraction >= photogamecthreshold) {
            displayneed();
            s(girltalk + "Well, okay.  It would be neat to play dressup.  But can I please go pee first?");
            displayneed();
            photolevel = 1;
            c("photogame", "I'd really like it if you'd wait...");
            c("indepee", "Alright - go ahead and pee first.");
        } else {
            s(girltalk + "No way, dude.  I'm outta here.");
            indepee();
        }
    }

    function photogame2n() {
        if (attraction >= photogamenthreshold) {
            displayneed();
            s(girltalk + "That's naughty.  Very naughty.  But can I please go pee first?");
            displayneed();
            photolevel = 2;
            c("photogame", "I'd really like it if you'd wait...");
            c("indepee", "Alright - go ahead and pee first.");
        } else {
            s(girltalk + "No way, dude.  I'm outta here.");
            indepee();
        }
    }

    //TODO show your need
    //TODO fix wetherself when naked
    //TODO not running to the bathroom if she wet herself
    function photogame() {
        if (locstack[0] !== "photogame") {
            pushloc("photogame");
            displayholdquip();
            posectr = 0;
            askholditcounter++;
            s("<b>YOU:</b> Thanks.  You're very sexy.");
            s("You motion " + girlname + " up onto the nightclub stage.");
            s("She carefully ascends the stairs, and you find a switch that turns on some stage lights.");
        } else {
            s("You're taking snapshots of " + girlname + " up on the nightclub stage.");
            if (photolevel === 3) s("She's completely nude.");
            if (photolevel === 1) s("She's wearing " + poseoutfit[outfitctr] + ".");
            if (bladder > blademer) {
                interpbladder();
                noteholding();
            }
        }
        showneed();
        if (bladder > bladlose) wetherself();
        else if (yourbladder > yourbladlose) wetyourself();
        else {
            if (posectr <= posemax) c("photopose", "Ask her to pose.");
            if (photolevel === 1 && outfitctr < outfitmax) c("photochange", "Ask her to change.");
            if (photolevel === 2) c("photonude", "Ask her to disrobe.");
            c("goback", "Photo session is over...");
        }
    }

    function photopose() {
        s("<b>YOU:</b> How about striking a pose?");
        if (photolevel === 3)
            s(girlname + " " + posenude[posectr]);
        else
            s(girlname + " " + posenorm[posectr]);
        posectr++;
        if (bladder > blademer) {
            s(poseemer[randcounter]);
            incrandom();
        }
        c(locstack[0], "Take a photo...");
    }

    function photochange() {
        s("<b>YOU:</b> How about changing into a costume?");
        outfitctr++;
        if (bladder > blademer) {
            s(girlname + " is almost doubled over as she takes little baby steps back to the closet and returns with a " + poseoutfit[outfitctr]);
            s(donemer[outfitctr]);
        } else {
            s(girlname + " walks back to the closet and returns with a" + poseoutfit[outfitctr]);
            s(donoutfit[outfitctr]);
        }
        c(locstack[0], "Continue...");
    }

    function photonude() {
        s("<b>YOU:</b> Okay - so you can take off your clothes.");
        if (bladder > blademer) {
            s(girlname + undressquoteemer);
            s("<i>You can see her face filled with a look of concentration as she waits for an opportune moment to continue.</i>");
            s("She then shyly unclasps her bra, revealing her breasts briefly before turning her back to you.  Her thighs are rubbing together.");
            if (pantycolor === "none") {
                s("She quickly crosses her legs and squeezes tightly - she was not wearing any panties.");
            } else {
                s("She hesitates and looks to you for confirmation before spreading her legs slightly, giving her pussy a firm press, and quickly slipping her panties off then tightly crossing her legs.");
            }
        } else {
            s(girlname + undressquote);
            if (pantycolor === "none") {
                s("She's not wearing any panties.");
            } else {
                s("She hesitates and looks to you for confirmation before slipping her panties off and placing them on the floor next to her.");
            }
        }
        s("She's standing on stage completely nude.");
        incrandom();
        photolevel = 3;
        c(locstack[0], "Continue...");
    }


    function pdrinkinggame() {
        s("<b>YOU:</b> Why don't you go ahead and go.  But afterwards let's play a little drinking game.");
        s(girltalk + "What <u>kind</u> of drinking game?");
        s("<b>YOU:</b> We'll pace each other drinking beers.  First one to pee is the loser.");
        if (attraction >= drinkinggamethreshold) {
            displayneed();
            s(girltalk + "Okay.  But let's go pee first.");
            displayneed();
            c("pdrinkinggame2", "Continue...");
        } else {
            s(girltalk + "No way, dude.  I'm outta here.");
            indepee();
        }
    }

    function pdrinkinggame2() {
        s("You both head off to the restrooms to empty your bladders.");
        s("Standing in front of the urinal, you imagine her sitting and peeing on the other side of the wall as you drain your bladder of every last drop.");
        s("You hear the muffled flush of a toilet from the ladies room and walk back out to meet her coming out of the restroom.");
        s("She seems really relieved, and a bit aroused.");
        flushdrank();
        yourbladder = 0;
        c("pdrinkinggame3", "Continue...");
    }

    function pdrinkinggame3() {
        pushloc("drinkinggame");
        s("<b>YOU:</b> Okay.  All better now?");
        s("<b>YOU:</b> Here's the rules: we both drink shots of beer until one of us can't hold it.  There's no holding, no tickling, and you have to drain the glass in one go.  Any questions?");
        s(girltalk + "Okay.  But you're going <i>DOWN</i>!");
        c(locstack[0], "Continue...");
    }

    //TODO more interactions
    //TODO  choose what happenes when both lose at the same time
    //TODO have a chance to have it escalate
    function drinkinggame() {
        s("You're playing a drinking game with " + girlname + ".");
        let peedself = 0; //This flag is purely used to prevent the dialog of the drinking game from popping up if you lost
        if (yourbladder >= yourbladlose) {
            if (!holdself || randomchoice(holdpeethresh)) {
                peedself = 1;
                poploc();
                pushloc("postgamelose");
                wetyourself();
            }
        }
        if (bladder >= bladlose) {
            poploc();
            pushloc("postgame");
            wetherself();
        } else if (!peedself) {
            displayneed();
            displayyourneed();
            s("<b>YOU:</b> It's time to drink up!");
            s("You pull two beers, toast, and both drain the glasses.");
            tummy += 40;
            yourtummy += 40;
            holdself = 0;
            drankbeer = 2;
            ydrankbeer = 2;
            if (yourbladder > yourblademer)
                c("holdyourself", "You grab your dick.");
            c("feelup", "You feel her up.");
            c("askcanhold", "You ask her how she's doing.");
            c("pstory", "Ask her if she's ever wet herself.");
            c("drinkinggamewait", "Continue...");
        }
    }

    //TODO don't pee with her if you're not desperate
    function postgame() {
        notdesperate = 0;
        notydesperate = 0;
        nothdesperate = 0;
        if (shespurted) {
            s("<b>YOU:</b>You lost it, didn't you? You spurted!");
            s("<b>YOU:</b>What were we playing for again?");
        } else {
            s("<b>YOU:</b> Ha!  You lose!  What were we playing for again?");
        }
        s("<b>" + girlname + " laughs:</b>  We didn't really think of that, did we?  How about a kiss?");
        if (bladder > blademer && yourbladder > yourblademer) {
            //TODO fix this scene
            s("You reach out to take her in your arms... hoping to squeeze her really tight.");
            s(girltalk + "But I gotta pee <b>FIRST</b>.");
            s("You both head off to the restrooms to relieve yourselves and clean up.");
            flushdrank();
            flushyourdrank();
        } else if(bladder > blademer){
            notydesperate=1;
            s("You reach out to take her in your arms... hoping to squeeze her really tight.");
            s(girltalk + "But I gotta pee <b>FIRST</b>.");
            s("She heads towards the bathroom, you stay behind waiting for her to come back.");
            flushdrank();
        } else {
            if (yourbladder > yourblademer) {
                nothdesperate=1;
                s("She reaches towards you, and you want to stay, but you simply have to head off to the restrooms to relieve yourself.");
                flushyourdrank();
            } else {
                s("She reaches towards you and you pull her on your lap, kissing her soundly while cupping a feel.");
                attraction += 5;
                shyness -= 7;
                notdesperate = 1;
            }
        }
        c("goback", "Continue...");
    }

    //TODO you spurted.
    function postgamelose() {
        s(girltalk + "Ha!  You lose!  What were we playing for again?");
        s("<b>" + girlname + " laughs:</b>  We didn't really think of that, did we?  How about a kiss?");
        s("You reach out to take her in your arms... hoping to squeeze her really tight.");
        s(girltalk + "But I gotta pee <b>FIRST</b>.  And you've got to clean up.");
        s("You both head off to the restrooms.  You to clean up and her to find sweet relief.");
        flushdrank();
        flushyourdrank();
        c("goback", "Continue...");
    }

    function holdyourself() {
        s("You surreptitiously sneak your hand down into your crotch and massage.");
        if (randomchoice(7)) {
            s(girlname + " doesn't seem to notice.");
            holdself = 1;
        } else {
            s(girlname + " sees you and pulls your hand back away from your dick.");
        }
        showneed();
        c("drinkinggame", "Continue...");
    }

    function drinkinggamewait() {
        s("You and " + girlname + " stare at each other as your feel the beer taking effect.");
        displayneed();
        c("drinkinggame", "Continue...");
    }


    //TODO option for you to pee as well
    function ptogether() {
        if (locstack[0] === "ptogether") {
            poploc();
            eval(locstack[0] + "()");
        } else {
            pushloc("ptogether");
            s("<b>YOU:</b> Don't go and leave me alone!");
            if (attraction >= ptogetherthreshold) {
                displayneed();
                s(girltalk + "Really?  You want to come with me?");
                s("She grabs you by the hand and heads for the back of the club.");
                displayneed();
                c("ptogether2", "Follow her...");
                c("indepee", "Change your mind...");
            } else {
                s(girltalk + "You're a big boy.  You can take care of yourself.");
                indepee();
            }
        }
    }

    //TODO option to make out
    function ptogether2() {
        s(girlname + " leads you back to the restrooms.");

        if (!randomchoice(rrlockedthresh)) {
            s("She looks right, looks left, and peeks in the door before quickly pulling you into a very cramped stall.");
            if (bladder < bladlose - 10) bladder = bladlose - 10;
            displayneed();
            s("The sight of the toilet seems to have increased her urgency.");
            c("ptogether3", "Continue...");
        } else {
            s("There's a long line for the womens restrooms.  You notice they're mostly young, dressed to the nines, and in various stages of extreme urinary urgency.  Your daydreams are interrupted quickly.");
            s(girlname + " squeezes your hand: I can't hold it!  What are we gonna do?");
            c("ptogether4", "Invite her into the mens room.");
            c("ptogether5", "Take her out the nearby back door.");
            c("ptogether6", "Stand around looking dumb.");
        }
    }

    function ptogether3() {
        if (pantycolor !== "none")
            s(girlname + ptogetherquote);
        else
            s(girlname + ptogetherquotebare);
        s("You try not to stare too much as the torrent cascades from between her thighs.  You hear the violent hissing and splashing of her pee, and the scent fills the tiny cubicle.  You want to touch her so badly.");
        flushdrank();
        sawherpee = 1;
        c("ptogether3d", "Feel the stream.");
        c("ptogether3c", "Kiss her thighs.");
        c("ptogether3b", "You're too shy.");
    }

    function ptogether3b() {
        s("As the torrent subsides, you offer her some tissue.");
        s(girltalk + "Thanks - I've never had to go so bad in my life!");
        s("<i>She seems relaxed, radiant ... and aroused.</i>");
        c("goback", "Continue...");
    }

    function ptogether3c() {
        s("You lay your head in her lap, the warmth of her thighs on your cheek.");
        s("The hissing is louder down there, and you feel the small droplets of her pee spray landing on your upper lips.");
        s("You can sense the heat from the stream, and the smell of her is overpowering.");
        c("ptogether3b", "Continue...");
    }

    function ptogether3d() {
        s("You caress her, running your hand down her back and along the line of her butt crack.");
        s("Her crack is warm and soft, and as your fingers reach the edge of her pussy lips, you feel small droplets from the urine stream wetting your hand.");
        s("You carefully put just one finger into the edge of her stream - it feels hot and wet.");
        c("ptogether3b", "Continue...");
    }


    // You take her into the mens room
    function ptogether4() {
        s("<b>YOU:</b> Quick!  In here!");
        s("You pull her across the hall towards the men's room.");
        s(girltalk + "But I can't go in there!");
        c("ptogether4b", "I'm a guy, and I'm giving you permission!");
        c(locstack[0], "Okay, then I guess you'll just have to hold it.");
    }

    function ptogether4b() {
        s("She follows you into the mens room, and you carefully avoid any eye contact with the two dudes using the urinals.");
        displayneed();
        s("You find a reasonably clean stall and pull her in with you.");
        c("ptogether3", "Continue...");
    }

    // You take her out back
    function ptogether5() {
        s("<b>YOU:</b> Quick!  In here!");
        s("You pull her towards the back door at the end of the hall.");
        s(girltalk + "Where are we going?");
        s("<b>YOU:</b> I know a place!");
        displayneed();
        s("You emerge together into a poorly lit parking lot.");
        c("ptogether5a", "Tell " + girlname + " to pee behind the dumpster.");
        c("ptogether5b", "Tell " + girlname + " you'll help her.");
    }

    function ptogether5a() {
        s("<b>YOU:</b>  You can go behind that dumpster over there!");
        s(girltalk + "<b>This</b> is your solution???");
        displayneed();
        s("You can see the struggle in her eyes as she makes up her mind what to do.");
        s(girltalk + "Can you hold me so I don't fall over?");
        c("ptogether5a2", "Okay...");
        c(locstack[0], "Nevermind - let's go back inside.");
    }

    function ptogether5a2() {
        s("You don't have to be asked twice.");
        s("You take her hand and lead her behind the dumpster.  She seems nervous.");
        displayneed();
        if (pantycolor !== "none") s(ptogetheroutquote);
        else s(ptogetheroutquotebare);
        s("You steady her and the stream starts immediately, first as an incoherent spray which slightly wets her shoes, and quickly building into a powerful stream.");
        s("By the time she finally cuts it off, the pee has pooled into a pond which is seeping under the dumpster.");
        if (pantycolor !== "none")
            s(finishtogethroutquote);
        else
            s(finishtogetheroutquotebare);
        flushdrank();
        sawherpee = 1;
        c("goback", "Continue...");
    }

    function ptogether5b() {
        s("<b>YOU:</b>  Here!  I'll help you.");
        s("You push her up against the wall, in the shadows a little ways from the door.");
        s(girltalk + "I can't...");
        if (pantycolor !== "none") {
            s(ptogetherdumpquote);
            s("Her pussy is warm and pulsing underneath the thin fabric as she struggles to control her bladder.");
            s("You pull the gusset aside and spread her lips with your fingers.");
        } else {
            s(ptogetherdumpquotebare);
            s("Her pussy is warm and pulsing aginst your hand as she struggles to control her bladder.");
            s("You carefully spread her lips between your fingers.");
        }
        c("ptogether5c", "Continue...");
    }

    function ptogether5c() {
        s("<b>YOU:</b>  Go.  Let it all out.");
        s("She protests, but not too strongly, and you feel her pussy tense just as the flow starts, running between your fingers and slightly wetting them before spattering onto the ground in front.");
        if (pantycolor !== "none")
            s(finishtogetherdumpquote);
        else
            s(finishtogetherdumpquotebare);
        s("She gives you a long, hard kiss before you head back inside together.");
        flushdrank();
        sawherpee = 1;
        c("goback", "Continue...");
    }

    // You stand around looking dumb.
    function ptogether6() {
        s("<b>YOU:</b> Duhhhhh...");
        displayneed();
        s("She stamps her foot in impatience.");
        s(girltalk + "You're no help!");
        s("You head back to the dance floor together.");
        c(locstack[0], "Continue...");
    }

    function checkherout() {
        checkedherout = 1;
        s(stareather[randcounter]);
        incrandom();
        c(locstack[0], "Continue ...");
    }

    function feelup() {
        feelcounter += 1;
        if (locstack[0] !== "thehottub") {
            s(feelher[randcounter]);
            if (bladder > blademer) s(feelpee[randcounter]);
            else s(feelres[randcounter]);
        } else {
            s(feelhertub[randcounter]);
            if (bladder > blademer) s(feelpeetub[randcounter]);
            else s(feelrestub[randcounter]);
        }
        incrandom();
        if (flirtcounter > 1 && attraction > 35) {
            s(girlname + respfeelup[randcounter]);
            if (locstack[0] !== "thehottub")
                s("She " + feelyou[randcounter]);
            else
                s("She " + feelyoutub[randcounter]);
            if (feelcounter < maxfeel) {
                attraction += 5;
                shyness -= 2;
                arousal += 1;
            }
        } else if (attraction > 20) {
            if (locstack[0] !== "thehottub")
                s(girlname + " " + feelyou[randcounter]);
            else
                s(girlname + " " + feelyoutub[randcounter]);
            if (feelcounter < maxfeel) {
                attraction += 3;
                shyness -= 5;
                arousal += 2;
            }
        } else {
            s(girltalk + feelbad[randcounter]);
            attraction -= 2;
            shyness += 5;
        }
        incrandom();
        flirtcounter += 4;
        c(locstack[0], "Continue...");
    }

    function kissher() {
        kisscounter += 1;
        s("You kiss " + girlname + " directly on the lips.");
        if (attraction < 10 || (flirtcounter > 1 && attraction < 20)) {
            s("She breaks away.");
            s(girltalk + "Hey! Not so fast.");
            attraction -= 3;
        } else if (attraction < 20 || (flirtcounter > 2 && attraction < 30)) {
            s("She seems pleased.");
            if (kisscounter < maxkiss) {
                flirtcounter += 3;
                attraction += 3;
                shyness -= 3;
                arousal += 2;
            }
        } else if (attraction < 30) {
            s("She kisses you back.");
            if (kisscounter < maxkiss) {
                flirtcounter += 3;
                attraction += 3;
                shyness -= 3;
                arousal += 4;
            }
        } else if (attraction < 50) {
            s("She returns your kiss passionately.");
            if (kisscounter < maxkiss) {
                attraction += 3;
                shyness -= 3;
                arousal += 6;
            }
        } else {
            if (bladder < blademer) {
                if (locstack[0] !== "thehottub") {
                    s(sxykiss[randcounter]);
                    arousal += 8;
                }
                else {
                    s(sxynkdkiss[randcounter]);
                    arousal += 15;
                }
                incrandom();
            } else {
                if (locstack[0] !== "thehottub") {
                    s(peekiss[randcounter]);
                    arousal += 10;
                }
                else {
                    s(nkdpeekiss[randcounter]);
                    arousal += 15;
                }
                incrandom();
            }
            if (kisscounter < maxkiss) {
                attraction += 3;
                shyness -= 3;
            }
        }
        arousal += 2;
        c(locstack[0], "Continue...");
    }

    //TODO put flag in proper place
    let floorcounter = 0;
    function theelevator() {
        if (locstack[0] !== "theelevator") {
            pushloc("theelevator");
            s("You take " + girlname + " by the hand and go to wait in front of the elevator.");
            displayneed();
            displayyourneed();
            //TODO put flag in proper place
            elevatorwaitcounter = 0;
            c(locstack[0], "Continue...");
        } else {
            if (floorcounter === 0) {
                if (randomchoice(3)) {
                    if (elevatorwaitcounter > 2 && bladder > blademer) {
                        s("The elevator finally appears, and " + girlname + " rushes to enter as the door opens.  She suddenly steps back and stands still, trembling with the effort to conceal her desperation, as a pretty woman walks out.");
                        s(girlname + " lunges into the elevator and mashes the 3rd floor button with one hand while openly holding herself with the other.");
                    } else {
                        s("The elevator appears, so you step inside with " + girlname + " and hit the button for the 3rd floor.");
                    }
                } else {
                    s("The elevator has not yet arrived.");
                    s("You wait patiently with " + girlname + ".");
                    floorcounter = -1;
                    elevatorwaitcounter++;
                }
            } else if (floorcounter === 3) {
                s("The elevator finally reaches the 3rd floor.");
                s("You and " + girlname + " walk across the hall to the door of her apartment.");
                if (bladder > blademer && !herkeys)
                    s(girltalk + "Good thing I haven't lost my keys, huh?");
            } else {
                s("You're in the elevator with " + girlname + ".");
                noteholding();
            }
            showneed();
            if (floorcounter >= 3) {
                poploc();
            } else {
                floorcounter += 1;
            }
            if (bladder > bladlose) wetherself();
            else if (yourbladder > yourbladlose) wetyourself();
            else c(locstack[0], "Continue...");
        }
    }

    function givekeys() {
        herkeys = 0;
        s("You pull her keys from your pocket.");
        if (bladder >= blademer) {
            displayneed();
            s(girlname + " grabs the keys and opens the door.");
            c(locstack[0], "Continue...");
        } else {
            s(girltalk + " Where'd you get those?");
            c("keynevermind", "Ummm.....");
            c("keynevermind", "Errr.....");
            c("keynevermind", "Duhhh....");
        }
    }

    function keynevermind() {
        s(girltalk + " Oh, never mind.  Want to come in?");
        s("She opens the door.");
        c(locstack[0], "Continue...");
    }

    function lookforkeys() {
        s(girlname + " offers you her purse.");
        showneed();
        s("You palm the keys in your pocket, take her purse and rummage through it.");
        herkeys = 0;
        c("lookforkeys", "Haven't found anything yet.");
        c(locstack[0], "Found them!");
    }

    //TODO offer beer
    function thehome() {
        if (locstack[0] !== "thehome") {
            kisscounter = 0;
            feelcounter = 0;
            pushloc("thehome");
            s("You and " + girlname + " arrive at her place.");
            s("It's a 3rd floor apartment in a nice complex.");

            if (attraction > 100 && (beenbar || seenmovie) && beenclub && beenmakeout) {
                showneed();
                displayyourneed();
                s("She invites you to come up for a drink...");
                c("theelevator", "Go up with her.");
                c("gameover", "Say goodnight.");
            } else {
                s(girltalk + "Good Night...  see you soon?");
                locstack[0] = "gameover";
                c("gameover", "Continue...");
            }
        } else if (herkeys) {
            s(girlname + " searches through her purse for her keys.");
            displayneed();
            voccurse();
            s(girltalk + "I can't find my keys!");
            showneed();
            displayyourneed();
            c("givekeys", "Offer her her keys.");
            c("lookforkeys", "Offer to look for her keys.");
        } else {
            s("You are with " + girlname + " at her home.");

            if (kisscounter > maxkiss) {
                s(girlname + " suddenly pulls away from you and sits straight up.");
                s(girltalk + "You know, this just isn't working out.");
                s(girltalk + "I'm afraid we're going to have to call it a night.");
                c("gameover", "Continue...");
            } else {
                displaygottavoc();
                displayneed();
                displayyourneed();
                //TODO figure out what the hell this is
                if (champagnecounter > 5) {
                    if (bladder > bladlose)
                        s(girlname + " gasps: I'm going ... bathroom");
                    else
                        s("She invites you to come back to her bedroom.");
                    c("thebedroom", "Follow her closely to her bedroom.");
                    c("gameover", "Say goodnight.");
                } else {
                    if (gottagoflag) {
                        c("allowpee", "Tell her she should go and pee.");
                    }
                    c("youpee", "Ask if you can use her bathroom.");
                    c("kissher", "Kiss her on the lips.");
                    if (champagne > 0) {
                        c("champagnenow", "Offer her champagne.");
                    }
                    if (soda > 0) {
                        c("sodanow", "Offer her soda.");
                    }
                    c("gameover", "Say goodnight.");
                }
            }
        }
    }

    function thebedroom() {
        pushloc("thebedroom");
        if (locstack[0] !== "thebedroom") {
            s("You follow her closely back to her bedroom.");
            locstack[0] = "thebedroom";
            if (bladder > bladlose)
                s("She presses her crotch into the bedpost.");
            else
                s("She looks at you romantically with a cute little smile.");
        } else {
            s("You are with " + girlname + " in her bedroom.");
        }
        showneed();
        displayyourneed();
        if (gottagoflag) {
            c("allowpee", "Tell her she can go and pee.");
        }
        if (gottagoflag) {
            c("holdit", "Ask her to hold it.");
        }
        c("thebed", "Kiss her.");
        c("gameover", "Say goodnight.");
    }

    //TODO something with your own desperation to pee
    function thebed() {
        if (locstack[0] !== "thebed") {
            kisscounter = 0;
            pushloc("thebed");
            arousal = 0;
            if (bladder > bladlose)
                s(girlname + " collapses on the bed, pulling you on top of her.");
            else
                s(girlname + " pulls you down onto the bed.");
        } else {
            s("You are in bed with " + girlname);
        }

        if (kisscounter > maxkiss) {
            s(girlname + " suddenly pulls away from you and sits up in bed.");
            s(girltalk + "You know, this just isn't working out.");
            s(girltalk + "I'm afraid we're going to have to call it a night.");
            c("gameover", "Continue...");
        } else {

            displayneed();
            displayyourneed();
            if (pantycolor === "none") xpanties = 1;

            if (arousal < 20) {
                s("She seems very aroused.");
            } else if (arousal < 40) {
                s("She seems very aroused.");
            } else if (arousal < 70) {
                s("She seems extremely aroused.");
            } else if (arousal < 100) {
                s("She seems unbelievably aroused.");
            } else if (arousal < 140) {
                s("She seems earthshatterinly aroused.");
            } else {
                s(girltalk + "<i>Hurry!</i> Fuck me <b>NOW</b>!");
            }

            s("What will it be?");

            c("kissher", "Kiss her on the mouth.");
            if (!tthigh && xskirt) c("touchthigh", "Touch her thigh");
            if (!tbreast && xtop) c("touchbreast", "Touch her breasts");
            if (!tass && xskirt) c("touchass", "Touch her ass");
            if (!tpussy && xskirt) c("touchpussy", "Touch her pussy");
            if (!kneck) c("kissneck", "Kiss her on the neck");
            if (!kbreast && xbra) c("kissbreast", "Kiss her on the nipple");
            if (!kthigh && xskirt) c("kissthigh", "Kiss her on the thigh");
            if (!kpussy && xskirt) c("kisspussy", "Kiss her on the pussy");
            if (!xskirt) c("toskirt", sextakeoffskirt);
            if (!xtop) c("totop", sextakeoffblouse);
            if (!xbra && xtop) c("tobra", "Take off her bra");
            if (!xpanties && xskirt) c("topanties", "Take off her panties");
            if (arousal >= 140 && xpanties && xskirt) c("fucknow", "Fuck her <b>NOW</b>.");
            else if (arousal > 120 && xpanties && xskirt) c("fucknow", "Fuck her");

            if (debugmode) c("fucknow", "Skip to fucking ( debug )");

            c("gameover", "Say goodnight.");
        }
    }

    function touchthigh() {
        if (!xskirt) {
            arousal += 6;
            s(sextouchthighquote);
            if (bladder > blademer) {
                s("They are wet and slippery.  You pull your hand back out and smell her sweat.  No pee yet, you think.");
            } else {
                s("She moans and quivers with delight.");
                s(girltalk + "That feels <i>so</i> good!");
            }

        } else {
            s("You slide your hand up her inner thighs.");
            if (bladder > blademer) {
                s("She suddenly clamps her legs together, trapping your fingers.");
                s("She squirms back and forth, trying to find a comfortable position, and pulling your arm around as she does it.");
                s(girltalk + "Oops.  I have to go sooooo bad I almost lost it for a second there.  Here's your arm back.");
            } else {
                s("She moans and quivers with delight.");
                s(girltalk + "That feels <i>so</i> good!");
            }
            arousal += 20;
        }
        if (multiplemoves === 0) {
            tthigh = 1;
        }
        c(locstack[0], "Continue...");
    }


    function touchbreast() {
        if (xtop === 0) {
            arousal += 4;
            s("You massage her breasts through the thin fabric of her blouse.");
        } else if (xbra === 0) {
            s("You rub her nipples through the silky lace of her bra.");
            arousal += 2;
        } else {
            arousal += 20;
            s("You twirl your finger around her erect nipples and she moans in pleasure.");
            if (bladder > bladlose) {
                s(girlname + " moans: Yes! Harder! I can't control it much longer.");
            } else {
                s("You didn't think it was possible, but her nipples are now even harder and sticking out even further.");
            }
        }
        if (multiplemoves === 0) {
            tbreast = 1;
        }
        c(locstack[0], "Continue...");
    }

    function touchass() {
        if (!xskirt) {
            arousal += 2;
            s(sextouchassquote);
            if (bladder > blademer && !xpanties) {
                s("Her butt cheeks are clenching and releasing, and the panties are pulled way into her crack.");
            } else {
                s("The silky cloth slides easily over her smooth cheeks and she presses into your hands.");
            }
        } else if (!xpanties) {
            arousal += 4;
            s("You rub her ass though the silky fabric of her panties.");
            if (bladder > blademer) {
                s("The panties are damp with her sweat.");
            } else {
                s("The thin cloth slides easily over her smooth cheeks and your fingers find their way underneath.");
            }
        } else {
            arousal += 10;
            s("You grab her ass and your fingers slide towards her hot cunt from the rear.");
            if (bladder > blademer) {
                s("Her butt clenches and your fingers seem stuck before they slide back out, lubricated by her sweat.");
            } else {
                s("She gasps: That's so <i>good</i>!");
            }
        }
        if (multiplemoves === 0) {
            tass = 1;
        }
        c(locstack[0], "Continue...");
    }

    function touchpussy() {
        if (xskirt === 0 && xpanties !== 0) {
            arousal += 4;
            s(sextouchpussyquote);
        } else if (xpanties === 0) {
            arousal += 12;
            s("You stroke her burning pussy though the silky wet fabric of her panties.");
            if (bladder > bladlose) {
                s("She grabs your hand and presses it into her crotch.  You can feel her pee hole as a tight quivering bump right under your index finger.");
                s(girltalk + "You have to help me hold it!");
            } else {
                s("She presses her cunt into your hand and reaches over to massage your dick.");
            }
        } else {
            arousal += 20;
            s("Your hand reaches up to firmly massage her dripping cunt as she moans in pleasure.");
            if (bladder > bladlose) {
                s("She grabs your hand and presses it more firmly into her crotch.  You can feel her pee hole as a tight quivering bump right under your index finger.");
                s(girltalk + "You have to help me hold it!");
            } else {
                s("You feel the bump of her erect clit pulsing beneath your fingers.");
            }
        }
        if (multiplemoves === 0) {
            tpussy = 1;
        }
        c(locstack[0], "Continue...");
    }

    function kissneck() {
        arousal += 4;
        s("You nibble delicately on her neck.");
        if (bladder > blademer) {
            s("Goosebumps suddenly form and her whole body shakes uncontrollable for a second.");
        } else {
            s("She seems to like it.");
        }
        if (multiplemoves === 0) {
            kneck = 1;
        }
        c(locstack[0], "Continue...");
    }

    function kissbreast() {
        if (!xtop) {
            arousal += 4;
            s("You bring your mouth up to her breasts and blow warm air through thin fabric of her blouse.  You can feel her nipples stiffen at the contact.");
        } else if (!xbra) {
            arousal += 10;
            s("You lick her nipples through the rough lace of her bra.");
        } else {
            arousal += 20;
            s("You suck and lick her stiff nipples and she moans in pleasure.");
            if (bladder > blademer) {
                s("They taste salty and sweet with her sweat.");
            }
        }
        if (multiplemoves === 0) {
            kbreast = 1;
        }
        c(locstack[0], "Continue...");
    }

    function kissthigh() {
        if (xskirt === 0) {
            arousal += 2;
            s(sexkissthighquote);
        } else {
            arousal += 10;
            s("You slide your cheek up her inner thighs, licking and kissing them passionately until you feel the heat of her pussy on your forhead.");
            if (bladder > blademer) {
                s("Her thighs are quivering with the effort keep her legs open and still clamp her pee hole shut.");
            }
        }
        if (multiplemoves === 0) {
            kthigh = 1;
        }
        c(locstack[0], "Continue...");
    }

    function kisspussy() {
        if (!xskirt) {
            s(sexkisspussyquote);
            if (bladder > blademer) {
                s("She groans and tries to push your head away");
            } else if (wetherpanties) {
                s("You smell the fragrance of her pee remaining from when she wet herself.");
            }
        } else if (!xpanties) {
            arousal += 8;
            s("You lay your face in her lap and tongue her pussy though the silky wet fabric of her panties.");
            if (bladder > bladlose) {
                s("She suddenly squeezes her legs together and pushes your head out.");
                s(girltalk + "Sorry!  I just had to do that.  I'm losing control!");
            } else {
                s("Your tongue finds her swollen clit through the thin cloth.");
                if (wetherpanties)
                    s("You smell the fragrance of her pee remaining from when she wet herself.");
            }
        } else {
            arousal += 20;
            s("You brush your lips over her fragrant pussy before burying your tongue in her dripping cunt.");
            if (bladder > blademer) {
                s("The quivering you feel through your tounge reminds you of the overfilled reservoir of pee that is barely controlled just inches away from your lips.");
            } else {
                if (wetherpanties)
                    s("You smell the fragrance of her pee remaining from when she wet herself.");
                s("It tastes of salt, and slightly sweet.  She gasps with sudden pleasure.");
            }
            if (bladder > bladlose) {
                s(girltalk + "Oh God! Oh God! Stop stop stop stop.");
                s("She suddenly slams her thighs together and pushes your head out.");
                s(girltalk + "Sorry sorry sorry.  I almost let a squirt out.  I'm <i>so</i> full!");
            }
        }
        if (multiplemoves === 0) {
            kpussy = 1;
        }
        c(locstack[0], "Continue...");
    }


    function totop() {
        arousal += 4;
        s("You slowly unbutton and remove her top, making sure to feel her up on the way past her breasts.  Her breasts are gorgeous and firm beneath the lace of her bra.");
        if (bladder > bladlose) {
            s(girltalk + "<i>HURRY</i> - I can't hold it much longer.");
            s("She looks like she's going to burst any second.");
        } else {
            s(girlname + " rubs her hands over your chest and begins to unbutton your shirt.");
        }
        xtop = 1;
        c(locstack[0], "Continue...");
    }

    function toskirt() {
        arousal += 4;
        if (bladder > blademer) {
            s(sextoskirtquoteemer);
        }
        if (!xpanties) {
            s(sextoskirtquote);
            if (bladder > blademer) {
                s("She momentarily catches her breath as a small bit of the pressure is reduced.")
            } else {
                s(girlname + " works at unzipping your pants, stroking your shaft through the cloth.");
            }
            if (bladder > bladlose) {
                s("The waistband is soaked with sweat from her exertions.");
            }
        } else {
            s(sextoskirtquotebare);
            if (bladder > bladlose) {
                s("It's spasmodically contracting as she fights to hold her pee.");
            } else {
                s(girlname + " unfastens your pants and pulls at your boxers, freeing your dick and stroking the shaft lightly.");
            }
        }
        xskirt = 1;
        c(locstack[0], "Continue...");
    }

    function tobra() {
        arousal += 4;
        if (xtop === 0) {
            s("You pull at her bra to very little effect.  Could it be she's still wearing her blouse?");
            if (bladder > bladlose) {
                s("UNGGGGHHHH! She grunts with the effort of holding it in.");
            } else {
                s(girltalk + "Having some technical difficulties?");
                s("She giggles.");
            }
        } else {
            s("You reach around behind her and find... that it's a front snap bra.  Problem is quickly solved ( good thinking! ) and you unsnap between her shapely round breasts.");
            if (bladder > bladlose) {
                s("Her chest is flushed, rising and falling quickly as she pants.");
            } else {
                s("She rips at your shirt and runs her cool hands all over your chest.");
            }
            xbra = 1;
        }
        c(locstack[0], "Continue...");
    }

    function topanties() {
        arousal += 4;
        if (!xskirt) {
            s(sextopantiesquote);
            if (bladder > bladlose) {
                s("She suddenly slams her legs together.");
                s(girltalk + "What are you doing? I'm nearly wetting myself!");
            }
        } else {
            if (bladder > bladlose)
                s("Her panties are stretched around the bulge of her unbelievably round and hard bladder.");
            s("You slip her damp panties down to reveal her curly pubes and moist warm pussy.");
            if (bladder > blademer) {
                s("It's spasmodically contracting as she fights to hold her pee.");
            } else {
                s(girlname + " pulls at your boxers, freeing your dick and stroking the shaft lightly.");
            }
            xpanties = 1;
        }
        c(locstack[0], "Continue...");
    }

    function resetclothes() {
        xpanties = 0;
        xbra = 0;
        xskirt = 0;
        xtop = 0
    }

    function resetmoves() {
        kneck = 0;
        kthigh = 0;
        kpussy = 0;
        kbreast = 0;
        tthigh = 0;
        tpussy = 0;
        tbreast = 0;
        tass = 0;
    }

    //TODO chance of failure upon pausing(still cuming)
    function fucknow() {
        fuckingnow = 1;
        s("You pull her on top of you and stick it into her soft, wet snatch.  It feels <i>so</i> good.");
        if (bladder > bladlose) {
            s("Her rock hard bladder rubs on your shaft through the thin wall of her vagina.");
        }
        if (bladder > blademer) {
            s("The spasms as she fights her impulse to pee combined with the thought that she's within seconds of wetting the bed with you inside her bring you to the edge.  You're about to cum!");
        } else {
            s("She moans with pleasure and you feel like you're about to cum already!");
        }
        c("fuckher2", "Keep fucking her");
        c("fuckher2b", "Pause for a second to regain control");
    }

    function fuckher2() {
        s("You keep pumping.");
        s("And you can't hold back.  You shoot your load and ram deep inside her.");
        if (bladder > blademer) {
            s("The sudden shock is too much for her and you feel the pee flowing from her cunt and filling the space above your shaft.");
            s("You relax just a little bit, and pee cascades onto the bed.");
            s("She's wet the bed.");
            c("wetbed", "Continue...");
        } else {
            bothcum();
        }
    }

    function prewet2() {
        s(girlname + " squeals: <b>NO!</b> <i>It's coming out!</i>");
        s("First a long squirt escapes from her throbbing pussy, and then another.");
        s("She collapses onto the bed as a thick stream cascades down to drench the sheets for almost a minute.");
        s("She lies there in relief ... not caring that much.");
        s("She's wet the bed.");
        c("wetbed", "Continue...");
    }

    function bothcum() {
        s("She arches her back and screams in ecstasy and collapses back onto the bed, breathing hard.");
        s("You both lie there in bed together, catching your breath.");
        if (bladder > bladneed)
            s("You cup her belly in your hand and feel a slight bulge, but " + girlname + " makes no move to get up right away.  You feel a slight regret that she wasn't absolutely desperate when she came.");
        else
            s("You run your hand over her tight belly, but you don't feel much of a bulge from her bladder.  She seems in no hurry to get up.  Sex without desperation is still sex.");
        c("gameover", "Continue...");
    }


    function wetbed() {
        flushdrank();
        s("You both lie there catching your breath.");
        s("The sheets are warm and soaked, her fragrance heavy in the air.");
        s(girltalk + "Well.... that was interesting.");
        c("gamewet", "Continue...");  // Wet the bed.
    }

    function fuckher2b() {
        s("You pull out for a second and regain a measure of control.");
        if (bladder > blademer) {
            s(girlname + " whispers: Hurry! It's coming out!!!");
            c("fuckher3", "Continue...");
        } else {
            s(girlname + " whispers in your ear: No! Don't stop.");
            c("fuckher3", "Continue...");
        }
    }

    function fuckher3() {
        if (bladder > blademer) {
            s("You thurst it back in, feeling the same unbearably stimulating combination of her struggle for control and the knowledge that she's on the edge of wetting the bed.");
            s(girltalk + "Please.  Stop.  It's <b>so</b> good, but I can't hold it anymore!");
            c("prewet2", "Keep fucking her");
            c("fuckher4", "Pause for a second");
        } else {
            s("You thurst it back in, feeling the her tight, wet pussy close around your shaft, and holding her heaving chest in your arms.");
            s("She starts moaning with each stroke: oh! oh! ungh! fuck! I'm going to cummmm!");
            c("bothcum", "Keep going.");
            c("fuckher2b", "Pause for a second");
        }
    }

    function fuckher4() {
        pushloc("fuckher6");
        s("You pause for a second.");
        if (bladder < bladsexlose)
            c("fuckher5", "Tell her: \"But it will be so much better if you just hold it another minute.\"");
        else
            c("fuckher5b", "Tell her: \"But it will be so much better if you just hold it another minute.\"");
        c("fuckher5b", "Tell her: \"You can hold on for just another minute - I know you can.\"");
        c("allowpee", "Stop and let her pee.");
        c("prewet2", "Keep going");
    }

    function fuckher5() {
        s(girlname + " takes a deep breath, and you hear her quitely counting to 3 as a calm takes over her body.");
        s(girltalk + "That would be more fun, wouldn't it?");
        s(girltalk + "Okay.  I'm going to try.");
        s(girltalk + "But promise you won't be mad if I can't hold it.");
        c("fuckher6", "I promise...");
    }

    function fuckher5b() {
        s(girlname + " takes a deep breath.  Then she gasps.");
        prewet2();
    }

    function fuckher6() {
        if (bladder < bladneed) {
            fuckher6b()
        } else {
            s(girlname + " pulls you back into her like a possessed woman and you start pumping quickly.");
            s("She's moaning and bucking her hips in seconds - and you can feel yourself on the verge of shooting your load.");
            if (bladder < bladcumlose)
                s("Suddenly " + girlname + " cries out and you feel her pussy grip your shaft hard.  You can't hold out one second longer.  Her orgasmic spasms are massaging your penis, she's fighting an overwhelming impulse to pee just for you, and she's absolutely the sexiest thing you've ever seen in the throes of her ecstasy.");
            else
                s("Suddenly " + girlname + " cries out and you feel her pussy grip your shaft hard.  She momentarily loses control and a hot jet of pee squirts out.<br>You can't hold out one second longer.  Her orgasmic spasms are massaging your penis, she's fighting an overwhelming impulse to pee just for you, and she's absolutely the sexiest thing you've ever seen in the throes of her ecstasy.");
            s("It's over.");
            s("You both lie there for about 20 seconds as you catch your breath and the contractions subside.");
            if (bladder >= bladcumlose)
                s("You feel the spurt of pee she released slowly trickle down and form a wet spot on the bed.");

            c("fuckher7", "Continue");
        }
    }

    function fuckher6b() {
        s(girlname + " smiles seductively at you as she slowly climbs back on the bed.");
        s("She wastes no time with climbing back on top of you and you quickly push your dick in again.");
        s("She's moaning and bucking her hips in seconds - and you can feel yourself on the verge of shooting your load.");
        s("Suddenly " + girlname + " cries out and you feel her pussy grip your shaft hard. You can't hold out one second longer. Her orgasmic spasms are massaging your penis, and she's absolutely the sexiest thing you've ever seen in the throas of her ecstasy.");
        s("You both lie there in bed together, catching your breath.");
        s("You run your hand over her tight belly, maybe you should've let her hold it after all.");
        s("Maybe next time.");
        c("gameover", "Continue...");
    }

    function fuckher7() {
        s("You hug her close to your body, but she gasps and struggles... 20 seconds was as long as she could take.");
        s(girltalk + "It's coming out - I can't stop it!");

        timeheld = thetime - lastpeetime;

        s("You quickly release her and she bounces out of bed, both hands pressed into her crotch.  You know the only thing holding in her pee now is her finger jammed into her pee hole.");
        s("She doesn't have far to go - the bathroom is steps from the bed.");
        s("She doesn't stop to close the door, and her pee begins flowing in a waterfall even before she sits on the toilet.  Her legs are open towards you and she's bent slightly forward, letting her firm breasts hang down.");
        s("The hissing is loud, and even from the bed you can smell a slight fragrance from the hot pee she held just for you.");
        s("You stare at the stream as it cascades from her crotch for nearly a minute, and you start to feel yourself getting hard again....");
        c("gamewon", "Continue...");
    }

    function breakmovie() {
        s("You try the door with your key...");
        if (bladder > blademer) {
            s(girltalk + sayhero[randcounter]);
            attraction += 3;
        }
        displayneed();
        displayyourneed();
        c("darkmovie", "Continue...");
    }


    function removie() {
        theaterkey = 0;
        pushloc("themovie");
        themovie();
    }

    //TODO fix thehold my purse
    function darkmovie() {
        if (locstack[0] !== "darkmovie") {
            s("You and " + girlname + " enter the movie theater.  It's dark, silent and deserted.");
            pushloc("darkmovie");
        } else {
            s("You are with " + girlname + " in the closed movie theater.");
        }

        showneed();
        displayyourneed();

        if (bladder > bladlose) wetherself();
        else if (yourbladder > yourbladlose) wetyourself();
        else if (gottagoflag > 0) preventpee();
        else {
            c("stealsoda", "Get a soda.");
            standobjs();
            if (!checkedherout) c("checkherout", "Check her out.");
            if (yourbladder > yourbladurge)
                c("youpee", "Go to the bathroom.");
            c("leavehm", "Leave the theater.");
        }
    }

    function themovie() {
        if (seenmovie && locstack[0] === "driveout" && thetime < theaterclosingtime) {
            s(girlname + " giggles: But we've already been to the theater, silly!");
            if (theaterkey > 0)
                c("removie", "But I found this key I have to return!");
            c(locstack[0], "Continue...");
        } else {
            if ((thetime < theaterclosingtime) || locstack[0] === "themovie") {
                if (locstack[0] !== "themovie") {
                    s("You and " + girlname + " arrive at the movie theater.");
                    pushloc("themovie");
                } else {
                    s("You are with " + girlname + " in the movie theater.");
                }

                showneed();
                displayyourneed();
                if (bladder > bladlose) wetherself();
                else if (yourbladder > yourbladlose) wetyourself();
                else {
                    if (gottagoflag > 0) {
                        preventpee();
                    } else {
                        c("buysoda", "Buy a soda.");
                        c("askmovie", "Ask her which movie she wants to watch.");
                        c("choosemovie", "Ask her to watch a movie.");
                        if (yourbladder > yourbladurge)
                            c("youpee", "Go to the bathroom.");
                        standobjs();
                    }
                    c("leavehm", "Leave The Movie Theater.");
                }
            } else itsclosed("themovie");
        }
    }

    function askmovie() {
        if (moviecounter === 0) {
            askedfavourite = 1;
            let moviename;
            if (favoritemovie === "theurge") moviename = "The Urge";
            if (favoritemovie === "thedesp") moviename = "Desperate Houswives";
            if (favoritemovie === "thectrl") moviename = "Control Yourself";
            if (favoritemovie === "thelitr") moviename = "2 Liters";
            s(girlname + "smiles at you.");
            s(girltalk + "I'd love to see " + moviename + ".");
            c("moviefavor", "Let's watch that then.");
            if (favoritemovie === "theurge")
                c("chooseothermovie", "Nah. Horror flicks are boring.");
            if (favoritemovie === "thedesp")
                c("chooseothermovie", "Nah. That's a chick flick!");
            if (favoritemovie === "thectrl")
                c("chooseothermovie", "Nah. College films are stupid.");
            if (favoritemovie === "thelitr")
                c("chooseothermovie", "Nah. I'm really not into crime and punishment.");
        } else {
            s(girlname + " laughs: Two movies in one night?  Let's go do something else!");
            c(locstack[0], "Continue...");
        }
    }

    function chooseothermovie() {
        s("The other movies that are playing:");
        if (favoritemovie !== "theurge")
            c("movieurge", "The Urge - <i>A horror flick</i>");
        if (favoritemovie !== "thedesp")
            c("moviedesp", "Desperate Housewives : The Movie");
        if (favoritemovie !== "thectrl")
            c("moviectrl", "Control Yourself - <i>A romantic comedy</i>");
        if (favoritemovie !== "thelitr")
            c("movielitr", "2 Liters, 25 Hours - <i>A police drama</i>");

    }

    function choosemovie() {
        if (moviecounter === 0) {
            s("There are many movies playing:");
            c("movieurge", "The Urge - <i>A horror flick</i>");
            c("moviedesp", "Desperate Housewives : The Movie");
            c("moviectrl", "Control Yourself - <i>A romantic comedy</i>");
            c("movielitr", "2 Liters, 25 Hours - <i>A police drama</i>");
        } else {
            s(girlname + " laughs: Two movies in one night?  Let's go do something else!");
            c(locstack[0], "Continue...");
        }
    }

    function movieurge() {
        moviechoice = 0;
        if (favoritemovie === "theurge") premoviepee(); else movieargue();
    }

    function moviedesp() {
        moviechoice = 1;
        if (favoritemovie === "thedesp") premoviepee(); else movieargue();
    }

    function moviectrl() {
        moviechoice = 2;
        if (favoritemovie === "thectrl") premoviepee(); else movieargue();
    }

    function movielitr() {
        moviechoice = 3;
        if (favoritemovie === "thelitr") premoviepee(); else movieargue();
    }

    function movieargue() {
        if (askedfavourite) {
            s("She looks like she wants to argue, but doesn't.");
            attraction -= 5;
            premoviepee()
        } else {
            let moviename;
            if (favoritemovie === "theurge") moviename = "The Urge";
            if (favoritemovie === "thedesp") moviename = "Desperate Houswives";
            if (favoritemovie === "thectrl") moviename = "Control Yourself";
            if (favoritemovie === "thelitr") moviename = "2 Liters";
            s(girlname + " looks you directly in the eyes and a pout forms on her lips.");
            s(girltalk + "But I wanna watch " + moviename + "!");
            c("moviefavor", "Okay.  But you owe me one.");
            if (favoritemovie === "theurge")
                c("premoviepee", "Nah. Horror flicks are boring.");
            if (favoritemovie === "thedesp")
                c("premoviepee", "Nah. That's a chick flick!");
            if (favoritemovie === "thectrl")
                c("premoviepee", "Nah. College films are stupid.");
            if (favoritemovie === "thelitr")
                c("premoviepee", "Nah. I'm really not into crime and punishment.");
        }
    }

    //TODO figure out moviename
    function moviefavor() {
        if (favoritemovie === "theurge") {
            moviename = "The Urge";
            moviechoice = 0;
        }
        if (favoritemovie === "thedesp") {
            moviename = "Desperate Houswives";
            moviechoice = 1;
        }
        if (favoritemovie === "thectrl") {
            moviename = "Control Yourself";
            moviechoice = 2;
        }
        if (favoritemovie === "thelitr") {
            moviename = "2 Liters";
            moviechoice = 3;
        }

        if (!askedfavourite) {
            owedfavor += 1;
        } else {
            attraction += 2;
        }
        premoviepee();
    }

    //TODO figure out duplicate continue's
    function premoviepee() {
        pushloc("domovie");
        changevenueflag = 1;//TODO probs delete
        showneed();
        displayyourneed();
        if (gottagoflag > 0) {
            c("holdit", "Ask her to hold it.");
            c("allowpee", "Let her go.");
        } else if (yourbladder > yourbladneed) {
            c("youpee", "Use the bathroom before watching the movie.");
            c(locstack[0], "Buy the tickets and head over to find the auditorium.");
        } else {
            s("You buy tickets and head over to find the auditorium.");
            c(locstack[0], "Continue...");
        }
    }

    //TODO you can go to the bathroom if you're desperate
    function domovie() {
        if (locstack[0] !== "domovie") {
            s("You and " + girlname + " enter the darkened theater.");
            pushloc("domovie");
            moviecounter = 0;
        } else {
            s("You are watching the movie.");
            moviecounter += 1;
        }

        seenmovie = 1;

        if (moviecounter >= 7) {
            s("The movie has ended.");
            poploc();
            changevenueflag = 1;
        } else {
            if (moviechoice === 0) s(moviedesc0[moviecounter]);
            else if (moviechoice === 1) s(moviedesc1[moviecounter]);
            else if (moviechoice === 2) s(moviedesc2[moviecounter]);
            else s(moviedesc3[moviecounter]);
        }

        s(girlname + " is sitting beside you.");
        if (randomchoice(4)) noteholding();

        showneed();
        displayyourneed();
        if (bladder > bladlose) wetherself();
        else if (yourbladder > yourbladlose) wetyourself();
        else {
            if (gottagoflag > 0) {
                preventpee();
            } else {
                c("movieromance", "Reach over and hold her hand.");
                c("moviesex", "Reach over and touch her thigh.");
                c("moviescary", "Lean closer to her.");
                c("moviedoh", "Look her in the eyes.");
            }
            if (moviecounter < 7) c("leavehm", "Leave the theater.");
        }
    }

    // moviedesc - 0 : Anticipate
    //             1 : Strange
    //             2 : Scary
    //             3 : Sexy
    //             4 : Romantic
    //             5 : Sexy
    //             6 : Romantic


    function movieromance() {
        s("You reach over and hold your hand in hers.");
        if (moviecounter === 4 || moviecounter === 6 || attraction > 30) {
            s("She gives your hand a squeeze.");
            attraction += 3;
            shyness -= 3;
        } else {
            s("Her hand is kind of cold.");
        }
        c(locstack[0], "Continue...");
    }

    function moviesex() {
        s("You reach over and brush her thigh lightly with the back of your hand.");
        if (moviecounter === 3 || moviecounter === 5 || attraction > 70) {
            s(thighresp[randcounter]);
            incrandom();
            attraction += 3;
            shyness -= 3;
        } else {
            s("She firmly moves your hand off her leg.");
        }
        c(locstack[0], "Continue...");
    }

    function moviescary() {
        s("You lean towards her.");
        if (moviecounter === 2 || attraction > 40) {
            s("She leans back toward you and puts her hand in yours.");
            attraction += 3;
            shyness -= 3;
        } else {
            s("She doesn't seem to notice.");
        }
        c(locstack[0], "Continue...");
    }

    function moviedoh() {
        s("You look over at her sitting beside you.");
        if (moviecounter === 1 || attraction > 50) {
            s("... and find her staring back at you.");
            s("Your eyes meet, and she smiles.");
            attraction += 3;
            shyness -= 3;
        } else {
            s("... and see her intently watching the movie.");
        }
        c(locstack[0], "Continue...");
    }

    function breakbar() {
        s("You try the door with your key...");
        if (bladder > blademer) {
            s(girltalk + sayhero[randcounter]);
            attraction += 3;
        }
        incrandom();
        displayneed();
        displayyourneed();
        c("darkbar", "Continue...");
    }


    function rebar() {
        barkey = 0;
        pushloc("thebar");
        thebar();
    }

    function solobar() {
        if (locstack[0] !== "solobar") {
            pushloc("solobar");
            flushdrank();
            setgirl(bargirlnames[randcounter]);
            incrandom();
            bladder = bladlose / 2;
            askholditcounter = 0;
            shyness = 20;
            attraction = 100;
            s("You drive around and find ... a different sort of bar.");
            s("Pushing open the door, you are greeted by a short shorted, tight topped, braless, thong wearing young woman who sits down next to you and says:");
            s(girltalk + " Hi!  I'm " + girlname + ".  Buy me a drink?");
            displayneed();
        } else {
            s("You are in a shady Bar with a scantily clad companion " + girlname + " .");
            withgirl = 1;
            showneed();
        }
        displayyourneed();
        if (bladder > bladlose) wetherself();
        else if (yourbladder > yourbladlose) wetyourself();
        else if (gottagoflag) {
            preventpee();
        } else {
            c("solotalk", "Make conversation with " + girlname);
            c("solodrink", "Buy " + girlname + " a drink");
        }
        c("sololeave", "Leave the bar.");
    }

    function sololeave() {
        withgirl = 0;
        goback();
    }

    function solodrink() {
        if (money >= 8) {
            s("You buy a bargirl drink for $8.00.");
            money -= 8;
            s(girlname + " smiles, thanks you, and downs the drink.");
            tummy += 100;
        } else s("You don't have enough money!");
        c(locstack[0], "Continue...");
    }

    function nopeesolodrink() {
        if (money >= 8) {
            if (bladder < blademer) {
                s("You buy a bargirl drink for $8.00.");
                money -= 8;
                tummy += 100;
                s(girlname + " looks a little worried and starts to say something, but she stops, smiles, and sips the drink.");
                showneed();
                c(locstack[0], "Continue...");
            } else {
                s(girltalk + " Sorry, but I <b><i>Really</i></b> have to go now.");
                displayneed();
                c("indepee", "Continue...");
            }
        } else {
            s("You don't have enough money!");
            c("indepee", "Continue...");
        }
    }

    function solotalk() {
        s("You try to make conversation with your companion.");
        if (bladder < blademer)
            s("She seems interested in your ability to buy her another weak drink.");
        else
            s("She seems to be concentrating on not wetting herself.");
        if (bladder < blademer) {
            s(bargirlhotness[randcounter]);
            incrandom();
        } else {
            s(bargirlemerhotness[randcounter]);
            incrandom();
        }
        c(locstack[0], "Continue...");
    }


    function darkbar() {
        if (locstack[0] !== "darkbar") {
            s("You and " + girlname + " enter the Bar.  It's dark, silent and deserted.");
            pushloc("darkbar");
        } else {
            s("You are with " + girlname + " in the closed Bar.");
        }

        showneed();
        displayyourneed();
        if (bladder > bladlose) wetherself();
        else if (yourbladder > yourbladlose) wetyourself();
        else if (gottagoflag > 0) preventpee();
        else {
            c("stealbeer", "Get a beer.");
            standobjs();
            c("kissher", "Kiss her.");
            c("feelup", "Feel her up.");
            if (!checkedherout) c("checkherout", "Check her out.");
            if (yourbladder > yourbladurge) c("youpee", "Go to the bathroom.");
            c("leavehm", "Leave the bar.");
        }
    }

    // Publish a note about her holding it for you.
    // Depends on whether you asked her to hold it,
    // and emergency bladder state
    function noteholding() {
        if (bladder > blademer && askholditcounter) s(sheholds[randcounter]);
        incrandom();
    }

    //
    //  Publish a note about her looking like she has to go.
    //
    function interpbladder() {
        if (bladder > bladlose) s(interplose[randcounter]);
        else if (bladder > blademer) s(interpemer[randcounter]);
        else if (bladder > bladneed) s(interpneed[randcounter]);
        incrandom();
    }

    //TODO fix you losing control scene.
    //TODO fix boredom to be less harsh
    //TODO have bartopics be ore random
    function thebar() {
        //TODO figure out this mess of if statement combinations
        if (beenbar && locstack[0] === "driveout" && thetime < barclosingtime) {
            s(girlname + " giggles: But we've already been to the bar, silly!");
            if (barkey > 0)
                c("rebar", "But I found this key I have to return!");
            c(locstack[0], "Continue...");
        } else {
            if ((thetime < barclosingtime) || locstack[0] === "thebar") {
                if (locstack[0] !== "thebar") {
                    s("You and " + girlname + " enter the Bar, taking a couple of stools about halfway down.");
                    pushloc("thebar");
                } else {
                    s("You are with " + girlname + " in the Bar.");
                    if (randomchoice(3)) noteholding();
                    else if (randomchoice(5)) interpbladder();
                }
                displayyourneed();
                beenbar = 1;
                showneed();

                if (bartopic < 5 && gottagoflag < 1) {
                    s(girltalk + bartalk[bartopic]);
                } else if (gottagoflag < 1 && bladder < blademer) {
                    s(barmedresp[randcounter]); // she's bored
                    incrandom();
                    attraction -= 1;
                }

                if (bladder > bladlose) wetherself();
                else if (yourbladder > yourbladlose) wetyourself();
                else {
                    if (gottagoflag > 0) {
                        preventpee();
                    } else {
                        if (bartopic < 5) {
                            const ansorder = Math.floor(Math.random() * 3);
                            if (ansorder === 0) {
                                c("bartalkgood", bargoodans[bartopic]);
                                c("bartalkmed", barmedans[bartopic]);
                                c("bartalkbad", barbadans[bartopic]);
                            } else if (ansorder === 1) {
                                c("bartalkmed", barmedans[bartopic]);
                                c("bartalkgood", bargoodans[bartopic]);
                                c("bartalkbad", barbadans[bartopic]);
                            } else {
                                c("bartalkbad", barbadans[bartopic]);
                                c("bartalkgood", bargoodans[bartopic]);
                                c("bartalkmed", barmedans[bartopic]);
                            }
                        }
                        c("buybeer", "Buy a beer.");
                        if (barkey < 1) c("lookaround", "Look around.");
                        if (bartopic > 4 && gottagoflag < 1) noflirtflag = 0; else noflirtflag = 1;
                        standobjs();
                        if (yourbladder > yourbladurge)
                            c("youpee", "Go to the bathroom.");
                    }
                    c("leavehm", "Leave the bar.");
                }
            } else itsclosed("thebar");
        }
    }

    function bartalkgood() {
        s(bargoodresp[randcounter]);
        if (randomchoice(7)) s(stareather[bartopic]);
        incrandom();
        attraction += 3;
        bartopic += 1;
        c(locstack[0], "Continue...");
    }

    function bartalkmed() {
        s(barmedresp[randcounter]);
        incrandom();
        bartopic += 1;
        c(locstack[0], "Continue...");
    }

    function bartalkbad() {
        s(barbadresp[randcounter]);
        incrandom();
        attraction -= 3;
        bartopic += 1;
        c(locstack[0], "Continue...");
    }

    function sellpanties() {
        const price = 20 + Math.floor(Math.random() * 20);
        s("BARTENDER: I'll give you $" + price + " for those.");
        money += price;
        wetpanties -= 1;
        c(locstack[0], "Continue...");
    }

    function failmakeout() {
        shyness += 10;
        attraction -= 10;
        s(girltalk + "I don't feel comfortable going up there with you.");
        s(girltalk + "Please let's go somewhere else.");
        displayneed();
        displayyourneed();
        c(locstack[0], "Okay.  Sorry.");
    }

    function themakeout() {
        if (locstack[0] !== "themakeout") {
            if (attraction > gomakeoutthresh) {
                s("You and " + girlname + " drive up to the make-out spot.  It's dark and deserted, but has a beautiful view of the stars.");
                pushloc("themakeout");
            } else {
                s("You start to drive out to the makeout spot, up a winding hilly road.");
                s(girltalk + "Hey! Where are we going?");
                c("failmakeout", "There's this nice secluded spot I know...");
                c(locstack[0], "Ummmm... Actually I'm not sure.");
                return 0;
            }
        } else {
            s("You and " + girlname + " are at the make-out spot.");
            if (randomchoice(3)) noteholding();
            else if (randomchoice(5)) interpbladder();
        }

        beenmakeout = 1;
        showneed();
        displayyourneed();
        if (bladder > bladlose) wetherself();
        else if (yourbladder > yourbladlose) wetyourself();
        else {
            if (gottagoflag > 0) {
                preventpee();
                c("peeoutside", "Suggest that she pee outside.");
            } else {
                c("viewstars", "Suggest that you gaze at the stars.");
                c("thewalk", "Invite " + girlname + " to take a walk.");
                if (theaterkey < 1) c("lookaround", "Look around.");
                standobjs();
                if (yourbladder > yourbladurge)
                    c("ypeeoutside", "Pee outside.")
            }
            c("leavehm", "Drive off.");
        }
    }

    //TODO only round numbers
    function viewstars() {
        s("You hold hands and stare into the sky together.");
        displayneed();
        const rand = randomchoice(7);
        if (rand) {
            if (bladder < blademer && tummy > 30) {
                if (tummy >= blademer - bladder) {
                    tummy -= (blademer - bladder);
                    bladder = blademer;
                } else {
                    bladder += tummy;
                    tummy = 0;
                }
                s("The cold weather works some magic on " + girlname + "'s bladder.");
                displayneed();
            }
        } else {
            if (yourbladder < yourblademer && tummy > 30) {
                if (yourtummy >= yourblademer - yourbladder) {
                    yourtummy -= (yourblademer - yourbladder);
                    yourbladder = yourblademer;
                } else {
                    yourbladder += yourtummy;
                    yourtummy = 0;
                }
                //TODO better description
                s("The cold weather works some magic on your bladder.");
                displayyourneed();
            }
        }
            if (flirtcounter < 1) attraction += 5;
            flirtcounter += 4;
            c(locstack[0], "Continue...");
    }

    function thewalk() {
        if (locstack[0] !== "thewalk") {
            s("You and " + girlname + " decide to take a walk.  It's a warm, still night.");
            walkcounter = 0;
            pushloc("thewalk");
        } else {
            s("You and " + girlname + " are talking a walk together.");
        }

        showneed();
        displayyourneed();
        s(walkdesc[randcounter]);
        walkcounter++;
        if (bladder > bladlose) wetherself();
        else if (yourbladder > yourbladlose) wetyourself();
        else {
            if (randcounter === 5) {
                c("examinegate", "Investigate the open gate.");
            }
            incrandom();
            if (gottagoflag > 0) {
                preventpee();
                c("peeoutside", "Suggest that she pee on the ground.");
            } else {
                if (yourbladder > yourbladurge)
                    c("ypeeoutside", "Pee outside.");
                standobjs();
                c(locstack[0], "Keep walking...");
            }
            c("goback", "Walk back to the car.");
        }
    }

    function examinegate() {

        s("You slowly open the gate and peer behind.");
        if (walkcounter < 10) {
            s("The yard beyond is dark, illuminated only by starlight.");
            if (shyness < 30 && attraction > 75) {
                s(girltalk + "Hey!  Let's check it out.");
                c("theyard", "Take her into the dark yard.");
            }
        } else {
            s(girlname + " gasps: We've made it to the beach!");
            s("There's sand beyond the gate, and you can hear the calm waves breaking on the shore.");
            c("thebeach", "Visit the beach.");
        }
        c(locstack[0], "Continue onward...");
    }

    function theyard() {
        if (locstack[0] !== "theyard") {
            s("You and " + girlname + " quietly enter the yard.  The grass is soft and slightly damp under your feet.");
            pushloc("theyard");
        } else {
            s("You and " + girlname + " are in somebody's back yard.");
        }

        s("There is a hot tub here.");

        showneed();
        displayyourneed();
        if (bladder > bladlose) wetherself();
        else if (yourbladder > yourbladlose) wetyourself();
        else {
            c("prehottub", "Suggest you take a dip in the tub.");
            c("kissher", "Kiss her.");
            c("feelup", "Feel her up.");
            if (gottagoflag > 0) {
                preventpee();
                c("peeoutside", "Suggest that she pee on the ground.");
            } else {
                standobjs();
                if (!checkedherout) c("checkherout", "Check her out.");
            }
            if (yourbladder > yourbladurge)
                c("ypeeoutside", "Pee outside.");
            c("goback", "Leave the yard.");
        }
    }

    function prehottub() {
        if (attraction > hottubthresh && shyness < 12) {
            s(girltalk + "Are you sure it's going to be alright?  What if somebody sees us?");
            showneed();
            displayyourneed();
            c("thehottub", "Don't worry - it's really dark out here.");
            c(locstack[0], "I'm not so sure...");
        } else {
            s(girltalk + "But I didn't bring a bathing suit!");
            c(locstack[0], "I guess not...");
        }
    }

    //TODO she can pee in the hottub if she's not about to burst
    //TODO fix need dialogue
    function thehottub() {
        if (locstack[0] !== "thehottub") {
            s("You and " + girlname + " quickly strip off your clothes in the cover of the dark yard.");
            s("You slip into the warm water of the hot tub, and watch as " + girlname + ", now completely nude, steps in to join you.");
            s("She looks so sexy in the starlight, her pussy masked in darkness and her erect nipples silhouetted against the dim sky.");
            s("Though it is dark, your eyes caress the shadows of her tight curves as they slowly submerge next to you.");
            pushloc("thehottub");
        } else {
            s("You and " + girlname + " are in the hot tub.");
        }

        showneed();
        displayyourneed();
        if (bladder > bladlose) wetherself();
        else if (yourbladder > yourbladlose) wetyourself();
        else {
            c("kissher", "Kiss her.");
            c("feelup", "Feel her up.");
            if (attraction >= 130 && shyness <= 0) {
                c("tubsex", "Make out with her.");
            }
            if (gottagoflag > 0) {
                preventpee();
                c("peeintub", "Suggest that she pee in the tub.");
            } else {
                standobjs();
                if (yourbladder > yourbladurge)
                    c("ypeeintub", "Pee in the hottub.");
            }
            c("goback", "Get out of the tub.");
        }
    }


    function thebeach() {
        if (locstack[0] !== "thebeach") {
            s("You and " + girlname + " walk out onto the sand.  It makes a soft swooshing noise as you step, like boots on dry snow.");
            pushloc("thebeach");
            askedswim = 0;
        } else {
            s("You and " + girlname + " are on the dark beach.");
            if (askedswim > 0) askedswim--;
        }

        if (bladder > blademer && shyness > 15 && !askedswim) {
            displayneed();
            askedswim = 7;
            s(girltalk + " Hey!  Want to go for a swim together?");
            s(girlname + " seems strangely insistent.  You realize that neither of you has swimming gear, so this means you get to see her naked.  Or at least see as much as you can in the dark.");
            c("beachswim", "Sure, let's go for a swim!");
            c(locstack[0], "Nah.  We didn't bring swimsuits.");
        } else {
            showneed();
            displayyourneed();
            if (bladder > bladlose) wetherself();
            else if (yourbladder > yourbladlose) wetyourself();
            else {
                if (gottagoflag > 0) {
                    preventpee();
                    c("peeoutside", "Suggest that she pee on the sand.");
                } else {
                    c("kissher", "Kiss her.");
                    c("feelup", "Feel her up.");
                    if (attraction > 100 && shyness < 10)
                        c("beachsex", "Make out with her.");
                    standobjs();
                    if (!checkedherout) c("checkherout", "Check her out.");
                    if (yourbladder > yourbladurge)
                        c("ypeeoutside", "Pee on the sand.");
                }
                c("goback", "Leave the beach.");
            }
        }
    }

    function beachswim() {
        pushloc("beachswim");
        s(girlname + swimstripquote);
        if (pantycolor === "none")
            s(swimstripquotebare);
        else
            s(swimstripquotepanties);
        c("beachswim2", "Join her.");
        if (pantycolor !== "none")
            c("beachswim2b", "Tell her that her panties are going to get wet.");
        c("beachswim2c", "Stand and watch.");
    }

    function beachswim2() {
        s("You peel off your clothes and take her hand, walking slowly into the warm water.");
        displayneed();
        displayyourneed();
        s("It's dark, so you can't really see what she's doing.  You hear the swooshing of the water as you walk together.");
        c("beachswim3b", "Take her in your arms ...");
        c("beachswim3", "Continue ...");
    }

    function beachswim2b() {
        s("<b>YOU:</b> But your panties - they'll get wet!");
        s(girltalk + " How do you know they're not already wet?");
        s("She has a point there.");
        c("beachswim2", "Continue ...");
    }

    function beachswim2c() {
        if (pantycolor === "none")
            s(girlname + " is standing beside you naked in the dark.");
        else
            s(girlname + " is standing beside you in her " + pantycolor + " panties in the dark.");
        s(girltalk + " Aren't you going to come with me?");
        displayneed();
        displayyourneed();
        s("How can you resist the invitation of a sexy, naked girl to join her swimming?");
        c("beachswim2", "Of course I'll come with you.");
    }

    function beachswim3() {
        s("You walk hand in hand with " + girlname + " until you're waist deep in the calm water.");
        if (pantycolor === "none")
            s(girlname + " gasps as a wave touches her naked crotch.");
        else
            s(girlname + " gasps as a wave soaks the crotch of her " + pantycolor + " panties.");
        s("She squeezes your hand and you sense a shiver running up her spine.");
        c("beachswim4b", "Feel her up.");
        c("beachswim4", "Continue...");
    }

    function beachswim3b() {
        s("You take " + girlname + " in your arms and hug her close to you, standing knee-deep in the calm water.");
        s("She pulls her belly away from you and gasps, but you grab her butt and press it into your thigh.");
        if (pantycolor === "none")
            s("Her quivering bare pussy lips feel so wonderful pressed into your upper leg.");
        else
            s("Her warm, wet panties feel wonderful pressed into your upper leg.");
        s("<b>I've <u>really</u> got to pee!</b> she confesses, whispering in your ear.");
        c("beachswim4b", "Hold her close.");
        c("beachswim4", "Let her go.");
    }

    function beachswim4() {
        s(girlname + " pauses for a moment, and over the sound of the surf, you can barely hear the hiss of her urine hitting the water.");
        flushdrank();
        if (pantycolor === "none")
            s("She's right there beside you in the dark, naked and peeing into the water.");
        else
            s("She's right there beside you in the dark, peeing through her wet panties into the water.");
        c("beachswim5", "Continue ...");
    }

    function beachswim4b() {
        s(girlname + " pauses for a moment.");
        s("You run your hand up her smooth leg under the water.");
        s("The water is even warmer around her crotch.  Probing closer, you feel a jet of hot pee escaping from between her pussy lips, passing through your fingers and warming your leg.");
        flushdrank();
        s("You feel it slow, spurt a couple of times, and finally come to a stop.");
        c("beachswim5", "Continue ...");
    }

    function beachswim5() {
        s(girltalk + " maybe we should go back.  Could be sharks, you know!");
        s("You take her hand and lead her back to the beach where you dry off as well as you can and put your clothes back on.");
        if (pantycolor !== "none") {
            s("She hands you her wet panties.");
            s(girltalk + "Is there someplace you can put these?");
            wetpanties += 1;
            pantycolor = "none";
        }
        c("goback", "Continue ... ");
    }

    function tubsex() {
        if (locstack[0] !== "tubsex") {
            kisscounter = 0;
            pushloc("tubsex");
            arousal = 0;
            s("You pull " + girlname + " on your lap.");
            xskirt = 1;
            xtop = 1;
            xbra = 1;
            xpanties = 1;
        } else {
            s(girlname + " is sitting on your lap... naked.")
        }

        if (kisscounter > maxkiss) {
            s(girlname + " suddenly pulls away to sit back next to you.");
            s(girltalk + "You know, this just isn't working out.");
            resetclothes();
            if (rstmoves === 1) {
                resetmoves();
            }
            c("goback", "Continue...");
        }

        displayneed();
        displayyourneed();

        if (arousal < 40) {
            s("She seems very aroused.");
        } else if (arousal < 70) {
            s("She seems extremely aroused.");
        } else if (arousal < 100) {
            s("She seems unbelievably aroused.");
        } else if (arousal < 140) {
            s("She seems earthshatterinly aroused.");
        } else {
            s("She seems madly hot, but still reluctant to take that last step here in the hot tub.");
        }

        s("What will you do?");

        c("kissher", "Kiss her on the mouth.");
        if (!tthigh) c("touchthigh", "Touch her thigh");
        if (!tbreast) c("touchbreast", "Touch her breasts");
        if (!tass) c("touchass", "Touch her ass");
        if (!tpussy) c("touchpussy", "Touch her pussy");
        if (!kneck) c("kissneck", "Kiss her on the neck");
        if (!kbreast) c("kissbreast", "Kiss her on the nipple");
        if (arousal > 120) c("fucktry", "Fuck her");
        c("goback", "Lift her off of your lap.");

    }

    //TODO when making out attraction and shyness are updated?
    function beachsex() {
        if (locstack[0] !== "beachsex") {
            kisscounter = 0;
            pushloc("beachsex");
            arousal = 0;
            if (bladder > bladlose)
                s(girlname + " collapses onto the soft sand, pulling you on top of her.");
            else
                s(girlname + " pulls you down onto the soft sand.");
        } else {
            s("You are lying on the beach with " + girlname);
        }

        if (kisscounter > maxkiss) {
            s(girlname + " suddenly pulls away from you and sits up.");
            s(girltalk + "You know, this just isn't working out.");
            c("goback", "Continue...");
            resetclothes();
            if (rstmoves === 1) {
                resetmoves()
            }
        } else {

            displayneed();
            displayyourneed();
            if (pantycolor === "none") xpanties = 1;

            if (arousal < 40) {
                s("She seems very aroused.");
            } else if (arousal < 70) {
                s("She seems extremely aroused.");
            } else if (arousal < 100) {
                s("She seems unbelievably aroused.");
            } else if (arousal < 140) {
                s("She seems earthshatterinly aroused.");
            } else {
                s("She seems madly hot, but still reluctant to take that last step out here on the beach.");
            }

            s("What will you do?");

            c("kissher", "Kiss her on the mouth.");
            if (!tthigh && xskirt) c("touchthigh", "Touch her thigh");
            if (!tbreast && xtop) c("touchbreast", "Touch her breasts");
            if (!tass && xskirt) c("touchass", "Touch her ass");
            if (!tpussy && xskirt) c("touchpussy", "Touch her pussy");
            if (!kneck) c("kissneck", "Kiss her on the neck");
            if (!kbreast && xbra) c("kissbreast", "Kiss her on the nipple");
            if (!kthigh && xskirt) c("kissthigh", "Kiss her on the thigh");
            if (!kpussy && xskirt) c("kisspussy", "Kiss her on the pussy");
            if (!xskirt) c("toskirt", sextakeoffskirt);
            if (!xtop) c("totop", sextakeoffblouse);
            if (!xbra && xtop) c("tobra", "Take off her bra");
            if (!xpanties && xskirt) c("topanties", "Take off her panties");
            if (arousal > 120 && xskirt && xpanties) c("fucktry", "Fuck her");
            c("goback", "Get back up and dust yourself off.");
        }
    }

    function fucktry() {
        s("You try to put it in, but she pushes you away");
        s(girltalk + " Not here.  Later.");
        resetclothes();
        c("goback", "Continue...");
    }

    function gameover() {
        document.getElementById('textsp').innerHTML += "<p class='title'>Game Over, Dude! </p>"
            + "<p style='text-align: center; padding-right: 10%; font-style: italic'>You struck out</p>";
        s("<br>&nbsp;<br>&nbsp;");
        s("<br>&nbsp;<br>&nbsp;");
        s("<br>&nbsp;<br>&nbsp;");
        s("<div style='text-align:right'><i>Hit Reload to start over...</i></div>");
    }

    function gamewet() {
        document.getElementById('textsp').innerHTML += "<p class='title'>Woot! </p>"
            + "<p style='text-align: center; padding-right: 10%; font-style: italic'>you took her to bed while she was bursting</p>"
            + "<p style='text-align: center; padding-right: 10%; font-style: italic'>and she held it for you until she wet the bed.</p>";
        s("<br>&nbsp;<br>&nbsp;");
        s("Final Stats:");
        s("Time since last pee:" + timeheld + " minutes");
        s("Bladder contained:" + bladder + " ml");
        s("<br>&nbsp;<br>&nbsp;");
        s("<div style='text-align:right'><i>Hit Reload to start over...</i></div>");
    }

    function gamewon() {
        document.getElementById('textsp').innerHTML += "<p class='title'>You Won!! </p>"
            + "<p style='text-align: center; padding-right: 10%; font-style: italic'>you took her to bed while she was bursting.</p>";
        s("<br>&nbsp;<br>&nbsp;");
        s("Final Stats:");
        s("Time since last pee:" + timeheld + " minutes");
        s("Bladder contained:" + bladder + " ml");
        s("<br>&nbsp;<br>&nbsp;");
        s("<div style='text-align:right'><i>Hit Reload to start over...</i></div>");
    }

    //TODO this setup is painful, do something with format(or however that works in javascript)/ alternatively with a json setup where the file that is read is switched for these quotes
    function setupquotes() {
//
//
//  Generically, this is where all the clothing related quotes
//  are customized for the girl's clothing status...
//  currently, we're only set up for one default condition
//  - a skirt and blouse.
//
//

        if (heroutfit === "jeans") {

//
//
//  These are for tight blue jeans and a black t-shirt
//
//

// Her response to your touching her thighs during the movie
            thighresp = Array("She spreads her legs slightly, inviting your hand a bit higher.", "She places her hand on yours and moves it a little further between her legs.", "She shifts in her chair, pressing your hand between the her legs.", "Her breathing becomes audible and you feel the heat of her body through her thin jeans.", "She moves in her chair and your hand is suddenly between her thighs.", "She lets out a barely audible sigh and you feel gooseflesh form under your fingers.");


//  Feeling her up on the dancefloor
            feelher = Array("You put your hand on her butt.", "You reach around and put your hand on her breast.", "You put your hand on her thigh", "You reach around and put your hand on her belly.", "You press your body against her pubes.", "You slide your hand down under the waistband of her tight jeans.");
            feelres = Array("It's tight and smooth beneath the thin fabric of her tight jeans.", "It's warm and soft.  You feel the erect nipple through her thin t-shirt, and give it a tweak as your hand passes over.", "The skin is smooth and supple ... and just slightly sweaty.", "It's toned, warm and smooth.", "Her mons is warm, and you can feel the texture of her pubic hair through the thin fabric of her jeans.", "Her lower back is slightly sweaty, and your hand slips ever so slightly into the top of her butt crack.");
            feelpee = Array("You feel it clenching occasionally.", "You feel it suddenly firm with gooseflesh.", "You feel her muscles trembling under the smooth skin.", "It's swollen and rock hard.", "Her mons is burning, and she grinds it firmly back into you.", "You feel the top of her butt crack drenched in sweat.");
            feelyou = Array("sneaks her hand down the back of your pants squeezes your butt.", "reaches up under your shirt and rubs your back.", "lifts her leg between your thighs, rubbing it along the bottom of your dick.", "presses you closer, squeezing her breasts against your chest.", "presses her crotch into your leg.", "sneaks her hand down your pants and grabs your dick through the thin fabric of your underwear.");

            feelbad = Array("Hey! That tickles!", "No touchee!", "Stop it!", "Don't.  Just don't.", "Watch your hands, mister!", "What the?");


//  Various parts of the posing scene need to change
            posenorm = Array("seems a bit at a loss, but she gamely turns slightly, sticks out her hip, and looks straight at you with a hand on her hip.", "thinks a bit, turns her back to you, sticks out her chest and looks back over her shoulder, blowing you a kiss.", "bends slightly at the waist with both hands on her hips, her butt sticking out and breasts hanging.", "seductively turns and caresses her breast with one hand and her firm ass with the other.", "grabs a chair and sits backwards, her legs spread wide open around the back, tight jeans showing every detail of her crotch.", "seductively turns her back, bends over, and peels down her tight jeans just a little to give you a panty shot.");

            poseoutfit = Array("her jeans and t-shirt", "wedding dress", "pair of tight jeans and a tanktop", "one piece swimsuit", "pair of short shorts and a halter top", "grass hula skirt with a coconut bra");

            donoutfit = Array("",
                "She slips out of her t-shirt, then pulls her tight jeans down around her ankles and steps out.  Lifting the wedding dress above her head, she burrows into the white pile of fabric until her head emerges from the top.  She reaches around to zip up the tight zipper and turns to look for your approval.",
                "She unzips the confining wedding dress and steps out of it, picking up the pair of jeans.  Turning her back to you, she bends over and steps into the jeans, pulling them over her hips and squirming them into place.  They are a tight fit, made even tighter when she pulls up the zipper and fastens the clasp.  The tanktop slips over her head moments later and she's set.",
                "She quickly pulls off the tank top and then unclasps, unzips, and peels off the jeans.  Hesitating slightly, she removes her undergarments and stands completely nude for a moment before stepping into the top of the swimsuit and pulling the straps over her shoulders.  It's a thin fabric that shows every line of her gorgeous body.",
                "She pulls the straps from her shoulders and peels the swimsuit down her legs.  Without stopping to pull her underwear back on, she steps first into the short shorts, and then pulls the tight halter top on over her head.  Her nipples show through the halter top, and you catch a glimpse of pink up the loose crotch of her shorts as she turns to look at you.",
                "She drops her shorts without even unzipping them and quickly wraps the grass skirt around her waist.  The coconuts quickly replace her halter top giving you a glimpse of her erect nipples before she turns towards you again.");

            donemer = Array("",
                "She quickly slips out of her t-shirt, working her hips to keep her bladder under control, then pulls her tight jeans down around her ankles and quickly steps out.  Lifting the wedding dress above her head, she burrows into the white pile of fabric and you see her legs running in place under a plume of white lace until her head emerges from the top and she jams her hands into the fabric about where you expect her crotch to be.  As the spasm subsides, she reaches around to zip up the tight zipper and turns to look for your approval, breathing hard.",
                "She unzips the confining wedding dress and steels herself before she steps out of it, dancing around a bit before picking up the pair of jeans.  Turning her back to you, she bends over and steps into the jeans, pulling them over her hips and squirming them into place.  They are a tight fit, made even tighter against her swollen bladder when she pulls up the zipper and fastens the clasp with a gasp of effort.  She rubs her crotch through the thin fabric a couple of times and then removes her hands to slip the tanktop over her head moments later and she's set.  The bulge of her bladder and the mound of her pussy strain at the thin fabric.",
                "She quickly pulls off the tank top and then unclasps the jeans with a sigh of relief.  Unzipped and peel off quickly, the wadded up jeans are jammed between her legs for a few moments before being thrown to the side.  Breathing heavily, she removes her undergarments and stands completely nude for a moment before stepping into the top of the swimsuit and pulling the straps over her shoulders, strething the thin fabric into her crotch.  It's as if the suit actually makes the curve of her full bladder and lines of her straining pussy even more visible than when she was nude.",
                "She tries to pull the straps from her shoulders with one hand while the other massages her crotch, but eventually has to free both hands to peel the swimsuit down her legs.  Without stopping to pull her underwear back on, she steps first into the short shorts, and then pulls the tight halter top on over her head.  Her nipples show through the halter top, and she pulls up on the shorts until the crotch puts pressure on her pussy.  The pink skin and curly hair overflow past the thin straining fabric of the crotch.",
                "She drops her shorts without even unzipping them and quickly wraps the grass skirt around her waist.  She grabs a handfull of the grass in a fist and jams it into her crotch for a moment before the coconuts replace her halter top and she stands there swaying back and forth.");

//
//  Filling the champagne
//
            fillchampok = Array("She carefully fills the champagne flutes, pressing her body up to yours.", "She fills your flute, and then hers, catching a drip on her finger and sensously licking it off.", "She leans over you as she fills both flutes, offering you a view down her blouse.", "She kneels down to fill the flutes, and you can admire every curve of her butt outlines by her ultra-tight jeans.", "She sensually strokes her hand up and down the bottle before she picks it up and fills the flutes.", "She pours out two flutes worth and brings yours all the way up to your lips - her face within an inch of yours.");

//
//  Specific descriptions of the girl are re-optimized in the options
//  dialog for specific women.
//

            stareather_laura = Array("You find yourself distracted by her plump but tight ass, and thoughts of x-ray vision fill your head until you pull yourself back to reality.", "You notice her perky breasts and imagine yourself pulling her tight t-shirt aside and cupping them as they harden to your touch, but you catch yourself staring and look away.", "You stare at her lap, imagining beautiful brown curls hiding a soft and wet cunt sitting in the gap between her smooth, tanned thighs.  You quickly wipe the stupid grin off your face and pay attention.", "You concentrate on her firm thighs, tightly outlined in her painted-on jeans, and imagine running your hand up between her long legs and feeling the warm wetness.  You feel dizzy and snap back to reality.", "You stare at her perfect white teeth behind full lips and briefly imagine them wrapped around your dick before trying to re-mesh with reality.", "You look longingly at her tight jeans, imagining your hands grasping her waist, pulling at the zipper and peeling it off her to reveal what's underneath, but catch yourself staring too long and force yourself to reconnect with the real world.  You quickly suppress the thought and try to pay attention.");

            stareather_karen = Array("You find yourself distracted by her tiny ass, and thoughts of x-ray vision fill your head until you pull yourself back to reality.", "You notice her small perky breasts and imagine yourself pulling her tight t-shirt aside and cupping them as they harden to your touch, but you catch yourself staring and look away.", "You stare at her lap, imagining beautiful dark curls hiding a soft and wet cunt sitting in the gap between her trim thighs.  You quickly wipe the stupid grin off your face and pay attention.", "You concentrate on her firm thighs outlined in her painted-on jeans, and imagine running your hand up between her smooth little legs and feeling the warm wetness.  You feel dizzy and snap back to reality.", "You stare at her perfect white teeth behind thin red lips and briefly imagine them wrapped around your dick before trying to re-mesh with reality.", "You look longingly at her tight jeans, imagining your hands grasping her waist, pulling at the zipper and peeling it off her, then running down and cupping her beautiful ass, but catch yourself staring too long and force yourself to reconnect with the real world.  You quickly suppress the thought and try to pay attention.");

            stareather_jennifer = Array("You find yourself distracted by her full, supple ass, and thoughts of x-ray vision fill your head until you pull yourself back to reality.", "You notice her voluptuous breasts and imagine yourself pulling her tight t-shirt aside just a little and cupping them as they overflow into your waiting hands, but you catch yourself staring and look away.", "You stare at her lap, imagining beautiful blond curls hiding a soft and wet cunt sitting at the top of her smooth, firm thighs.  You quickly wipe the stupid grin off your face and pay attention.", "You concentrate on her long legs wrapped tightly in her painted-on jeans, and imagine running your hand up between her smooth tanned thighs and feeling the warm wetness.  You feel dizzy and snap back to reality.", "You stare at her perfect white teeth behind ruby red lips and briefly imagine them wrapped around your dick before trying to re-mesh with reality.", "You look longingly at her tight jeans, imagining your hands grasping her waist, pulling at the zipper and peeling it off her to reveal what's underneath, but catch yourself staring too long and force yourself to reconnect with the real world.  You quickly suppress the thought and try to pay attention.");

            stareather_melissa = Array("You find yourself distracted by her trim ass, and thoughts of x-ray vision fill your head until you pull yourself back to reality.", "You notice her full breasts and imagine yourself pulling her t-shirt aside just a little until they spill out into your hands, but you catch yourself staring and look away.", "You stare at her lap, imagining beautiful red curls hiding a soft and wet cunt sitting at the top of her smooth, firm thighs.  You quickly wipe the stupid grin off your face and pay attention.", "You concentrate on her long legs tightly wrapped in her painted-on jeans, and imagine running your hand up between her smooth tanned thighs and feeling the warm wetness.  You feel dizzy and snap back to reality.", "You stare at her perfect white teeth behind full lips and briefly imagine them wrapped around your dick before trying to re-mesh with reality.", "You look longingly at her tight jeans, imagining your hands grasping her waist, pulling at the zipper and peeling it off her while running across her marvelous behind, but catch yourself staring too long and force yourself to reconnect with the real world.  You quickly suppress the thought and try to pay attention.");

//
//  We always have to set her descriptive text correctly.
//
            if (basegirl === "Melissa") stareather = stareather_melissa;
            else if (basegirl === "Laura") stareather = stareather_laura;
            else if (basegirl === "Karen") stareather = stareather_karen;
            else stareather = stareather_jennifer;

//
//  Descriptions of her peeing out of sight.
//  peeprivate is when she's desperate.  peeprivate2 is when she's not.
//
            peeprivate = Array("You can imagine her panic in the bathroom as she sees the toilet and feels it starting to come out before she even has a chance to peel down her tight jeans",
                "You visualize her grabbing her crotch through her jeans the moment she sees the toilet and struggling to control it long enough to peel her jeans off",
                "You can imagine her finally relaxing over the toilet, pee pouring from her crotch for nearly a full minute.",
                "You can imagine her in front of the toilet, too desperate to even close the door before emptying her overfilled bladder",
                "You can only guess at her frenzied antics in front of the toilet as her struggling pee hole is finally allowed to relax and her full bladder empties into the toilet.",
                "You imagine her struggles to control herself just long enough to get her clothing out of the way before she empties her overtaxed bladder into the toilet.");

            peeprivate2 = Array("You are left to imagine the her finding a stall, carefully closing the door and peeling down her tight jeans to use the toilet in private.",
                "You are left alone with only your imagination of her releasing her pent up pee into the toilet.",
                "You can only speculate what she's doing in there - Is there a line?  Does she consider the sink?  The floor drain?",
                "You can only fantasize about her final relief on the toilet - the pee pouring from her naked crotch",
                "You can just imagine the relief she feels as she pees in the privacy of the toilet.",
                "You can barely suppress the impulse to hold on to her - to follow her to the toilet where she quickly sits and empties her bladder.");

            youpeeprivate = ["You run up to the closest urinal, you panic as you feel it starting to come out but you quickly unzip and get the relieve you so desperately needed.",
                "You grab your crotch as you quickly make your way over to a urinal, you struggle to control it long enough to unzip, but you manage and find yourself enjoying the relieve of letting out all that pent up pee.",
                "You rush into the restroom and waste no time to walking over to a free urinal, you find yourself finally relaxing, pee shooting out of your penis for almost a full minute.",
                "You rush into the restroom, but to your dismay all urinals are occupied, you quickly dive into the stall, which thankfully is still empty, you're too desperate to even close the door before emptying your overfilled bladder.",
                "You practically dance in front of the urinal as you struggle to free yourself before your sphincter is finally allowed to relaxed and your full bladder empties into the urinal.",
                "You practically dive into the stall, in front of the toilet you struggle to control yourself long enough to pul your dick out of your boxers before emptying your overtaxed bladder into the toilet."
            ];

            youpeeprivate2 = ["You walk up to a urinal, slowly unzipping your trousers before using it.",
                "You walk up to a free urinal, pulling yourself out of your boxers before releasing your pent up pee.",
                "You wait until a urinal frees up before you relieve your filled bladder.",
                "The bathroom is empty, you briefly consider going into the sink but you are afraid of getting caught.",
                "You walk into the restroom, to find that all urinals are occupied, you instead choose to do your business in the empty stall.",
                "You kinda wish she had followed you into the bathroom, to see you empty your bladder into the toilet."];
//
//  She tries to dry off after wetting herself
//
            dryquote = Array("She daintily fans at her soaked crotch with her hand a couple of times, as if to dry it out.",
                "She wipes the soaked crotch of her jeans with her hand, flinging the fragrant drops to the ground.",
                "She presses her soaked jeans into her pussy and drops of pee well up and fall to the ground.",
                "She fans her crotch with her hand, as if to dry out her soaked jeans.",
                "She wipes at her soaked thighs with the back of her hand and then flings the drops to the ground.",
                "She feels her butt and the back of her jeans for a wet patch.  They're soaked, but it's difficult to tell.");


            peeshotquote = "She hurriedly grabs the shot glass and quickly rips down her tight jeans and " + pantycolor + " panties as she holds the edge of the glass against her pink pussy lips.";

            peeshotquotebare = "She grabs the shot glass and quickly rips down her tight jeans, holding the edge of the glass against her suddenly bare pussy.";

            peeskirtquote = "She sets the vase on the floor and rips down her tight jeans, quickly pulling her " + pantycolor + " panties down around her ankles as well.  She carefully squats above the vase, its edge barely touching her pink pussy lips.";

            peeskirtquotebare = "She sets the vase on the floor and rips down her tight jeans, revealing her bare crotch.  She carefully squats above the vase, its edge barely touching her pink pussy lips.";

            peetowelquote = " hurriedly pulls down her jeans and " + pantycolor + " panties in a single motion, jamming the paper towels between her legs and pressing them into her struggling crotch.";

            peetowelquotebare = " hurriedly pulls down her tight jeans, jamming the roll of paper towels directly onto her bare pussy lips.";

            peeoutsidequote = "She steps gingerly out of the car drops her tight jeans and " + pantycolor + " panties down around her ankles.  She carefully squats, looking around to make sure that nobody is watching.";

            peeoutsidequotebare = "She hops quickly out of the car and drops her tight jeans, revealing her bare crotch.  She carefully squats, quickly glancing around to make sure she's really not being watched.";

            peeoutsidebquote = "She pulls down her jeans and " + pantycolor + " panties around her ankles.  She carefully squats, looking around to make sure that nobody is watching.";

            peeoutsidebquotebare = "She rips down her jeans, revealing her bare crotch.  She carefully squats, quickly glancing around to make sure she's really not being watched.";

            wetherselfquote = "She takes off her jeans and slowly peels her soaked " + pantycolor + " panties down her dripping legs, holding them daintily between her thumb and forefinger.";

            firstmtgquote = " greets you at the door.  She's wearing a pair of tight blue jeans and an even tighter black form-fitting t-shirt.";

            firstmtgtightquote = "The jeans are so tight you can see the outlines of her " + pantycolor + " panties.";

            firstmtgtightquotebare = "You don't see any pantylines, despite the skin-tight jeans.";

            soakedseatquote = "She nervously brushes at her jeans before she gingerly sits on the soaked passenger seat.";


//
//
//  Used in peeing in trash can, soda cup, sink, floor
//
//
            peeprepquote = "She squirms out of her jeans and pulls her panties down with them.";
            peeprepquotebare = "She hikes squirms out of her jeans and you can just barely see her bare pussy in the dim light.";

            undressquote = " strips off her t-shirt and jeans, then shyly unclasps her bra, revealing her breasts briefly before turning her back to you.";
            undressquoteemer = " quickly peels off her t-shirt and throws it aside before grabbing at her crotch through the fabric of her tight jeans.  She bends over for a bit, and then gingerly squirms out of the jeans as well, her legs held closed as tightly as possible.";

            ptogetherquote = " rips down her skin-tight jeans and " + pantycolor + " panties, and is pissing like a racehorse before she even fully sits down on the seat.";

            ptogetherquotebare = " yanks down her skin-tight jeans, and is pissing like a racehorse before she even fully sits down on the seat.";

            ptogetheroutquote = "Her bladder can't be ignored, and she pulls her jeans and panties down around her ankles, quickly sqatting on the ground.";

            ptogetheroutquotebare = "Her bladder can't be ignored, and she pulls her jeans down to reveal her bare pussy, squatting quickly on the ground.";

            finishtogethroutquote = "She gets up and re-adjusts her panties over her still-damp crotch, pullin gher tight jeans firmly back into place.";

            finishtogetheroutquotebare = "She gets up and pulls on her jeans, checking for dampness soaking into the crotch.";

            ptogetherdumpquote = "You quickly help her pull down her skin-tight jeans and reach between her legs, running your hand up her hot and sweaty thighs to the damp gusset of her " + pantycolor + " panties.";

            ptogetherdumpquotebare = "You quickly help her pull her skin-tight jeans aside and reach between her legs, running your hand up her hot and sweaty thighs to reach the soft, moist flesh of her cunt.";

            finishtogetherdumpquote = "A huge puddle has formed as she squeezes off the last drops, and you wipe her pussy with your finger before smoothing her panties back into place and helping squeeze her back into the skin-tight blue jeans.";

            finishtogetherdumpquotebare = "A huge puddle has formed as she squeezes off the last drops, and you wipe her pussy with your finger before helping to squeeze her back into the skin-tight blue jeans.";

            sextakeoffskirt = "Take off her jeans";
            sextakeoffblouse = "Take off her t-shirt";

            sextouchthighquote = "You slip your hand between her legs and slide it up her inner thighs, feeling the smooth fabric of her jeans.";
            sextouchassquote = "You massage her ass through the thin fabric of her tight jeans.";
            sextouchpussyquote = "You reach between her legs and massage her pussy through the thin fabric of her skin-tight jeans and panties.";
            sexkissthighquote = "You lay your head in her lap and rub your cheek on her inner thigh through the thin fabric of her tight jeans.";
            sexkisspussyquote = "You bury your face in her lap in a vain attempt to stretch the fabric of her jeans, but instead you just put pressure on her bladder.";

            sextoskirtquoteemer = "The bulge of her overfull bladder is stretching out the waistband of her skin-tight jeans and making the zipper difficult to operate.";
            sextoskirtquote = "You unzip and tug down her skin-tight jeans to reveal her " + pantycolor + " panties beneath.";
            sextoskirtquotebare = "You unzip and pull down her skin-tight jeans like you were unwrapping a present.  Beneath them you find her curly pubes and nothing else.";

            sextopantiesquote = "You reach down the back of her tight jeans and try to tug her panties out, but they seem to be stuck.";

            swimstripquote = " is already peeling off her t-shirt and jeans.";
            swimstripquotebare = "She hesitates a second and then removes her lacy bra.  She stands completely naked, but it's difficult to see much in the warm darkness.";
            swimstripquotepanties = "She hesitates a second and then removes her lacy bra, leaving her " + pantycolor + " panties on.";

        } else {

//
//
//  These are for a light colored blouse and black skirt
//
//

// Her response to your touching her thighs during the movie
            thighresp = Array("She spreads her legs slightly, inviting your hand a bit higher.", "She places her hand on yours and moves it a little further between her legs.", "She shifts in her chair, pressing your hand between her smooth legs.", "Her breathing becomes audible and you feel the heat of her body under the skirt.", "She moves in her chair and your hand is suddenly under her skirt.", "She lets out a barely audible sigh and you feel gooseflesh form under your fingers.");


//  Feeling her up on the dancefloor
            feelher = Array("You put your hand on her butt.", "You reach around and put your hand on her breast.", "You put your hand on her thigh", "You reach around and put your hand on her belly.", "You press your body against her pubes.", "You slide your hand down under the elastic of her skirt.");
            feelres = Array("It's tight and smooth beneath her thin skirt.", "It's warm and soft.  You feel the erect nipple through her blouse, and give it a tweak as your hand passes over.", "The skin is smooth and supple ... and just slightly sweaty.", "It's toned, warm and smooth.", "Her mons is warm, and you can feel the texture of her pubic hair.", "Her lower back is slightly sweaty, and your hand slips ever so slightly into the top of her butt crack.");
            feelpee = Array("You feel it clenching occasionally.", "You feel it suddenly firm with gooseflesh.", "You feel her muscles trembling under the smooth skin.", "It's swollen and rock hard.", "Her mons is burning, and she grinds it firmly back into you.", "You feel the top of her butt crack drenched in sweat.");
            feelyou = Array("sneaks her hand down the back of your pants squeezes your butt.", "reaches up under your shirt and rubs your back.", "lifts her leg between your thighs, rubbing it along the bottom of your dick.", "presses you closer, squeezing her breasts against your chest.", "presses her crotch into your leg.", "sneaks her hand down your pants and grabs your dick through the thin fabric of your underwear.");

            feelbad = Array("Hey! That tickles!", "No touchee!", "Stop it!", "Don't.  Just don't.", "Watch your hands, mister!", "What the?");


//  Various parts of the posing scene need to change
            posenorm = Array("seems a bit at a loss, but she gamely turns slightly, sticks out her hip, and looks straight at you with a hand on her hip.", "thinks a bit, turns her back to you, sticks out her chest and looks back over her shoulder, blowing you a kiss.", "bends slightly at the waist with both hands on her hips, her butt sticking out and breasts hanging.", "seductively turns and caresses her breast with one hand and her firm ass with the other.", "grabs a chair and sits backwards, her legs spread wide open around the back.", "seductively turns her back, bends over, and flips up the back of her skirt to give you a panty shot.");

            poseoutfit = Array("her skirt and blouse", "wedding dress", "pair of tight jeans and a tanktop", "one piece swimsuit", "pair of short shorts and a halter top", "grass hula skirt with a coconut bra");

            donoutfit = Array("",
                "She unbuttons and removes her blouse, then pulls her skirt down around her ankles and steps out.  Lifting the wedding dress above her head, she burrows into the white pile of fabric until her head emerges from the top.  She reaches around to zip up the tight zipper and turns to look for your approval.",
                "She unzips the confining wedding dress and steps out of it, picking up the pair of jeans.  Turning her back to you, she bends over and steps into the jeans, pulling them over her hips and squirming them into place.  They are a tight fit, made even tighter when she pulls up the zipper and fastens the clasp.  The tanktop slips over her head moments later and she's set.",
                "She quickly pulls off the tank top and then unclasps, unzips, and peels off the jeans.  Hesitating slightly, she removes her undergarments and stands completely nude for a moment before stepping into the top of the swimsuit and pulling the straps over her shoulders.  It's a thin fabric that shows every line of her gorgeous body.",
                "She pulls the straps from her shoulders and peels the swimsuit down her legs.  Without stopping to pull her underwear back on, she steps first into the short shorts, and then pulls the tight halter top on over her head.  Her nipples show through the halter top, and you catch a glimpse of pink up the loose crotch of her shorts as she turns to look at you.",
                "She drops her shorts without even unzipping them and quickly wraps the grass skirt around her waist.  The coconuts quickly replace her halter top giving you a glimpse of her erect nipples before she turns towards you again.");

            donemer = Array("",
                "She unbuttons and removes her blouse, working her hips to keep her bladder under control, then pulls her skirt down around her ankles and quickly steps out.  Lifting the wedding dress above her head, she burrows into the white pile of fabric and you see her legs running in place under a plume of white lace until her head emerges from the top and she jams her hands into the fabric about where you expect her crotch to be.  As the spasm subsides, she reaches around to zip up the tight zipper and turns to look for your approval, breathing hard.",
                "She unzips the confining wedding dress and steels herself before she steps out of it, dancing around a bit before picking up the pair of jeans.  Turning her back to you, she bends over and steps into the jeans, pulling them over her hips and squirming them into place.  They are a tight fit, made even tighter against her swollen bladder when she pulls up the zipper and fastens the clasp with a gasp of effort.  She rubs her crotch through the thin fabric a couple of times and then removes her hands to slip the tanktop over her head moments later and she's set.  The bulge of her bladder and the mound of her pussy strain at the thin fabric.",
                "She quickly pulls off the tank top and then unclasps the jeans with a sigh of relief.  Unzipped and peel off quickly, the wadded up jeans are jammed between her legs for a few moments before being thrown to the side.  Breathing heavily, she removes her undergarments and stands completely nude for a moment before stepping into the top of the swimsuit and pulling the straps over her shoulders, strething the thin fabric into her crotch.  It's as if the suit actually makes the curve of her full bladder and lines of her straining pussy even more visible than when she was nude.",
                "She tries to pull the straps from her shoulders with one hand while the other massages her crotch, but eventually has to free both hands to peel the swimsuit down her legs.  Without stopping to pull her underwear back on, she steps first into the short shorts, and then pulls the tight halter top on over her head.  Her nipples show through the halter top, and she pulls up on the shorts until the crotch puts pressure on her pussy.  The pink skin and curly hair overflow past the thin straining fabric of the crotch.",
                "She drops her shorts without even unzipping them and quickly wraps the grass skirt around her waist.  She grabs a handfull of the grass in a fist and jams it into her crotch for a moment before the coconuts replace her halter top and she stands there swaying back and forth.");

//
//  Filling the champagne
//
            fillchampok = Array("She carefully fills the champagne flutes, pressing her body up to yours.", "She fills your flute, and then hers, catching a drip on her finger and sensously licking it off.", "She leans over you as she fills both flutes, offering you a view down her blouse.", "She kneels down to fill the flutes, and her skirt rides up giving you a nice view.", "She sensually strokes her hand up and down the bottle before she picks it up and fills the flutes.", "She pours out two flutes worth and brings yours all the way up to your lips - her face within an inch of yours.");

//
//  Specific descriptions of the girl are re-optimized in the options
//  dialog for specific women.
//

            stareather_laura = Array("You find yourself distracted by her plump but tight ass, and thoughts of x-ray vision fill your head until you pull yourself back to reality.", "You notice her perky breasts and imagine yourself pulling her blouse open and cupping them as they harden to your touch, but you catch yourself staring and look away.", "You stare at her lap, imagining beautiful brown curls hiding a soft and wet cunt sitting in the gap between her smooth, tanned thighs.  You quickly wipe the stupid grin off your face and pay attention.", "You concentrate on her firm thighs as they disappear up under her skirt, and imagine running your hand up between her long legs and feeling the warm wetness.  You feel dizzy and snap back to reality.", "You stare at her perfect white teeth behind full lips and briefly imagine them wrapped around your dick before trying to re-mesh with reality.", "You look longingly at her short skirt, imagining your hands grasping her waist, pulling at the zipper and peeling it off her to reveal what's underneath, but catch yourself staring too long and force yourself to reconnect with the real world.  You quickly suppress the thought and try to pay attention.");

            stareather_karen = Array("You find yourself distracted by her tiny ass, and thoughts of x-ray vision fill your head until you pull yourself back to reality.", "You notice her small perky breasts and imagine yourself pulling her blouse open and cupping them as they harden to your touch, but you catch yourself staring and look away.", "You stare at her lap, imagining beautiful dark curls hiding a soft and wet cunt sitting in the gap between her trim thighs.  You quickly wipe the stupid grin off your face and pay attention.", "You concentrate on her firm thighs as they disappear up under her skirt, and imagine running your hand up between her smooth little legs and feeling the warm wetness.  You feel dizzy and snap back to reality.", "You stare at her perfect white teeth behind thin red lips and briefly imagine them wrapped around your dick before trying to re-mesh with reality.", "You look longingly at her short skirt, imagining your hands grasping her waist, pulling at the zipper and peeling it off her, then running down and cupping her beautiful ass, but catch yourself staring too long and force yourself to reconnect with the real world.  You quickly suppress the thought and try to pay attention.");

            stareather_jennifer = Array("You find yourself distracted by her full, supple ass, and thoughts of x-ray vision fill your head until you pull yourself back to reality.", "You notice her voluptuous breasts and imagine yourself pulling her blouse down just a little and cupping them as they overflow into your waiting hands, but you catch yourself staring and look away.", "You stare at her lap, imagining beautiful blond curls hiding a soft and wet cunt sitting at the top of her smooth, firm thighs.  You quickly wipe the stupid grin off your face and pay attention.", "You concentrate on her long legs as they disappear up under her skirt, and imagine running your hand up between her smooth tanned thighs and feeling the warm wetness.  You feel dizzy and snap back to reality.", "You stare at her perfect white teeth behind ruby red lips and briefly imagine them wrapped around your dick before trying to re-mesh with reality.", "You look longingly at her short skirt, imagining your hands grasping her waist, pulling at the zipper and peeling it off her to reveal what's underneath, but catch yourself staring too long and force yourself to reconnect with the real world.  You quickly suppress the thought and try to pay attention.");

            stareather_melissa = Array("You find yourself distracted by her trim ass, and thoughts of x-ray vision fill your head until you pull yourself back to reality.", "You notice her full breasts and imagine yourself pulling her blouse down just a little until they spill out into your hands, but you catch yourself staring and look away.", "You stare at her lap, imagining beautiful red curls hiding a soft and wet cunt sitting at the top of her smooth, firm thighs.  You quickly wipe the stupid grin off your face and pay attention.", "You concentrate on her long legs as they disappear up under her skirt, and imagine running your hand up between her smooth tanned thighs and feeling the warm wetness.  You feel dizzy and snap back to reality.", "You stare at her perfect white teeth behind full lips and briefly imagine them wrapped around your dick before trying to re-mesh with reality.", "You look longingly at her short skirt, imagining your hands grasping her waist, pulling at the zipper and peeling it off her while running across her marvelous behind, but catch yourself staring too long and force yourself to reconnect with the real world.  You quickly suppress the thought and try to pay attention.");

//
//  We always have to set her descriptive text correctly.
//
            if (basegirl === "Melissa") stareather = stareather_melissa;
            else if (basegirl === "Laura") stareather = stareather_laura;
            else if (basegirl === "Karen") stareather = stareather_karen;
            else stareather = stareather_jennifer;

//
//  Descriptions of her peeing out of sight.
//  peeprivate is when she's desperate.  peeprivate2 is when she's not.
//
            peeprivate = Array("You can imagine her panic in the bathroom as she sees the toilet and feels it starting to come out before she even has a chance to peel down her skirt", "You visualize her grabbing her crotch through her skirt the moment she sees the toilet and struggling to control it long enough to get her skirt off", "You can imagine her finally relaxing over the toilet, pee pouring from her crotch for nearly a full minute.", "You can imagine her in front of the toilet, too desperate to even close the door before emptying her overfilled bladder", "You can only guess at her frenzied antics in front of the toilet as her struggling pee hole is finally allowed to relax and her full bladder empties into the toilet.", "You imagine her struggles to control herself just long enough to get her clothing out of the way before she empties her overtaxed bladder into the toilet.");

            peeprivate2 = Array("You are left to imagine the her finding a stall, carefully closing the door and hiking up her skirt to use the toilet in private.", "You are left alone with only your imagination of her releasing her pent up pee into the toilet.", "You can only speculate what she's doing in there - Is there a line?  Does she consider the sink?  The floor drain?", "You can only fantasize about her final relief on the toilet - the pee pouring from her naked crotch", "You can just imagine the relief she feels as she pees in the privacy of the toilet.", "You can barely suppress the impulse to hold on to her - to follow her to the toilet where she quickly sits and empties her bladder.");

//
//  She tries to dry off after wetting herself
//
            dryquote = Array("She daintily flaps her skirt a couple of times to air out her soaking crotch.",
                "She wipes her crotch with her hand, flinging the fragrant drops to the ground.",
                "She presses her skirt to her pussy and drops of pee soak into the fabric.",
                "She fans her crotch with her hand, as if to dry out her soaked pubes.",
                "She wipes at her thighs with the back of her hand and then dries it off on the fabric of her skirt.",
                "She feels the back of her skirt for a wet patch.  It doesn't seem like there's much damage.");


            peeshotquote = "She hurriedly grabs the shot glass and quickly lifts her skirt, pulling aside her " + pantycolor + " panties as she holds the edge of the glass against her pink pussy lips.";

            peeshotquotebare = "She grabs the shot glass and quickly lifts her skirt, holding the edge of the glass against her bare pussy.";

            peeskirtquote = "She sets the vase on the floor and lifts up her skirt, quickly pulling her " + pantycolor + " panties down around her ankles.  She carefully squats above the vase, its edge barely touching her pink pussy lips.";

            peeskirtquotebare = "She sets the vase on the floor and lifts up her skirt, revealing her bare crotch.  She carefully squats above the vase, its edge barely touching her pink pussy lips.";

            peetowelquote = " hurriedly lifts up her skirt, jamming the paper towels between her legs and pressing it into the crotch of her " + pantycolor + " panties.";

            peetowelquotebare = " hurriedly lifts up her skirt, jamming the roll of paper towels directly onto her bare pussy lips.";

            peeoutsidequote = "She steps gingerly out of the car lifts up her skirt, quickly pulling her " + pantycolor + " panties down around her ankles.  She carefully squats, looking around to make sure that nobody is watching.";

            peeoutsidequotebare = "She hops quickly out of the car and lifts up her skirt, revealing her bare crotch.  She carefully squats, quickly glancing around to make sure she's really not being watched.";

            peeoutsidebquote = "She lifts up her skirt, pulling her " + pantycolor + " panties down around her ankles.  She carefully squats, looking around to make sure that nobody is watching.";

            peeoutsidebquotebare = "She lifts up her skirt, revealing her bare crotch.  She carefully squats, quickly glancing around to make sure she's really not being watched.";

            wetherselfquote = "She lifts her skirt and slowly peels her soaked " + pantycolor + " panties down her dripping legs, holding them daintily between her thumb and forefinger.";

            firstmtgquote = " greets you at the door.  She's wearing a short black skirt and tight white blouse.";

            firstmtgtightquote = "The skirt is so tight you can see the outlines of her " + pantycolor + " panties.";

            firstmtgtightquotebare = "You don't see any pantylines, despite the tight skirt.";

            soakedseatquote = "She pulls her skirt out of the way and gingerly sits on the soaked passenger seat.";


//
//
//  Used in peeing in trash can, soda cup, sink, floor
//
//
            peeprepquote = "She hikes her skirt up and pulls her panties down around her ankles.";
            peeprepquotebare = "She hikes her skirt up and you can just barely see her bare pussy in the dim light.";

            undressquote = " strips off her top and skirt, then shyly unclasps her bra, revealing her breasts briefly before turning her back to you.";
            undressquoteemer = " quickly peels off her top and throws it aside before grabbing her crotch through the fabric of her skirt.  She bends over for a bit, and then gingerly pulls the skirt down, her legs held tightly together.";

            ptogetherquote = " rips down her skirt and " + pantycolor + " panties, and is pissing like a racehorse before she even fully sits down on the seat.";

            ptogetherquotebare = " yanks up her skirt, and is pissing like a racehorse before she even fully sits down on the seat.";

            ptogetheroutquote = "Her bladder can't be ignored, and she pulls her panties down around her ankles, quickly sqatting and lifting up her skirt.";

            ptogetheroutquotebare = "Her bladder can't be ignored, and she squats, lifting up her skirt to reveal her bare pussy.";

            finishtogethroutquote = "She gets up and re-adjusts her panties over her still-damp crotch, letting her skirt fall loosely back into place.";

            finishtogetheroutquotebare = "She gets up and smoothes her skirt to hide her still-damp crotch.";

            ptogetherdumpquote = "You reach quickly under her skirt, running your hand up her hot and sweaty thighs to the damp gusset of her " + pantycolor + " panties.";

            ptogetherdumpquotebare = "You reach quickly under her skirt, running your hand up her hot and sweaty thighs to reach the soft, moist flesh of her cunt.";

            finishtogetherdumpquote = "A huge puddle has formed as she squeezes off the last drops, and you wipe her pussy with your finger before smoothing her panties back into place and tugging her skirt into position.";

            finishtogetherdumpquotebare = "A huge puddle has formed as she squeezes off the last drops, and you wipe her pussy with your finger before letting her skirt fall back down.";

            sextakeoffskirt = "Take off her skirt";
            sextakeoffblouse = "Take off her blouse";

            sextouchthighquote = "You slip your hand under her skirt and slide it up her inner thighs.";
            sextouchassquote = "You massage her ass through the thin fabric of her skirt.";
            sextouchpussyquote = "You reach under her skirt and massage her pussy through the thin fabric of her panties.";
            sexkissthighquote = "You lay your head in her lap and rub your cheek on her inner thigh through the thin fabric of her skirt.";
            sexkisspussyquote = "You bury your face in her lap in a vain attempt to stretch her skirt, but instead you just put pressure on her bladder.";

            sextoskirtquoteemer = "The bulge of her overfull bladder is stretching out her skirt on top and making the zipper difficult to operate.";
            sextoskirtquote = "You unzip and tug down her skirt to reveal her " + pantycolor + " panties beneath.";
            sextoskirtquotebare = "You unzip and pull down her skirt like you were unwrapping a present.  Beneath it you find her curly pubes and nothing else.";

            sextopantiesquote = "You reach up under her skirt and try to tug her panties down, but they seem to be stuck.";

            swimstripquote = " is already peeling off her blouse and skirt.";
            swimstripquotebare = "She hesitates a second and then removes her lacy bra.  She stands completely naked, but it's difficult to see much in the warm darkness.";
            swimstripquotepanties = "She hesitates a second and then removes her lacy bra, leaving her " + pantycolor + " panties on.";
        }
    }

</script>
<!--TODO fix text flicker when start is loaded with picture-->
<link rel="stylesheet" type="text/css" href="style.css">
<div class="fullscreen">
    <div id="titlebar">
        <div id="credits">Game Engine 3.2a by drw</div>
        <div id="version">VER 4.2: June 24, 2020</div>
    </div>
    <br>
    <hr>
    <br>
    <div id="gamescreen">
        <div id="picture">
            <pre id="thepic"></pre>
        </div>
        <div id="textsp">
            <p class="title">Melissa Explains it All </p>
            <p style="text-align: center; padding-right: 10%;">This game contains mature content.</p>
            <!--            TODO change class-->
            <ul id="choices" class="choices-start">
                <li class="choices-items-start"><a href='javascript:go("start")'>Continue</a></li>
                <li class="choices-items-start"><a href='javascript:go("under18")'>Leave</a></li>
            </ul>
            <pre style="padding-top: 10vh;padding-left:30vw;"><br>  ((<br>  -))<br>  /\) <br> ( |)<br>   \ \<br>   _/ )<br>  //-/<br>  ||<br>  d/<br></pre>
        </div>
    </div>
    <div id="statsp">
        <table id="stats-bar">
            <tbody>
            <tr>
                <td>&nbsp;</td>
                <td class="stats-cells"><small>Money</small></td>
                <td class="stats-cells"><small>Attraction</small></td>
                <td class="stats-cells"><small>Shyness</small></td>
                <td class="stats-cells"><small>Tummy</small></td>
                <td class="stats-cells"><small>Bladder</small></td>
                <td class="stats-cells"><small>Time</small></td>
                <td class="stats-cells"><small>Your Tummy</small></td>
                <td class="stats-cells"><small>Your Bladder</small></td>
            </tr>
            <tr>
                <!--                TODO fix this-->
                <td>&nbsp;</td>
                <td id="mon" class="stats-cells-yellow" style="background-color: #FFFF90">$200</td>
                <td id="att" class="stats-cells-white" style="background-color: #ffffe0">10</td>
                <td id="shy" class="stats-cells-yellow" style="background-color: #ffff90">90</td>
                <td id="tum" class="stats-cells-white">92</td>
                <td id="blad" class="stats-cells-yellow">308</td>
                <td id="time" class="stats-cells-white">7:02 PM</td>
                <td id="ytum" class="stats-cells-yellow">190</td>
                <td id="yblad" class="stats-cells-white">510</td>
            </tr>
            </tbody>
        </table>
        <div id="objsp">You are carrying: nothing.</div>
    </div>
</div>

</body>
</html>
